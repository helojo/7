<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修C语言指针详解' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>C语言指针详解</center></div><div class='banquan'>原文出处:本文由博客园博主xutopia提供。<br/>
原文连接:https://www.cnblogs.com/xutopia/p/10833374.html</div><br>
    <p class="md-end-block md-p"><span class="md-plain md-expand">　以下讲解是按照如下这个程序的执行顺序来讲解的</span></p>
<h1 class="md-end-block md-heading"><span class="md-plain">一，程序中的c语言指针</span></h1>
<pre><code>&nbsp;<span><span class="cm-variable-3">int <span class="cm-variable">a,<span class="cm-variable">b; <span class="cm-comment">//这是一个普通的整型变量<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">p;<span class="cm-comment">//这是一个整形的指针<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">a <span class="cm-operator">= <span class="cm-number">3;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">b <span class="cm-operator">= <span class="cm-number">4;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-number">6 <br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  a的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">a);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  b的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">b);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的值：%d，现在p的值是不确定的，目前只是为p申请了地址，还没有为它赋值；\r\n", <span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">a;<span class="cm-comment">//取址运算/* p现在指向a */<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  利用取址操作p = &amp;a;，把a的地址赋值给p，现在p的值是%d，也就是a的地址；\r\n", <span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的地址没有变化，p的地址仍然是%d，在这个地址上存储的是变量a的地址；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  利用*运算符得到指针p指向地址中的数值为%d，在刚才p已经指向变量a的地址了，所以指针p指向地址中的值是3，但是p的值仍然是a的地址；\r\n", <span class="cm-operator">*<span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">b <span class="cm-operator">= <span class="cm-operator">*<span class="cm-variable">p;<span class="cm-comment">/* b现在为a的值 */<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  b = *p;，现在b的值就是p指向地址中的值，也就是a的值：%d;\r\n", <span class="cm-variable">b);<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-operator">*<span class="cm-variable">p <span class="cm-operator">= <span class="cm-number">5;<span class="cm-comment">/* a现在为5 */<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  现在利用*p为p指向地址中存储的值进行赋值：%d，这时a的值也已经改变了：%d；\r\n", <span class="cm-operator">*<span class="cm-variable">p,<span class="cm-variable">a);</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-tab"> <span class="md-plain">int a,b; //这是一个普通的整型变量<span class="md-softbreak"> <span class="md-plain">​ int *p;//这是一个整形的指针<span class="md-softbreak"> <span class="md-plain">​ a = 3;<span class="md-softbreak"> <span class="md-plain">​ b = 4;</span></span></span></span></span></span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-variable">printf(<span class="cm-string">" &nbsp;  a的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">a);<br />&nbsp;<span><span class="cm-variable">printf(<span class="cm-string">" &nbsp;  b的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">b);<br />&nbsp;<span><span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的地址：%d；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">p);<br />&nbsp;<span><span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的值：%d，现在p的值是不确定的，目前只是为p申请了地址，还没有为它赋值；\r\n", <span class="cm-variable">p);</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-tab"> <span class="md-plain">指针p定义的时候没有进行初始化，所以在这里，p的初始值是不确定的。<span class="md-softbreak"> <span class="md-plain">　当然也可以在p定义的时候赋初值，这样p的初始值就是确定的了。</span></span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-variable">p <span class="cm-operator">= <span class="cm-number">1;</span></span></span></span></code></pre>
<p class="md-end-block md-p"><strong><img src="./images/C语言指针详解0.png" alt="" /></strong></p>
<p class="md-end-block md-p"><span class="md-plain">一元运算符&amp;可用于取一个对象的地址，如下，这时p为指向a的指针。地址运算符&amp;只能应用于内存中的对象，即变量与数组元素。它不能作用于表达式、常量或register类型的变量。</span></p>
<p class="md-end-block md-p"><span class="md-plain">这时p的值是3930420，即变量a的地址；</span></p>
<p class="md-end-block md-p"><span class="md-plain">利用&amp;取出p的地址仍然为3930396，没有变；</span></p>
<p class="md-end-block md-p"><span class="md-plain">利用间接寻址<span><em>，</em><span class="md-plain">p可以得到指针p指向地址中的值为3，即a的值。</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">p = &amp;a;//取址运算/* p现在指向a */<span class="md-softbreak"> <span class="md-plain"> printf(" 利用取址操作p = &amp;a;，把a的地址赋值给p，现在p的值是%d，也就是a的地址；\r\n", p);<span class="md-softbreak"> <span class="md-plain"> printf(" p的地址没有变化，p的地址仍然是%d，在这个地址上存储的是变量a的地址；\r\n", &amp;p);</span></span></span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">a;<span class="cm-comment">//取址运算/* p现在指向a */<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  利用取址操作p = &amp;a;，把a的地址赋值给p，现在p的值是%d，也就是a的地址；\r\n", <span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  p的地址没有变化，p的地址仍然是%d，在这个地址上存储的是变量a的地址；\r\n", <span class="cm-operator">&amp;<span class="cm-variable">p);<br />&nbsp;<span> &nbsp; &nbsp;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">" &nbsp;  利用*运算符得到指针p指向地址中的数值为%d，在刚才p已经指向变量a的地址了，所以指针p指向地址中的值是3，但是p的值仍然是a的地址；\r\n", <span class="cm-operator">*<span class="cm-variable">p);</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-plain">利用*可以得到p地址中的数值，这里b的值就是3，即a的值。</span></p>
<pre><code>&nbsp;<span> <span class="cm-variable">b <span class="cm-operator">= <span class="cm-operator">*<span class="cm-variable">p;<span class="cm-comment">/* b现在为a的值 */<br />&nbsp;<span> <span class="cm-variable">printf(<span class="cm-string">" &nbsp;  b = *p;，现在b的值就是p指向地址中的值，也就是a的值：%d;\r\n", <span class="cm-variable">b);</span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><img src="./images/C语言指针详解1.png" alt="" /></p>
<p class="md-end-block md-p"><span class="md-plain">对*p进行赋值后，也就是对p指针指向地址中的数值进行赋值，这是a的值也就变为了5</span></p>
<pre><code>&nbsp;<span><span class="cm-operator">*<span class="cm-variable">p <span class="cm-operator">= <span class="cm-number">5;<span class="cm-comment">/* a现在为5 */<br />&nbsp;<span><span class="cm-variable">printf(<span class="cm-string">" &nbsp;  现在利用*p为p指向地址中存储的值进行赋值：%d，这时a的值也已经改变了：%d；\r\n", <span class="cm-operator">*<span class="cm-variable">p,<span class="cm-variable">a);</span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><img src="./images/C语言指针详解2.png" alt="" /></p>
<h1 class="md-end-block md-heading"><span class="md-plain">二，图解C语言指针</span></h1>
<p class="md-end-block md-p"><span class="md-plain">定义两个变量</span></p>
<pre><code>&nbsp;<span><span class="cm-variable-3">int <span class="cm-variable">a<span class="cm-operator">=<span class="cm-number">3,<span class="cm-variable">b; <span class="cm-comment">//这是一个普通的整型变量<br />&nbsp;<span><span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">p;<span class="cm-comment">//这是一个整形的指针</span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-plain">定义后，a的地址是0x2000，p的地址是0x3000；<span class="md-softbreak"> <span class="md-plain">在定义的时候a赋的初始值是3，p没有赋初始值，所以p的值是不确定的。</span></span></span></p>
<p class="md-end-block md-p"><img src="./images/C语言指针详解3.png" alt="" /></p>
<p>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">现在进行运算：</span></p>
<pre><code>&nbsp;<span><span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">a;<span class="cm-comment">//取址运算/* p现在指向a */</span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-plain">这时内存图就变成了这样，p的地址没有变化，但是p的值变化了，此时，*p=3；</span></p>
<p class="md-end-block md-p"><img src="./images/C语言指针详解4.png" alt="" /></p>
<h1 class="md-end-block md-heading"><span class="md-plain">三，指针与函数</span></h1>
<h2 class="md-end-block md-heading"><span class="md-plain">指针作为函数的形参</span></h2>
<p class="md-end-block md-p"><span class="md-plain">在程序设计中，指针作为函数形参往往会带来意想不到的效果，下面用一个例程来讲解指针作为函数形参的特性。<span class="md-softbreak"> <span class="md-plain">例子：用一个函数交换两个变量的值：</span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">Swap(<span class="cm-variable-3">int <span class="cm-variable">x, <span class="cm-variable-3">int <span class="cm-variable">y)<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">temp <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">temp <span class="cm-operator">= <span class="cm-variable">x;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">x <span class="cm-operator">= <span class="cm-variable">y;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">y <span class="cm-operator">= <span class="cm-variable">temp;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">Swap_pointer(<span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">x, <span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">y)<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">temp <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">temp <span class="cm-operator">= <span class="cm-operator">*<span class="cm-variable">x;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-operator">*<span class="cm-variable">x <span class="cm-operator">= <span class="cm-operator">*<span class="cm-variable">y;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-operator">*<span class="cm-variable">y <span class="cm-operator">= <span class="cm-variable">temp;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-comment">/*<br />&nbsp;<span><span class="cm-comment">指针与函数<br />&nbsp;<span><span class="cm-comment">2019-05-09<br />&nbsp;<span><span class="cm-comment">*/<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">Test2()<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">a <span class="cm-operator">= <span class="cm-number">1, <span class="cm-variable">b <span class="cm-operator">= <span class="cm-number">2;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">Swap(<span class="cm-variable">a, <span class="cm-variable">b);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"a=%d\r\n", <span class="cm-variable">a);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"b=%d\r\n", <span class="cm-variable">b);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">Swap_pointer(<span class="cm-operator">&amp;<span class="cm-variable">a, <span class="cm-operator">&amp;<span class="cm-variable">b);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"\r\n");<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"a=%d\r\n", <span class="cm-variable">a);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"b=%d\r\n", <span class="cm-variable">b);<br />&nbsp;<span>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><span class="md-plain">执行结果如下图，可以明显的看出指针作为函数形参的特性。</span></p>
<p class="md-end-block md-p"><span class="md-plain">具体讲解详见《C语言程序设计》的5.2章节。</span></p>
<p class="md-end-block md-p"><img src="./images/C语言指针详解5.png" alt="" /></p>
<p>&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">指针，结构体与函数</span></h2>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">在C语言中，函数本身不是变量，但是也可以定义指向函数的指针。这种指针的使用方法、特性与变量指针的使用方法、特性大同小异。</span></p>
<p class="md-end-block md-p"><span class="md-plain">下面的介绍都是围绕这段函数来讲解的</span></p>
<pre><code>&nbsp;<span><span class="cm-comment">/*<br />&nbsp;<span><span class="cm-comment">xutopia<br />&nbsp;<span><span class="cm-comment">*/<br />&nbsp;<span><span class="cm-meta">#include "stdio.h"<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">int <span class="cm-def">max(<span class="cm-variable-3">int <span class="cm-variable">x, <span class="cm-variable-3">int <span class="cm-variable">y)<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-keyword">return <span class="cm-variable">x <span class="cm-operator">&gt; <span class="cm-variable">y <span class="cm-operator">? <span class="cm-variable">x : <span class="cm-variable">y;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">int <span class="cm-def">min(<span class="cm-variable-3">int <span class="cm-variable">x, <span class="cm-variable-3">int <span class="cm-variable">y)<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-keyword">return <span class="cm-variable">x <span class="cm-operator">&lt; <span class="cm-variable">y <span class="cm-operator">? <span class="cm-variable">x : <span class="cm-variable">y;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">int* <span class="cm-def">maxP(<span class="cm-variable-3">int <span class="cm-variable">x, <span class="cm-variable-3">int* <span class="cm-variable">y)<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-keyword">return <span class="cm-variable">x <span class="cm-operator">&gt; <span class="cm-operator">*<span class="cm-variable">y <span class="cm-operator">? <span class="cm-variable">x : <span class="cm-operator">*<span class="cm-variable">y;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">CallbackFun(<span class="cm-variable-3">int <span class="cm-variable">x, <span class="cm-variable-3">int(<span class="cm-operator">*<span class="cm-variable">f)(<span class="cm-variable-3">int, <span class="cm-variable-3">int <span class="cm-variable">b))<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int <span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0, <span class="cm-variable">a <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-variable">x;<span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10;<span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span><span class="cm-tab">    {<br />&nbsp;<span><span class="cm-tab">    <span class="cm-tab">    <span class="cm-variable">a <span class="cm-operator">= <span class="cm-variable">f(<span class="cm-variable">i, <span class="cm-number">0);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"%d, ",<span class="cm-variable">a);<br />&nbsp;<span><span class="cm-tab">    }<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"\r\n");<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-keyword">typedef <span class="cm-keyword">struct <span class="cm-def">_dat<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int(<span class="cm-operator">*<span class="cm-variable">fun)(<span class="cm-variable-3">int, <span class="cm-variable-3">int);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int* (<span class="cm-operator">*<span class="cm-variable">funP)(<span class="cm-variable-3">int, <span class="cm-variable-3">int*);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">void(<span class="cm-operator">*<span class="cm-variable">funFun)(<span class="cm-variable-3">int, <span class="cm-variable-3">int(<span class="cm-operator">*<span class="cm-variable">f)(<span class="cm-variable-3">int, <span class="cm-variable-3">int));<br />&nbsp;<span><span>​<br />&nbsp;<span>}<span class="cm-variable">datTypedef;<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable">datTypedef <span class="cm-variable">s;<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">int <span class="cm-def">main()<br />&nbsp;<span>{<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int <span class="cm-variable">maxval <span class="cm-operator">= <span class="cm-number">0, <span class="cm-variable">minval <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int <span class="cm-variable">a <span class="cm-operator">= <span class="cm-number">10;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">pval;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">pval <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">a;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-comment">//指针与函数<br />&nbsp;<span><span class="cm-tab">    <span class="cm-comment">//int(*p)(int a, int b);//right<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable-3">int(<span class="cm-operator">*<span class="cm-variable">p)(<span class="cm-variable-3">int, <span class="cm-variable-3">int);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">max;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">maxval <span class="cm-operator">= <span class="cm-variable">p(<span class="cm-number">1, <span class="cm-number">2);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"max=%d\r\n", <span class="cm-variable">maxval);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">min;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">minval <span class="cm-operator">= <span class="cm-variable">p(<span class="cm-number">1, <span class="cm-number">2);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"min=%d\r\n", <span class="cm-variable">minval);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-comment">//结构体，指针与函数<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">s.<span class="cm-variable">fun <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">max;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">maxval <span class="cm-operator">= <span class="cm-variable">s.<span class="cm-variable">fun(<span class="cm-number">3, <span class="cm-number">4);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"\r\nmax=%d\r\n", <span class="cm-variable">maxval);<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">s.<span class="cm-variable">funP <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">maxP;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">pval <span class="cm-operator">= <span class="cm-variable">s.<span class="cm-variable">funP(<span class="cm-number">9, <span class="cm-variable">pval);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">printf(<span class="cm-string">"max=%d\r\n", <span class="cm-variable">pval);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-comment">//回调函数<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">s.<span class="cm-variable">funFun <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">CallbackFun;<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">s.<span class="cm-variable">funFun(<span class="cm-number">4, <span class="cm-variable">max);<br />&nbsp;<span><span class="cm-tab">    <span class="cm-variable">system(<span class="cm-string">"pause");<br />&nbsp;<span>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><img src="./images/C语言指针详解6.png" alt="" /></p>
<p>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">1，指针指向函数。在某些场景下，我们需要用到指针指向函数。</span></p>
<p class="md-end-block md-p"><span class="md-plain">2，在结构体中定义函数指针。利用这样的技巧，可以实现高级语言的特性，例如类的方法，属性等，可以使得代码更加安全规范。</span></p>
<p class="md-end-block md-p"><span class="md-plain">3，函数指针作为函数的参数。</span></p>
<h1 class="md-end-block md-heading"><span class="md-plain">四，指针与数组</span></h1>
<p class="md-end-block md-p"><span class="md-plain">使用数组时，需要明白的一些事项：<span class="md-softbreak"> <span class="md-plain">　　1，申请的数组存储在相邻的内存区域中；<span class="md-softbreak"> <span class="md-plain">　　2，数组名所代表的就是该数组最开始的一个元素的地址；<span class="md-softbreak"> <span class="md-plain">　　3，对数组元素a[i]的引用也可以写成*(a+i)这种形式；<span class="md-softbreak"> <span class="md-plain">　　4，&amp;a[i]和a+i的含义是相同的，简而言之，一个通过数组和下标实现的表达式可等价地通过指针和偏移量实现。；<span class="md-softbreak"> <span class="md-plain">　　5，数组名不是变量，因此，类似于a=pa和a++形式的语句是非法的；<span class="md-softbreak"> <span class="md-plain">　　6，当把数组名传递给一个函数时，实际上传递的是该数组第一个元索的地址；<span class="md-softbreak"> <span class="md-plain">　　下面通过一些例程来解释指针与数组的运用：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-comment">/*<br />&nbsp;<span><span class="cm-comment">统计字符串长度<br />&nbsp;<span><span class="cm-comment">2019-05-09<br />&nbsp;<span><span class="cm-comment">*/<br />&nbsp;<span><span class="cm-comment">//int StrLen(char *s)//数组作为形参有两种写法&ldquo;char s[]&rdquo;、&ldquo;char *s&rdquo;，效果一样的<br />&nbsp;<span><span class="cm-variable-3">int <span class="cm-def">StrLen(<span class="cm-variable-3">char <span class="cm-variable">s[])<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">n;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">n <span class="cm-operator">= <span class="cm-number">0; <span class="cm-operator">*<span class="cm-variable">s <span class="cm-operator">!= <span class="cm-string">'\0'; <span class="cm-variable">s<span class="cm-operator">++)<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n<span class="cm-operator">++;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">return <span class="cm-variable">n;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-comment">/*<br />&nbsp;<span><span class="cm-comment">2019-05-09<br />&nbsp;<span><span class="cm-comment">*/<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">Array_pointer()<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">arr[<span class="cm-number">10];<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable-3">*<span class="cm-variable">p;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0; <span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10; <span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span> &nbsp;  {<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arr[<span class="cm-variable">i] <span class="cm-operator">= <span class="cm-variable">i;<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"数组[%2d]的地址:%d\r\n", <span class="cm-variable">i,<span class="cm-operator">&amp;<span class="cm-variable">arr[<span class="cm-variable">i]);<br />&nbsp;<span> &nbsp;  }<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"将指针p指向数组arr的第0个元素\r\n");<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//将指针p指向数组arr的第0个元素<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">arr[<span class="cm-number">0];<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">p <span class="cm-operator">= <span class="cm-variable">arr;<span class="cm-comment">//也可以写成这种形式，因为数组名所代表的就是该数组最开始的一个元素的地址<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0; <span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10; <span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span> &nbsp;  {<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"p[%d]=%d\r\n", <span class="cm-variable">i, <span class="cm-operator">*(<span class="cm-variable">p<span class="cm-operator">++));<br />&nbsp;<span> &nbsp;  }<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"将指针p指向数组arr的第3个元素\r\n");<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//将指针p指向数组arr的第3个元素<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//打印出来的结果可以看到，最后面3个地址的数值是不确定的<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">arr[<span class="cm-number">3];<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0; <span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10; <span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"p[%d]=%d\r\n", <span class="cm-variable">i, <span class="cm-operator">*(<span class="cm-variable">p<span class="cm-operator">++));<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"安全的做法应该是\r\n");<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//安全的做法应该是<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">p <span class="cm-operator">= <span class="cm-operator">&amp;<span class="cm-variable">arr[<span class="cm-number">3];<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0; <span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10<span class="cm-operator">-<span class="cm-number">3; <span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"p[%d]=%d\r\n", <span class="cm-variable">i, <span class="cm-operator">*(<span class="cm-variable">p<span class="cm-operator">++));<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"对数组也可以进行如下方式的使用\r\n");<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//对数组也可以进行如下方式的使用<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-comment">//printf("arr[%d]=%d\r\n", i, *(arr++));//数组名不是变量，因此，类似于arr=p和arr++形式的语句是非法的<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">for (<span class="cm-variable">i <span class="cm-operator">= <span class="cm-number">0; <span class="cm-variable">i <span class="cm-operator">&lt; <span class="cm-number">10; <span class="cm-variable">i<span class="cm-operator">++)<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"arr[%d]=%d\r\n", <span class="cm-variable">i, <span class="cm-operator">*(<span class="cm-variable">arr <span class="cm-operator">+ <span class="cm-variable">i));<br />&nbsp;<span><span>​<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">int <span class="cm-variable">n <span class="cm-operator">= <span class="cm-number">0;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">char <span class="cm-variable-3">*<span class="cm-variable">str <span class="cm-operator">= <span class="cm-string">"hello,word";<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">n <span class="cm-operator">= <span class="cm-variable">StrLen(<span class="cm-variable">str);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"n=%d\r\n", <span class="cm-variable">n);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">n <span class="cm-operator">= <span class="cm-variable">StrLen(<span class="cm-operator">&amp;<span class="cm-variable">str[<span class="cm-number">2]);<span class="cm-comment">//当然，这里可以只传入数组的一部分<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"n=%d\r\n", <span class="cm-variable">n);<br />&nbsp;<span>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><img src="./images/C语言指针详解7.png" alt="" /></p>
<p>&nbsp;</p>
<h1 class="md-end-block md-heading"><span class="md-plain">五，地址算术运算</span></h1>
<p class="md-end-block md-p"><span class="md-plain">通过以下这个例子讲解地址算术运算<span class="md-softbreak"> <span class="md-plain">　　这是一个不完善的存储分配程序。它由两个函数组成。第一个函数alloc(n)返回一个指向n个连续字符存储单元的指针，alloc函数的调用者可利用该指针存储字符序列。第二个函数afree(p)释放已分配的存储空间，以便以后重用。之所以说这两个函数是&ldquo;不完善的&rdquo;，是因为对afree函数的调用次序必须与调用alloc函数的次序相反。换句话说，alloc与afree以栈的方式（即后进先出的列表）进行存储空间的管理。标准库中提供了具有类似功能的函数malloc和free，它们没有上述限制。</span></span></span></p>
<pre><code>&nbsp;<span><span class="cm-meta">#define ALLOCSIZE 10000 <span class="cm-comment">/* 可用空间大小 */<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-keyword">static <span class="cm-variable-3">char <span class="cm-variable">allocbuf[<span class="cm-variable">ALLOCSIZE];<span class="cm-comment">/* alloc使用的存储区 */<br />&nbsp;<span><span class="cm-keyword">static <span class="cm-variable-3">char <span class="cm-variable-3">*<span class="cm-variable">allocp <span class="cm-operator">= <span class="cm-variable">allocbuf; <span class="cm-comment">/* 下一个空闲位置 */<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">char <span class="cm-variable-3">*<span class="cm-def">alloc(<span class="cm-variable-3">int <span class="cm-variable">n) <span class="cm-comment">/* 返回指向n个字符的指针 */<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">if (<span class="cm-variable">allocbuf <span class="cm-operator">+ <span class="cm-variable">ALLOCSIZE <span class="cm-operator">- <span class="cm-variable">allocp <span class="cm-operator">&gt;= <span class="cm-variable">n) { <span class="cm-comment">/* 有足够的空闲空间 */<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allocp <span class="cm-operator">+= <span class="cm-variable">n;<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return <span class="cm-variable">allocp <span class="cm-operator">- <span class="cm-variable">n; <span class="cm-comment">/* 分配前的指针 */<br />&nbsp;<span> &nbsp;  }<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">else <span class="cm-comment">/* 空间不够 */<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return <span class="cm-number">0;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">afree(<span class="cm-variable-3">char <span class="cm-variable-3">*<span class="cm-variable">p) <span class="cm-comment">/* 释放p指向的存储区 */<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-keyword">if (<span class="cm-variable">p <span class="cm-operator">&gt;= <span class="cm-variable">allocbuf <span class="cm-operator">&amp;&amp; <span class="cm-variable">p <span class="cm-operator">&lt; <span class="cm-variable">allocbuf <span class="cm-operator">+ <span class="cm-variable">ALLOCSIZE)<br />&nbsp;<span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allocp <span class="cm-operator">= <span class="cm-variable">p;<br />&nbsp;<span>}<br />&nbsp;<span><span>​<br />&nbsp;<span><span class="cm-comment">/*<br />&nbsp;<span><span class="cm-comment">指针运算<br />&nbsp;<span><span class="cm-comment">2019-05-09<br />&nbsp;<span><span class="cm-comment">*/<br />&nbsp;<span><span class="cm-variable-3">void <span class="cm-def">Pointer_cal()<br />&nbsp;<span>{<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable-3">char <span class="cm-variable-3">*<span class="cm-variable">allAddr;<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"空闲地址:%d\r\n", <span class="cm-variable">allocp);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">allAddr <span class="cm-operator">= <span class="cm-variable">alloc(<span class="cm-number">100);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"空闲地址:%d\r\n", <span class="cm-variable">allocp);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">afree(<span class="cm-variable">allAddr);<br />&nbsp;<span> &nbsp; &nbsp;<span class="cm-variable">printf(<span class="cm-string">"空闲地址:%d\r\n", <span class="cm-variable">allocp);<br />&nbsp;<span>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p class="md-end-block md-p"><img src="./images/C语言指针详解8.png" alt="" /></p>
<p class="md-end-block md-p"><span class="md-plain">未完，待续</span></p>
<p><span class="md-plain">&nbsp;</span></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>