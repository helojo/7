<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®C çŒœçŒœçŒœ&#128512;æ–‡å­—å°æ¸¸æˆ' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>C çŒœçŒœçŒœ&#128512;æ–‡å­—å°æ¸¸æˆ</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»å–œæ¬¢å…°èŠ±å±±ä¸˜æä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/life2refuel/p/11222126.html</div><br>
    <h3><strong>å‰è¨€ - éšæœºæ€§</strong></h3>
<div>ã€€ã€€<a title="éšæœºæ•°ç”Ÿæˆ" href="https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90" target="_blank">éšæœºæ•°ç”Ÿæˆ</a> -&nbsp;<a href="https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90">https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90</a>
<p>ã€€ã€€æ²¡å•¥äº‹æƒ…, å†™äº†ä¸ªçŒœçŒœçŒœ(çŒœæ•°å­—)å°æ¸¸æˆ. é‡åˆ°çŒœçš„éƒ¨åˆ†, é‚£è‚¯å®šä¼šç”¨åˆ°éšæœºå‡½æ•°. æˆ‘ä»¬ä¸ºäº†å¤šå¹³å°è¡Œä¸ºä¸€è‡´, å°±ç»Ÿä¸€</p>
<p>æ•´åˆä¸€ä¸ªä¼ªéšæœºå‡½æ•°å®ç°æ–¹æ¡ˆ, è®©éšæœºæ›´éšæœº. ä¸€å¼€å§‹çœ‹ä¸‹æ¥å£è®¾è®¡ <strong>rand.h</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">#ifndef _RAND_H
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">#define</span> _RAND_H
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> #include &lt;stdint.h&gt;
<span style="color: #008080;"> 5</span> #include &lt;assert.h&gt;
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #008000;">//</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;">//</span><span style="color: #008000;"> ä¼ æ‰¿(æŠ„è¢­)ä¸ç­(åˆ›æ–°) rand åº“
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;">//</span><span style="color: #008000;"> å¤§ä½“æ€è·¯ 
</span><span style="color: #008080;">10</span> <span style="color: #008000;">//</span><span style="color: #008000;">  { r | r[n+1] = (a*r[n] + c) mod m
</span><span style="color: #008080;">11</span> <span style="color: #008000;">//</span><span style="color: #008000;">      , n &gt;= 0
</span><span style="color: #008080;">12</span> <span style="color: #008000;">//</span><span style="color: #008000;">      , m = 0xFFFFFFFFFFFF = 2 ^ 48
</span><span style="color: #008080;">13</span> <span style="color: #008000;">//</span><span style="color: #008000;">      , a = 0x0005DEECE66D = 0x5DEECE66D,
</span><span style="color: #008080;">14</span> <span style="color: #008000;">//</span><span style="color: #008000;">      , c = 0x000B         = 0xB
</span><span style="color: #008080;">15</span> <span style="color: #008000;">//</span><span style="color: #008000;">  }
</span><span style="color: #008080;">16</span> <span style="color: #008000;">//
</span><span style="color: #008080;">17</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> rand {
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    uint32_t x0, x1, x2;
</span><span style="color: #008080;">19</span> <span style="color: #000000;">    uint32_t a0, a1, a2;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    uint32_t c;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">};
</span><span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> typedef <span style="color: #0000ff;">struct</span> rand rand_t[<span style="color: #800080;">1</span><span style="color: #000000;">];
</span><span style="color: #008080;">24</span> 
<span style="color: #008080;">25</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">26</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_init - éšæœºå‡½æ•°å¯¹è±¡åˆå§‹åŒ–ç§å­
</span><span style="color: #008080;">27</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r         : éšæœºå‡½æ•°å¯¹è±¡
</span><span style="color: #008080;">28</span> <span style="color: #008000;">//</span><span style="color: #008000;"> seed      : ç§å­æ•°
</span><span style="color: #008080;">29</span> <span style="color: #008000;">//</span><span style="color: #008000;"> return    : void
</span><span style="color: #008080;">30</span> <span style="color: #008000;">//
</span><span style="color: #008080;">31</span> <span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_init(rand_t r, int64_t seed);
</span><span style="color: #008080;">32</span> 
<span style="color: #008080;">33</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">34</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_rand - è·å–ä¸€ä¸ªéšæœºå€¼
</span><span style="color: #008080;">35</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r         : éšæœºå‡½æ•°å¯¹è±¡
</span><span style="color: #008080;">36</span> <span style="color: #008000;">//</span><span style="color: #008000;"> return    : è¿”å› [0, INT32_MAX] éšæœºæ•°
</span><span style="color: #008080;">37</span> <span style="color: #008000;">//
</span><span style="color: #008080;">38</span> <span style="color: #0000ff;">extern</span><span style="color: #000000;"> int32_t rand_rand(rand_t r);
</span><span style="color: #008080;">39</span> 
<span style="color: #008080;">40</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">41</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r_rand - å¾—åˆ° [0, INT32_MAX] éšæœºæ•°
</span><span style="color: #008080;">42</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r_ranb - å¾—åˆ° [0, INT64_MAX] (int64 = big int32) éšæœºæ•°
</span><span style="color: #008080;">43</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r_rang - å¾—åˆ° range [min, max] éšæœºæ•°
</span><span style="color: #008080;">44</span> <span style="color: #008000;">//
</span><span style="color: #008080;">45</span> <span style="color: #0000ff;">extern</span> int32_t r_rand(<span style="color: #0000ff;">void</span><span style="color: #000000;">);
</span><span style="color: #008080;">46</span> 
<span style="color: #008080;">47</span> <span style="color: #0000ff;">extern</span> int64_t r_ranb(<span style="color: #0000ff;">void</span><span style="color: #000000;">);
</span><span style="color: #008080;">48</span> 
<span style="color: #008080;">49</span> <span style="color: #000000;">inline int32_t r_rang(int32_t min, int32_t max) {
</span><span style="color: #008080;">50</span>     assert(max &gt;=<span style="color: #000000;"> min);
</span><span style="color: #008080;">51</span>     <span style="color: #0000ff;">return</span> r_rand() % (max - min + <span style="color: #800080;">1</span>) +<span style="color: #000000;"> min;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">}
</span><span style="color: #008080;">53</span> 
<span style="color: #008080;">54</span> <span style="color: #0000ff;">#endif</span><span style="color: #008000;">//</span><span style="color: #008000;">_RAND_H</span></code></pre>

<p><strong>rand.c&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> #include <span style="color: #800000;">"</span><span style="color: #800000;">rand.h</span><span style="color: #800000;">"</span>
<span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">#define</span> X0              (0x330E)
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">#define</span> X1              (0xABCD)
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">#define</span> X2              (0x1234)
<span style="color: #008080;"> 6</span> <span style="color: #0000ff;">#define</span> A0              (0xE66D)
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">#define</span> A1              (0xDEEC)
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">#define</span> A2              (0x0005)
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">#define</span> C               (0x000B)
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">#define</span> N               (16)
<span style="color: #008080;">12</span> <span style="color: #0000ff;">#define</span> MASK            ((1 &lt;&lt; N) - 1)
<span style="color: #008080;">13</span> <span style="color: #0000ff;">#define</span> LOW(x)          ((uint32_t)(x) &amp; MASK)
<span style="color: #008080;">14</span> <span style="color: #0000ff;">#define</span> HIGH(x)         LOW((x) &gt;&gt; N)
<span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">17</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_init - éšæœºå‡½æ•°å¯¹è±¡åˆå§‹åŒ–ç§å­
</span><span style="color: #008080;">18</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r         : éšæœºå‡½æ•°å¯¹è±¡
</span><span style="color: #008080;">19</span> <span style="color: #008000;">//</span><span style="color: #008000;"> seed      : ç§å­æ•°
</span><span style="color: #008080;">20</span> <span style="color: #008000;">//</span><span style="color: #008000;"> return    : void
</span><span style="color: #008080;">21</span> <span style="color: #008000;">//
</span><span style="color: #008080;">22</span> inline <span style="color: #0000ff;">void</span> 
<span style="color: #008080;">23</span> <span style="color: #000000;">rand_init(rand_t r, int64_t seed) {
</span><span style="color: #008080;">24</span>     r-&gt;x0 = X0; r-&gt;x1 = LOW(seed); r-&gt;x2 =<span style="color: #000000;"> HIGH(seed);
</span><span style="color: #008080;">25</span>     r-&gt;a0 = A0; r-&gt;a1 = A1; r-&gt;a2 =<span style="color: #000000;"> A2;
</span><span style="color: #008080;">26</span>     r-&gt;c =<span style="color: #000000;"> C;
</span><span style="color: #008080;">27</span> <span style="color: #000000;">}
</span><span style="color: #008080;">28</span> 
<span style="color: #008080;">29</span> <span style="color: #0000ff;">#define</span> CARRY(x, y)     ((x + y) &gt; MASK) <span style="color: #008000;">//</span><span style="color: #008000;"> åŸºäº 16 ä½åˆ¤æ–­äºŒè€…å’Œæ˜¯å¦è¿›ä½</span>
<span style="color: #008080;">30</span> <span style="color: #0000ff;">#define</span> ADDRQ(x, y, z)  z = CARRY(x, y); x = LOW(x + y)
<span style="color: #008080;">31</span> <span style="color: #0000ff;">#define</span> MUL(m, x, y, z) m = (x) * (y); z##0 = LOW(m); z##1 = HIGH(m)
<span style="color: #008080;">32</span> 
<span style="color: #008080;">33</span> inline <span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_next(rand_t r) {
</span><span style="color: #008080;">34</span> <span style="color: #000000;">    uint32_t m, p0, p1, q0, q1, s0, s1, c0, c1;
</span><span style="color: #008080;">35</span> 
<span style="color: #008080;">36</span>     MUL(m, r-&gt;a0, r-&gt;<span style="color: #000000;">x0, p);
</span><span style="color: #008080;">37</span>     ADDRQ(p0, r-&gt;<span style="color: #000000;">c, c0);
</span><span style="color: #008080;">38</span> <span style="color: #000000;">    ADDRQ(p1, c0, c1);
</span><span style="color: #008080;">39</span>     MUL(m, r-&gt;a0, r-&gt;<span style="color: #000000;">x1, q);
</span><span style="color: #008080;">40</span> <span style="color: #000000;">    ADDRQ(p1, q0, c0);
</span><span style="color: #008080;">41</span>     MUL(m, r-&gt;a1, r-&gt;<span style="color: #000000;">x0, s);
</span><span style="color: #008080;">42</span> 
<span style="color: #008080;">43</span>     m = c0 + c1 + CARRY(p1, s0) + q1 +<span style="color: #000000;"> s1 
</span><span style="color: #008080;">44</span>         + r-&gt;a0 * r-&gt;x2 + r-&gt;a1 * r-&gt;x1 + r-&gt;a2 * r-&gt;<span style="color: #000000;">x0;
</span><span style="color: #008080;">45</span>     r-&gt;x2 =<span style="color: #000000;"> LOW(m);
</span><span style="color: #008080;">46</span>     r-&gt;x1 = LOW(p1 +<span style="color: #000000;"> s0);
</span><span style="color: #008080;">47</span>     r-&gt;x0 =<span style="color: #000000;"> LOW(p0);
</span><span style="color: #008080;">48</span> <span style="color: #000000;">}
</span><span style="color: #008080;">49</span> 
<span style="color: #008080;">50</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">51</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_rand - è·å–ä¸€ä¸ªéšæœºå€¼
</span><span style="color: #008080;">52</span> <span style="color: #008000;">//</span><span style="color: #008000;"> r         : éšæœºå‡½æ•°å¯¹è±¡
</span><span style="color: #008080;">53</span> <span style="color: #008000;">//</span><span style="color: #008000;"> return    : è¿”å› [0, INT32_MAX] éšæœºæ•°
</span><span style="color: #008080;">54</span> <span style="color: #008000;">//
</span><span style="color: #008080;">55</span> <span style="color: #000000;">inline int32_t 
</span><span style="color: #008080;">56</span> <span style="color: #000000;">rand_rand(rand_t r) {
</span><span style="color: #008080;">57</span> <span style="color: #000000;">    rand_next(r);
</span><span style="color: #008080;">58</span>     <span style="color: #0000ff;">return</span> (r-&gt;x2 &lt;&lt; (N - <span style="color: #800080;">1</span>)) + (r-&gt;x1 &gt;&gt; <span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">59</span> <span style="color: #000000;">}
</span><span style="color: #008080;">60</span> 
<span style="color: #008080;">61</span> <span style="color: #008000;">//</span>
<span style="color: #008080;">62</span> <span style="color: #008000;">//</span><span style="color: #008000;"> æƒ³è¿‡ - æœµæœµæµªèŠ±, ä¹Ÿä¸æ›¾çœ‹è§äº‘å½©é£˜è¿‡ :0
</span><span style="color: #008080;">63</span> <span style="color: #008000;">//
</span><span style="color: #008080;">64</span> <span style="color: #0000ff;">static</span> rand_t r_r =<span style="color: #000000;"> { { X0, X1, X2 , A0, A1, A2 , C } };
</span><span style="color: #008080;">65</span> 
<span style="color: #008080;">66</span> <span style="color: #008000;">//</span><span style="color: #008000;"> EXTERN_RUN(r_init) å¯åŠ¨åˆå§‹åŒ–</span>
<span style="color: #008080;">67</span> <span style="color: #0000ff;">extern</span> inline <span style="color: #0000ff;">void</span><span style="color: #000000;"> r_init(int64_t seed) {
</span><span style="color: #008080;">68</span> <span style="color: #000000;">    rand_init(r_r, seed);
</span><span style="color: #008080;">69</span> <span style="color: #000000;">}
</span><span style="color: #008080;">70</span> 
<span style="color: #008080;">71</span> <span style="color: #000000;">inline int32_t 
</span><span style="color: #008080;">72</span> r_rand(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">73</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> rand_rand(r_r);
</span><span style="color: #008080;">74</span> <span style="color: #000000;">}
</span><span style="color: #008080;">75</span> 
<span style="color: #008080;">76</span> <span style="color: #000000;">inline int64_t 
</span><span style="color: #008080;">77</span> r_ranb(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">78</span>     uint64_t x = ((r_rand() &lt;&lt; N) ^ r_rand()) &amp;<span style="color: #000000;"> INT32_MAX;
</span><span style="color: #008080;">79</span>     uint64_t y = ((r_rand() &lt;&lt; N) ^ r_rand()) &amp;<span style="color: #000000;"> INT32_MAX;
</span><span style="color: #008080;">80</span>     <span style="color: #0000ff;">return</span> ((x &lt;&lt; <span style="color: #800080;">2</span> * N) | y) &amp;<span style="color: #000000;"> INT64_MAX;    
</span><span style="color: #008080;">81</span> }</code></pre>

<p>ç®—æ³•å±‚é¢ç½‘ä¸Šèµ„æ–™å¾ˆå¤Ÿ(redis rand48 åŸç†) . æˆ‘è¿™é‡ŒåªèŠèŠå·¥ç¨‹å®ç°æ–¹é¢, å¯ä»¥çœ‹å‡ºæ¥å¤šçº¿ç¨‹å¹¶å‘å‘èµ· r_rand()</p>
<p>è¯·æ±‚æ˜¯ä¸å¯æ§çš„(éçº¿ç¨‹å®‰å…¨, ä½ ä¹Ÿä¸çŸ¥é“å†…éƒ¨è¿è¡ŒçŠ¶æ€æ˜¯å•¥). ä½†å¦‚æœå­˜åœ¨ç‰¹æ®Šä¸šåŠ¡éœ€è¦å¯çª¥æ¢éšæœºåºåˆ—æ—¶å€™,</p>
<p>rand_init&nbsp; å°±å¯ä»¥è¿ç”¨ä¸Šäº†, æ¥æ„å»ºå¤šçº¿ç¨‹æƒ…å†µä¸‹å¯æ§çš„éšæœºå‡½æ•°å¯¹è±¡.&nbsp;&nbsp;</p>
<p>ã€€ã€€&nbsp;å¯¹äº r_init å¤šæ•°ä½¿ç”¨ time(NULL) æ—¶é—´é‡åˆå§‹åŒ–ç§å­,&nbsp;æœ‰æ²¡æœ‰äººè§‰å¾—ä¸å¤ªå¯é , æ¯•ç«ŸæœåŠ¡å™¨æ—¶é—´ä¹Ÿå¯ä»¥æ”¹. æœ‰</p>
<p>æ²¡æœ‰æƒ³è¿‡è®©å…¶æ›´åŠ æ··ä¹±ä¸€ç‚¹. è¿™é‡Œæœ‰ä¸ªå°æƒ³æ³•, æå‡ºæ¥å¯ä¾›å¤§å®¶ä¸€å—å‚ç•¥è®¨è®ºè®¨è®º.</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"><br /> 1</span> <span style="color: #008000;">//</span>
<span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;"> EXTERN_RUN - å‡½æ•°åŒ…è£…å®, å£°æ˜å¹¶ç«‹å³ä½¿ç”¨
</span><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;"> frun     : éœ€è¦æ‰§è¡Œçš„å‡½æ•°åç§°
</span><span style="color: #008080;"> 4</span> <span style="color: #008000;">//</span><span style="color: #008000;"> ...      : å¯å˜å‚æ•°, ä¿ç•™
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;">//
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">#define</span> EXTERN_RUN(frun, ...)                          \
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">do</span><span style="color: #000000;"> {                                                   \
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> frun();                                \
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    frun (__VA_ARGS__);                                \
</span><span style="color: #008080;">10</span> } <span style="color: #0000ff;">while</span>(<span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #008000;">//</span><span style="color: #008000;"> æ­¤å :) éšæœºä¸ä½ æ— å…³ ~</span>
<span style="color: #008080;">13</span> EXTERN_RUN(rand_restrict);<br /><br /></code></pre>

<div class="cnblogs_code">
<pre><code><span style="color: #008080;">17</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_nationalism - æ°‘æ—ä¸»ä¹‰, å›½å®¶æ˜¯äººæ°‘æ‰€å…±æœ‰, å„æ—å¹³ç­‰, å›¢ç»“ä¸€è‡´</span>
<span style="color: #008080;">18</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> rand_nationalism(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">struct</span><span style="color: #000000;"> timespec s; 
</span><span style="color: #008080;">20</span>     (<span style="color: #0000ff;">void</span>)timespec_get(&amp;<span style="color: #000000;">s, TIME_UTC);
</span><span style="color: #008080;">21</span>     EXTERN_RUN(r_init, s.tv_nsec +<span style="color: #000000;"> s.tv_sec);
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">for</span> (int32_t i = BUFSIZ; i &gt; <span style="color: #800080;">0</span> ; --<span style="color: #000000;">i) {
</span><span style="color: #008080;">23</span>         (<span style="color: #0000ff;">void</span>)timespec_get(&amp;<span style="color: #000000;">s, TIME_UTC);
</span><span style="color: #008080;">24</span>         EXTERN_RUN(r_init, s.tv_nsec +<span style="color: #000000;"> i);
</span><span style="color: #008080;">25</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">26</span> <span style="color: #000000;">}
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_democracy - æ°‘æƒä¸»ä¹‰, æ”¿æ²»æ˜¯äººæ°‘æ‰€å…±ç®¡, é€‰ä¸¾æƒã€ç½¢å…æƒã€åˆ›åˆ¶æƒå’Œå¤å†³æƒ</span>
<span style="color: #008080;">29</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> rand_democracy(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">30</span> <span style="color: #000000;">    int32_t x, y, z, w;
</span><span style="color: #008080;">31</span>     <span style="color: #0000ff;">do</span><span style="color: #000000;"> {
</span><span style="color: #008080;">32</span>         x =<span style="color: #000000;"> r_rand();
</span><span style="color: #008080;">33</span>         y =<span style="color: #000000;"> r_rand();
</span><span style="color: #008080;">34</span>         z =<span style="color: #000000;"> r_rand();
</span><span style="color: #008080;">35</span>         w =<span style="color: #000000;"> r_rand();
</span><span style="color: #008080;">36</span>     } <span style="color: #0000ff;">while</span> (!(x &gt; y &amp;&amp; y &gt; z &amp;&amp; z &gt; w &amp;&amp; w &gt;<span style="color: #000000;"> INT16_MAX));
</span><span style="color: #008080;">37</span> <span style="color: #000000;">}
</span><span style="color: #008080;">38</span> 
<span style="color: #008080;">39</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_livelihood - æ°‘ç”Ÿä¸»ä¹‰, åˆ©ç›Šæ˜¯äººæ°‘æ‰€å…±äº«, è®©äººåƒä¸ªäºº</span>
<span style="color: #008080;">40</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> rand_livelihood(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">41</span>     <span style="color: #0000ff;">for</span> (int32_t i = r_rand(); i &gt;= <span style="color: #800080;">0</span>; --<span style="color: #000000;">i)
</span><span style="color: #008080;">42</span> <span style="color: #000000;">        r_rand();
</span><span style="color: #008080;">43</span> <span style="color: #000000;">}
</span><span style="color: #008080;">44</span> 
<span style="color: #008080;">45</span> <span style="color: #008000;">//</span><span style="color: #008000;"> rand_restrict - ä¸‰æƒåˆ¶è¡¡åœ¨éšæœºå‡½æ•°åˆä¸­è¿ç”¨</span>
<span style="color: #008080;">46</span> <span style="color: #0000ff;">void</span> rand_restrict(<span style="color: #0000ff;">void</span><span style="color: #000000;">) {
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    thread_async(rand_nationalism);
</span><span style="color: #008080;">48</span> <span style="color: #000000;">    thread_async(rand_democracy);
</span><span style="color: #008080;">49</span> <span style="color: #000000;">    thread_async(rand_livelihood);
</span><span style="color: #008080;">50</span> }</code></pre>

<p>&nbsp;<a title="structc rand init" href="https://github.com/wangzhione/structc/blob/master/structc/main/main_init.c#L67" target="_blank">ä¼ é€é—¨</a>&nbsp;æ ¸å¿ƒæ˜¯å¼•å…¥å¤šçº¿ç¨‹äº’ç›¸ç«äº‰åˆ¶çº¦, è®©éšæœºå‡½æ•°ä½ æˆ‘ä¸çŸ¥, æ¨¡ç³Šä¸æ¸…, æ‰æ‘¸ä¸é€.&nbsp; è¿™é‡Œåªæ˜¯çå¼„ä¸€ä¸ªæ€è·¯.</p>
<p>å¤§å®¶æœ‰æ›´å¥½çš„æƒ³æ³•å¯ä»¥åœ¨è¯„è®ºåŒºå’Œæˆ‘ä¸€å—äº¤æµ.&nbsp;</p>
<p>&nbsp;</p>
<h3><strong>æ­£æ–‡ - çŒœçŒœçŒœ</strong></h3>
<p>ã€€ã€€æ˜¯ä¸æ˜¯è¦å¼€å§‹æ‰¯é—²ç¯‡. é‚£å°±ç”¨ä¸Šé¢éšæœºåº“å†™ä¸ªçŒœçŒœçŒœæ¸¸æˆå§ ~&nbsp;</p>
<p><strong>main.c</strong></p>
<div class="cnblogs_code">
<pre><code>#include <span style="color: #800000;">"</span><span style="color: #800000;">rand.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span>&lt;time.h&gt;<span style="color: #000000;">
#include </span>&lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000;">
#include </span>&lt;stdbool.h&gt;

<span style="color: #008000;">//</span>
<span style="color: #008000;">//</span><span style="color: #008000;"> EXTERN_RUN - å‡½æ•°åŒ…è£…å®, å£°æ˜å¹¶ç«‹å³ä½¿ç”¨
</span><span style="color: #008000;">//</span><span style="color: #008000;"> frun     : éœ€è¦æ‰§è¡Œçš„å‡½æ•°åç§°
</span><span style="color: #008000;">//</span><span style="color: #008000;"> ...      : å¯å˜å‚æ•°, ä¿ç•™
</span><span style="color: #008000;">//
</span><span style="color: #0000ff;">#define</span> EXTERN_RUN(frun, ...)                          \
<span style="color: #0000ff;">do</span><span style="color: #000000;"> {                                                   \
    </span><span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> frun();                                \
    frun (__VA_ARGS__);                                \
} </span><span style="color: #0000ff;">while</span>(<span style="color: #800080;">0</span><span style="color: #000000;">)

</span><span style="color: #008000;">//</span> 
<span style="color: #008000;">//</span><span style="color: #008000;"> GUESS_THRESHOLD_INT - çŒœæ•°æœ€å¤šæ¬¡æ•°
</span><span style="color: #008000;">//</span><span style="color: #008000;"> GUESS_TEMPER_INT    - é‡åˆ°å°è„¾æ°”ä¸å†è§¦å‘æç¤º
</span><span style="color: #008000;">//</span><span style="color: #008000;"> GUESS_MAX_INT       - æœ€å¤§å€¼åŒºé—´
</span><span style="color: #008000;">//
</span><span style="color: #0000ff;">#define</span> GUESS_THRESHOLD_INT     (8)
<span style="color: #0000ff;">#define</span> GUESS_TEMPER_INT        (3)
<span style="color: #0000ff;">#define</span> GUESS_MAX_INT           (8964)

<span style="color: #008000;">//</span><span style="color: #008000;"> guess çŒœæ•°å­—æ¸¸æˆå¯¹è±¡</span>
<span style="color: #0000ff;">struct</span><span style="color: #000000;"> guess {
    int32_t max;                          </span><span style="color: #008000;">//</span><span style="color: #008000;"> æ•°å­—åŒºé—´ä¸Šé™</span>
    int32_t correct;                      <span style="color: #008000;">//</span><span style="color: #008000;"> æ­£ç¡®æ•°å€¼</span>
    int32_t use;                          <span style="color: #008000;">//</span><span style="color: #008000;"> å·²ç»çŒœæ•°æ¬¡æ•°</span>
    int32_t numbers[GUESS_THRESHOLD_INT]; <span style="color: #008000;">//</span><span style="color: #008000;"> ç”¨æˆ·çŒœæ•°æ•°ç»„</span>
    int32_t now;                          <span style="color: #008000;">//</span><span style="color: #008000;"> ç”¨æˆ·å½“å‰è¾“å…¥å€¼</span>
<span style="color: #000000;">};

</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_run çŒœæ•°å­—æ¸¸æˆå¼€å§‹</span>
<span style="color: #0000ff;">void</span> guess_run(<span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g); 
</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_guess çŒœæ•°å­—å¼€å¯çŒœçŒœçŒœ</span>
<span style="color: #0000ff;">bool</span> guess_guess(<span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g);
</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_end çŒœæ•°å­—æ¸¸æˆç»“æŸæ€»ç»“</span>
<span style="color: #0000ff;">void</span> guess_end(<span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g);

</span><span style="color: #008000;">//</span><span style="color: #008000;"> threshold_input - è·å–çŒœæ•°å­—çš„èŒƒå›´</span>
<span style="color: #0000ff;">static</span> int32_t threshold_input(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> *<span style="color: #000000;"> argv[]) {
    int32_t max </span>=<span style="color: #000000;"> GUESS_MAX_INT;
    </span><span style="color: #0000ff;">if</span> (argc &gt; <span style="color: #800080;">1</span><span style="color: #000000;">) {
        </span><span style="color: #0000ff;">int</span> num = atoi(argv[<span style="color: #800080;">1</span><span style="color: #000000;">]);
        </span><span style="color: #0000ff;">if</span> (num &lt;= <span style="color: #800080;">0</span><span style="color: #000000;">) {
            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">äº²ï¼Œ åˆ«ğŸ‘‡çé—¹ [input = %s] å¥½ä¸å¥½ ï½\n</span><span style="color: #800000;">"</span>, argv[<span style="color: #800080;">1</span><span style="color: #000000;">]);
            exit(EXIT_FAILURE);
        }
        max </span>=<span style="color: #000000;"> num;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> max;
}

</span><span style="color: #008000;">//</span>
<span style="color: #008000;">//</span><span style="color: #008000;"> ç®€å•çš„çŒœçŒœçŒœæ•°å­—æ¸¸æˆ
</span><span style="color: #008000;">//
</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> *<span style="color: #000000;"> argv[]) {
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> è·å–çŒœæ•°å­—èŒƒå›´</span>
    <span style="color: #0000ff;">int</span> max =<span style="color: #000000;"> threshold_input(argc, argv);

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> è®¾ç½®éšæœºå‡½æ•°ç§å­</span>
    <span style="color: #0000ff;">struct</span><span style="color: #000000;"> timespec s; 
    (</span><span style="color: #0000ff;">void</span>)timespec_get(&amp;<span style="color: #000000;">s, TIME_UTC);
    EXTERN_RUN(r_init, s.tv_nsec </span>+<span style="color: #000000;"> s.tv_sec);

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> è®¾ç½® guess number å¯¹è±¡</span>
    <span style="color: #0000ff;">struct</span> guess user =<span style="color: #000000;"> { 
        .max </span>=<span style="color: #000000;"> max,
        .correct </span>= r_rand() % user.max + <span style="color: #800080;">1</span><span style="color: #000000;">,
    };

    guess_run(</span>&amp;<span style="color: #000000;">user);
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> æ¸¸æˆè¿‡ç¨‹ä¸»é€»è¾‘</span>
    <span style="color: #0000ff;">while</span> (!guess_guess(&amp;<span style="color: #000000;">user))
        ;
    guess_end(</span>&amp;<span style="color: #000000;">user);

    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}

</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_run çŒœæ•°å­—æ¸¸æˆå¼€å§‹</span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> 
guess_run(</span><span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g) {
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">------------------------******* å¤§ä¾ ï¼ŒçŒœçŒœçŒœ *******------------------------\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; å¤§ä¾ ï¼Œå¦‚æ­¤éš¾å¾—èˆå¾—ï¼Œ ä¸å¦‚ ğŸ¤±  çŒœçŒœçŒœ\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; 1. çŒœæ•°èŒƒå›´ [1, %d]\n</span><span style="color: #800000;">"</span>, g-&gt;<span style="color: #000000;">max);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; 2. æ‹¥æœ‰çŒœæ•°æœºä¼š [%d] æ¬¡\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, GUESS_THRESHOLD_INT);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; 3. è§¦å‘å°è„¾æ°” ğŸ¦  1/%d, ä¸å†å¤šç»™æç¤º\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, GUESS_TEMPER_INT);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; ready Go\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
}

</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_check çŒœæ•°å­—æ¸¸æˆæ£€æŸ¥</span>
<span style="color: #0000ff;">static</span> <span style="color: #0000ff;">bool</span> guess_check(<span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g) {
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> çŒœä¸­æ•°å­—ï¼Œ è¿›å…¥ç»“æŸç¯èŠ‚</span>
    <span style="color: #0000ff;">if</span> (g-&gt;now == g-&gt;<span style="color: #000000;">correct) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; å“‡ï¼Œæ£’æ£’æ£’\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;      
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> å…è´¹æ¬¡æ•°ç”¨å®Œ</span>
    <span style="color: #0000ff;">if</span> (g-&gt;use &gt;=<span style="color: #000000;"> GUESS_THRESHOLD_INT) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; å‘å¤š ğŸ¾  ä¸å¤Ÿï¼Œå¤§ä¾ å°±æ­¤åˆ«è¿‡ ï½\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> è¿›å…¥æç¤ºç¯èŠ‚</span>
    int32_t luckly = r_rand() %<span style="color: #000000;"> GUESS_TEMPER_INT;
    </span><span style="color: #0000ff;">if</span> (luckly == <span style="color: #800080;">0</span><span style="color: #000000;">) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; å°è„¾æ°”ï¼ŒğŸ§   è„‘å­æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå¯æƒœæœ‰äº›äººæ²¡æœ‰ ğŸ’µ\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> æ­£å¸¸æç¤ºç¯èŠ‚</span>
    <span style="color: #0000ff;">if</span> (g-&gt;now &gt; g-&gt;<span style="color: #000000;">correct) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; [%d] ğŸ¤ª  å¤§äº†\n</span><span style="color: #800000;">"</span>, g-&gt;<span style="color: #000000;">now);    
    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; [%d] ğŸ¤ª  å°äº†\n</span><span style="color: #800000;">"</span>, g-&gt;<span style="color: #000000;">now);   
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
}

</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_guess çŒœæ•°å­—å¼€å¯çŒœçŒœçŒœ</span>
<span style="color: #0000ff;">bool</span><span style="color: #000000;"> 
guess_guess(</span><span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g) {    
    int32_t num;
    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> buf[BUFSIZ];
    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (;;) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; äº²ï¼Œè¾“å…¥ luckly æ•°å­—å§ ğŸ•— : </span><span style="color: #800000;">"</span><span style="color: #000000;">);

        </span><span style="color: #0000ff;">if</span> (fgets(buf, <span style="color: #0000ff;">sizeof</span><span style="color: #000000;"> buf, stdin)) {
            </span><span style="color: #0000ff;">if</span> (buf[<span style="color: #800080;">0</span>] == <span style="color: #800000;">'</span><span style="color: #800000;">q</span><span style="color: #800000;">'</span> || buf[<span style="color: #800080;">0</span>] == <span style="color: #800000;">'</span><span style="color: #800000;">Q</span><span style="color: #800000;">'</span><span style="color: #000000;">) {
                printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-$ èšæ˜¯ä¸€å›¢ç«ï¼Œæ•£æ˜¯æ»¡å¤© ğŸ’« \n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                exit(EXIT_SUCCESS);
            }

            </span><span style="color: #0000ff;">if</span> ((num = atoi(buf)) &gt; <span style="color: #800080;">0</span><span style="color: #000000;">) {
                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
            }

            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-&gt; å¤§ä¾ å¤–é¢çš„ä¸–ç•Œå¾ˆç²¾å½©ï¼Œ ğŸ’¨  å¿«èµ°å§ï¼Œåˆ«ä¹±å›é€† â­• å“¦ --&lt;-\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        }

        </span><span style="color: #008000;">//</span><span style="color: #008000;"> æ¸…é™¤è¾“å…¥çš„ç¼“å†²æŒ‡é’ˆ</span>
<span style="color: #000000;">        rewind(stdin);
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> æ•°æ®è®°å½•</span>
    g-&gt;now =<span style="color: #000000;"> num;
    g</span>-&gt;numbers[g-&gt;use++] =<span style="color: #000000;"> num;

    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> guess_check(g);
}

</span><span style="color: #008000;">//</span><span style="color: #008000;"> guess_end çŒœæ•°å­—æ¸¸æˆç»“æŸæ€»ç»“</span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> 
guess_end(</span><span style="color: #0000ff;">struct</span> guess *<span style="color: #000000;"> restrict g) {
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;- å¤§ä¾ å–æ¯èŒ¶ï¼Œ ğŸ™  ç¨å ï½\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;- çŒœèŒƒå›´ [1, %d]\n</span><span style="color: #800000;">"</span>, g-&gt;<span style="color: #000000;">max);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;- luckly æ˜¯ [%d] ä½ æ˜¯ %s\n</span><span style="color: #800000;">"</span>, g-&gt;correct, g-&gt;now == g-&gt;correct ? <span style="color: #800000;">"</span><span style="color: #800000;">&radic; </span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">âŒ</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;- çŒœæµ‹è¿‡ç¨‹ [ %d</span><span style="color: #800000;">"</span>, g-&gt;numbers[<span style="color: #800080;">0</span><span style="color: #000000;">]);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt; g-&gt;use; ++<span style="color: #000000;">i)
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> -&gt; %d </span><span style="color: #800000;">"</span>, g-&gt;<span style="color: #000000;">numbers[i]);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">]\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">if</span> (g-&gt;use &lt;= <span style="color: #800080;">1</span><span style="color: #000000;">) {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-$ æ— æ•°å¥‡çœŸä¾›ä¸–çœ¼, ä¸€è½®æ˜æœˆè€€å¤©å¿ƒ â¤\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;- é£ğŸƒ ä»æ²¡æœ‰åœæ­¢ï¼Œå¤§ä¾ çš„æ•…äº‹â›µ  ä»ç„¶åœ¨å›å“ ï½\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">------------------------******* çŒœæ•°ï¼ŒçŒœçŒœçŒœ *******------------------------\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
}</span></code></pre>

<p>å…¶ä¸­ç¼–è¯‘æ“ä½œ <strong>Makefile</strong>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">.PHONY : all clean

all : guess.exe

guess.exe : main.o rand.o
    gcc </span>-g -Wall -O2 -Wno-unused-result -o $@ $^<span style="color: #000000;">

main.o : main.c
    gcc </span>-g -Wall -O2 -c -o $@ $&lt;<span style="color: #000000;">

rand.o : rand.c
    gcc </span>-g -Wall -O2 -c -o $@ $&lt;<span style="color: #000000;">

clean:
    </span>-rm -<span style="color: #000000;">rf guess.exe main.o rand.o
    </span>-printf <span style="color: #800000;">'</span><span style="color: #800000;">\ec</span><span style="color: #800000;">'</span>
    </code></pre>

<p>æœ‰å…´è¶£æœ‹å‹å¯ä»¥è¯•è¯• ~&nbsp; å“ˆå“ˆå“ˆ å¤§ä¾ è¯·å–èŒ¶ ~</p>
<h3><strong>åè®° - å»å»å»</strong></h3>
<p><strong>ã€€ã€€</strong>ç»†è¯´éƒ½æ˜¯é”™, æ¬¢è¿äº¤æµæŒ‡æ­£äº’ç›¸åšä¸€ä¹.<strong><br /></strong></p>
<p>ã€€ã€€<a title="[é»„æ¢…æˆ] è°æ–™çš‡æ¦œä¸­çŠ¶å…ƒ" href="https://www.kugou.com/song/#hash=C25E49A4B64E60E02895F60155942719&amp;album_id=970764" target="_blank">[é»„æ¢…æˆ] è°æ–™çš‡æ¦œä¸­çŠ¶å…ƒ</a> -&nbsp;<a href="https://www.kugou.com/song/#hash=C25E49A4B64E60E02895F60155942719&amp;album_id=970764">https://www.kugou.com/song/#hash=C25E49A4B64E60E02895F60155942719&amp;album_id=970764</a></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>