<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Nginx安装、配置和使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Nginx安装、配置和使用</center></div><div class='banquan'>原文出处:本文由博客园博主佩奇er提供。<br/>
原文连接:https://www.cnblogs.com/hxun/p/10748611.html</div><br>
    <h2>&nbsp;<strong>Nginx</strong></h2>
<h3>1、&nbsp;<strong><span style="font-family: 宋体;">什么是</span>nginx</strong></h3>
<p><span style="font-family: 宋体;">是一个使用</span>c<span style="font-family: 宋体;">语言开发的高性能的</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">服务器及反向代理服务器。</span></p>
<p>Nginx<span style="font-family: 宋体;">是一款高性能的</span><span style="font-family: 'Times New Roman';">http </span><span style="font-family: 宋体;">服务器</span><span style="font-family: 'Times New Roman';">/</span><span style="font-family: 宋体;">反向代理服务器及电子邮件（</span><span style="font-family: 'Times New Roman';">IMAP/POP3</span><span style="font-family: 宋体;">）代理服务器。由俄罗斯的程序设计师</span><span style="font-family: 'Times New Roman';">Igor Sysoev</span><span style="font-family: 宋体;">所开发</span>，<span style="font-family: 宋体;">官方测试</span>nginx<span style="font-family: 宋体;">能够支支撑</span><span style="font-family: 'Times New Roman';">5</span><span style="font-family: 宋体;">万并发链接，并且</span><span style="font-family: 'Times New Roman';">cpu</span><span style="font-family: 宋体;">、内存等资源消耗却非常低，运行非常稳定。</span></p>
<p>&nbsp;</p>
<h3>2、&nbsp;<strong>Nginx<span style="font-family: 宋体;">的应用场景</span></strong></h3>
<p>1、http<span style="font-family: 宋体;">服务器。</span><span style="font-family: 'Times New Roman';">Nginx</span><span style="font-family: 宋体;">是一个</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">服务可以独立提供</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">服务。可以做网页静态服务器。</span></p>
<p>2、虚拟主机。可以实现在一台服务器虚拟出多个网站。例如个人网站使用的虚拟主机。</p>
<p>3、<span style="font-family: 宋体;">反向代理，负载均衡。当网站的访问量达到一定程度后，单台服务器不能满足用户的请求时，需要用多台服务器集群可以使用</span>nginx<span style="font-family: 宋体;">做反向代理。并且多台服务器可以平均分担负载，不会因为某台服务器负载高宕机而某台服务器闲置的情况。</span></p>
<p>&nbsp;</p>
<h3>3、&nbsp;<strong>Nginx<span style="font-family: 宋体;">的安装</span></strong></h3>
<p>Nginx<span style="font-family: 宋体;">一般推荐安装到</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">系统，而且要安装</span><span style="font-family: 'Times New Roman';">c</span><span style="font-family: 宋体;">语言的编译环境</span><span style="font-family: 'Times New Roman';">gcc</span><span style="font-family: 宋体;">。</span></p>
<h4>3.1&nbsp;<strong>下载：</strong></h4>
<p>进入http://nginx.org/en/download.html&nbsp;<span style="font-family: 宋体;">下载</span>nginx1.8.0<span style="font-family: 宋体;">版本（当前最新稳定版本）。</span></p>
<p><img src="./images/Nginx安装、配置和使用0.png" alt="" /></p>
<h4>3.2&nbsp;<strong>先安装</strong><strong>nginx<span style="font-family: 黑体;">依赖的包：</span></strong></h4>
<p>nginx<span style="font-family: 宋体;">是</span><span style="font-family: 'Times New Roman';">C</span><span style="font-family: 宋体;">语言开发，建议在</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">上运行，本教程使用</span><span style="font-family: 'Times New Roman';">Centos6.5</span><span style="font-family: 宋体;">作为安装环境。</span></p>
<p class="17"><span style="font-family: 宋体;">1) 安装</span>nginx<span style="font-family: 宋体;">需要先将官网下载的源码进行编译，编译依赖</span><span style="font-family: 'Times New Roman';">gcc</span><span style="font-family: 宋体;">环境，如果没有</span><span style="font-family: 'Times New Roman';">gcc</span><span style="font-family: 宋体;">环境，需要安装</span><span style="font-family: 'Times New Roman';">gcc</span><span style="font-family: 宋体;">：</span></p>
<src class="cnblogs_code">
<pre><code>yum install -y gcc gcc-c++</code></pre>

<p>&nbsp;</p>
<p>2) PCRE(Perl Compatible Regular Expressions)<span style="font-family: 宋体;">是一个</span><span style="font-family: 'Times New Roman';">Perl</span><span style="font-family: 宋体;">库，包括 </span><span style="font-family: 'Times New Roman';">perl </span><span style="font-family: 宋体;">兼容的正则表达式库。</span><span style="font-family: 'Times New Roman';">nginx</span><span style="font-family: 宋体;">的</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">模块使用</span><span style="font-family: 'Times New Roman';">pcre</span><span style="font-family: 宋体;">来解析正则表达式，所以需要在</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">上安装</span><span style="font-family: 'Times New Roman';">pcre</span><span style="font-family: 宋体;">库。</span></p>
<src class="cnblogs_code">
<pre><code>yum install -y pcre pcre-devel</code></pre>

<p><span style="font-family: 宋体;">注：</span>pcre-devel<span style="font-family: 宋体;">是使用</span><span style="font-family: 'Times New Roman';">pcre</span><span style="font-family: 宋体;">开发的一个二次开发库。</span><span style="font-family: 'Times New Roman';">nginx</span><span style="font-family: 宋体;">也需要此库。</span></p>
<p class="17">&nbsp;</p>
<p>3) zlib<span style="font-family: 宋体;">库提供了很多种压缩和解压缩的方式，</span><span style="font-family: 'Times New Roman';">nginx</span><span style="font-family: 宋体;">使用</span><span style="font-family: 'Times New Roman';">zlib</span><span style="font-family: 宋体;">对</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">包的内容进行</span><span style="font-family: 'Times New Roman';">gzip</span><span style="font-family: 宋体;">，所以需要在</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">上安装</span><span style="font-family: 'Times New Roman';">zlib</span><span style="font-family: 宋体;">库。</span></p>
<src class="cnblogs_code">
<pre><code>yum install -y zlib zlib-devel</code></pre>

<p>&nbsp;</p>
<p>4) OpenSSL <span style="font-family: 宋体;">是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及</span><span style="font-family: 'Times New Roman';">SSL</span><span style="font-family: 宋体;">协议，并提供丰富的应用程序供测试或其它目的使用。</span></p>
<p>nginx<span style="font-family: 宋体;">不仅支持</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">协议，还支持</span><span style="font-family: 'Times New Roman';">https</span><span style="font-family: 宋体;">（即在</span><span style="font-family: 'Times New Roman';">ssl</span><span style="font-family: 宋体;">协议上传输</span><span style="font-family: 'Times New Roman';">http</span><span style="font-family: 宋体;">），所以需要在</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">安装</span><span style="font-family: 'Times New Roman';">openssl</span><span style="font-family: 宋体;">库。</span></p>
<src class="cnblogs_code">
<pre><code>yum install -y openssl openssl-devel</code></pre>

<p>&nbsp;</p>
<h4>3.3&nbsp;<strong>安装步骤</strong></h4>
<p><span style="font-family: 宋体;">第一步：下载nginx，并把</span>nginx<span style="font-family: 宋体;">的源码上传到</span><span style="font-family: 'Times New Roman';">linux</span><span style="font-family: 宋体;">系统：</span></p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code>wget http://nginx.org/download/nginx-1.8.1.tar.gz</code></pre>

<p>&nbsp;</p>
<p>第二步：把压缩包解压缩：</p>
<src class="cnblogs_code">
<pre><code>tar -zxvf nginx-1.8.1.tar.gz</code></pre>

<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第三步：进入nginx目录下，并进行</span>configure<span style="font-family: 宋体;">。</span></p>
<src class="cnblogs_code">
<pre><code>cd nginx-1.8.0<br />./configure</code></pre>

<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第四步：</span></p>
<src class="cnblogs_code">
<pre><code>make</code></pre>

<p>&nbsp;</p>
<p><span style="font-family: 宋体;">第五步：</span></p>
<src class="cnblogs_code">
<pre><code>make install<br />或者编译到指定路径下：(<span style="color: red;">推荐)</span><br /><span style="color: red;">make install PREFIX=/usr/local/nginx</span></code></pre>

<p>&nbsp;</p>
<h3>4、&nbsp;<strong>Nginx<span style="font-family: 宋体;">的启动、停止</span></strong></h3>
<p>1<span style="font-family: 宋体;">、启动：</span><span style="font-family: 宋体; color: red;">进入</span><span style="font-family: &quot;Times New Roman&quot;; color: red;">nginx</span><span style="font-family: 宋体; color: red;">的</span><span style="font-family: &quot;Times New Roman&quot;; color: red;">sbin</span><span style="font-family: 宋体; color: red;">目录下&nbsp;</span><span style="font-family: 宋体;">启动：</span></p><p>cd /usr/local/nginx/sbin</p><p>./nginx</p>
<p>&nbsp;</p>
<p>打开浏览器访问此机器的 IP，如果浏览器出现 Welcome to nginx! 则表示 Nginx 已经安装并运行成功。</p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/Nginx安装、配置和使用1.png" alt="" /></p>
<p>如果访问不到，首先查看防火墙是否关闭。</p>
<p>&nbsp;</p>
<p>2<span style="font-family: 宋体;">、</span>关闭nginx<span style="font-family: 宋体;">：（<span style="color: #ff0000;">3种方法</span>）</span></p>
<p><span style="font-family: 宋体;">可以使用</span>kill<span style="font-family: 宋体;">命令，但是不推荐使用。</span></p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #000000;">1）<br />./nginx -s stop
<br />2）查看进程号，杀死进程，不推荐<br />ps -ef|grep nginx<br />kill -9 xxx <br /><br />3）强制停止<br />pkill -9 nginx</span></code></pre>

<p>&nbsp;</p>
<p>3、<span style="font-family: 宋体;">刷新配置：</span></p>
<src class="cnblogs_code">
<pre><code>./nginx -s reload</code></pre>

<p>&nbsp;</p>
<h3>5、&nbsp;<strong>Nginx<span style="font-family: 宋体;">的配置</span></strong></h3>
<p><span style="font-family: 宋体;">在</span>/usr/local/nginx/conf<span style="font-family: 宋体;">目录下</span><span style="font-family: 'Times New Roman';">nginx.conf</span><span style="font-family: 宋体;">文件是</span><span style="font-family: 'Times New Roman';">nginx</span><span style="font-family: 宋体;">的配置文件。</span></p>
<src class="cnblogs_code">
<pre><code>vim /usr/local/nginx/conf/nginx.conf</code></pre>

<p>&nbsp;</p>
<p>&nbsp;<img src="./images/Nginx安装、配置和使用2.png" alt="" /></p>
<p>&nbsp;</p>
<p>验证配置文件：</p>
<src class="cnblogs_code">
<pre><code>/usr/local/nginx/sbin/nginx -t</code></pre>

<p>&nbsp;</p>
<h3>6、&nbsp;<strong>使用</strong><strong>nginx<span style="font-family: 宋体;">配置虚拟机</span></strong></h3>
<h4>6.1&nbsp;<strong>通过端口区分虚拟机</strong></h4>
<p><span style="font-family: 宋体;">在</span>nginx.conf<span style="font-family: 宋体;">文件中添加一个</span><span style="font-family: 'Times New Roman';">Service</span><span style="font-family: 宋体;">节点，修改端口号就可以</span></p>
<table border="1" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="568">
<p>server {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;81;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name &nbsp;localhost;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#charset koi8-r;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#access_log &nbsp;logs/host.access.log &nbsp;main;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location / {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root &nbsp;&nbsp;html81;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index &nbsp;index.html index.htm;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;&nbsp;}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h4>6.2&nbsp;<strong>通过域名区分虚拟机</strong></h4>
<h5>6.2.1&nbsp;<strong>域名介绍</strong></h5>
<p><strong><img src="./images/Nginx安装、配置和使用3.png" alt="" /></strong></p>
<p><span style="font-family: 宋体;">可以通过修改</span>host<span style="font-family: 宋体;">文件指定域名的</span><span style="font-family: 'Times New Roman';">ip</span><span style="font-family: 宋体;">地址。</span></p>
<p>Host<span style="font-family: 宋体;">文件的位置：</span>C:\Windows\System32\drivers\etc</p>
<p>可以使用工具：</p>
<p>&nbsp;<img src="./images/Nginx安装、配置和使用4.png" alt="" /></p>
<h5>6.2.2&nbsp;<strong>配置基于域名的虚拟主机</strong></h5>
<p><span style="font-family: 宋体;">需要修改</span>nginx.conf<span style="font-family: 宋体;">配置文件。</span></p>
<table border="1" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="568">
<p>server {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name &nbsp;test3.taotao.com;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#charset koi8-r;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#access_log &nbsp;logs/host.access.log &nbsp;main;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location / {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root &nbsp;&nbsp;html-test3;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index &nbsp;index.html index.htm;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;&nbsp;}</p>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">注意：修改配置后需要重新加载配置文件。/usr/local/nginx/sbin/nginx -s reload</span></p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>