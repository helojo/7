<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修noi.ac309 Mas的童年' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>noi.ac309 Mas的童年</center></div><div class='banquan'>原文出处:本文由博客园博主wxyww提供。<br/>
原文连接:https://www.cnblogs.com/wxyww/p/noiac309.html</div><br>
    <p><a href="http://noi.ac/problem/309"><font size=5>题目链接</font></a></p>
<h1 id="题面">题面</h1>
<h2 id="题目描述">题目描述</h2>
<p><span class="math inline">\(Mas\)</span>完成了一天的工作，走在回家的路上，看着路边的景色，他想起来自己的童年。</p>
<p>许许多多的记忆交错，丝丝缕缕的牵扯着<span class="math inline">\(Mas\)</span>。</p>
<p>在回忆的深处，<span class="math inline">\(Mas\)</span>想起来了一个常常在幼儿园玩的游戏。</p>
<p>有<span class="math inline">\(n\)</span>个小朋友一起排成一排，然后小朋友们会一起开始跳舞。</p>
<p>聪明的<span class="math inline">\(Mas\)</span>发现，每个小朋友都有自己的高兴程度，对于第<span class="math inline">\(i\)</span>个小朋友，他的高兴程度是<span class="math inline">\(ai\)</span>。</p>
<p>当一排高兴程度分别为<span class="math inline">\(b_1,b_2,…,b_k\)</span>的<span class="math inline">\(k\)</span>个小朋友跳舞的时候，他们会产生<span class="math inline">\(b1 \otimes b2 \otimes ⋯\otimes bk\)</span>的愉悦值。</p>
<p>但是<span class="math inline">\(Mas\)</span>觉得不够尽兴，于是他决定让小朋友们从某个位置分开，让原本一排的队伍分成两排，从而使两排新队伍的愉悦值加起来最大，当然，是有可能不分成两排的。</p>
<p>具体的，对于一排kk个小朋友，他们的高兴程度分别是<span class="math inline">\(b_1,b_2,…,b_k\)</span>,<span class="math inline">\(Mas\)</span>会找到位置<span class="math inline">\(i\in [0,k)，使得(b1\otimes ⋯\otimes bi)+(bi+1\otimes ⋯\otimes bk)\)</span>最大。</p>
<p>回想起这个游戏的<span class="math inline">\(Mas\)</span>决定再来玩一下这个游戏，于是他想起来了某一天排成一排的<span class="math inline">\(n\)</span>个小朋友的高兴程度<span class="math inline">\(a1,a2,…,an\)</span>对于<span class="math inline">\(i=1..n\)</span>，<span class="math inline">\(Mas\)</span>希望求出前<span class="math inline">\(i\)</span>个小朋友排成的队伍中通过拆分成两个队伍能够得到的最大愉悦值的和是多少。</p>
<h2 id="输入">输入</h2>
<p>第一行一个正整数<span class="math inline">\(n\)</span>表示小朋友的数量。</p>
<p>第二行<span class="math inline">\(n\)</span>个整数，表示<span class="math inline">\(a_{1..n}\)</span>。</p>
<h2 id="输出">输出</h2>
<p>一行<span class="math inline">\(n\)</span>个整数表示答案。</p>
<h1 id="思路">思路</h1>
<p>读完拉么长的题面。发现他其实就是对于每个位置要求这个东西</p>
<p><span class="math display">\[max\{(S_i \otimes S_j)+ S_j\}\]</span></p>
<p>其中<span class="math inline">\(S_i\)</span>表示前<span class="math inline">\(i\)</span>个元素的异或和。</p>
<p>然后根据<span class="math inline">\(a+b = a\otimes b + (a \&amp; b) \times 2\)</span></p>
<blockquote>
<p>这个证明的话很显然：因为异或相当于不进位的加法。用<span class="math inline">\(\&amp;\)</span>可以求出需要进位的位置。然后乘二在相加就可以啦。</p>
</blockquote>
<p>这样我们就可以把要求的式子变成这个样子</p>
<p><span class="math display">\[max\{S_i \otimes S_j \otimes S_j + (S_i \otimes S_j \&amp; S_j) \times 2\}\]</span></p>
<p><span class="math display">\[=max\{S_i + (S_i \otimes S_j \&amp; S_j) \times 2\}\]</span></p>
<p>因为<span class="math inline">\(S_i\)</span>是确定的，只要让<span class="math inline">\(S_i \otimes S_j \&amp; S_j\)</span>最大就行了。</p>
<p>然后我们按位思考。对于二进制下的第<span class="math inline">\(k\)</span>位。如果<span class="math inline">\(S_i\)</span>的这一位为<span class="math inline">\(1\)</span>，那么不管<span class="math inline">\(S_j\)</span>这一位是什么，肯定都无法将答案的这一位变成<span class="math inline">\(1\)</span>。</p>
<p>所以我们就想要让<span class="math inline">\(S_i\)</span>为<span class="math inline">\(0\)</span>的那些位置尽可能变成<span class="math inline">\(1\)</span>。</p>
<p>对于每个<span class="math inline">\(S_j\)</span>，我们将他和他的子集标记一下。然后贪心的从高位到低位将<span class="math inline">\(S_i\)</span>为<span class="math inline">\(0\)</span>的位置变为<span class="math inline">\(1\)</span>.</p>
<p>并且查看当前的答案是不是之前标记过。</p>
<p>具体看代码吧</p>
<h1 id="代码">代码</h1>
<pre><code>/*
* @Author: wxyww
* @Date:   2019-03-30 08:10:10
* @Last Modified time: 2019-03-31 08:31:43
*/
#include&lt;cstdio&gt;
#include&lt;iostream&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;queue&gt;
#include&lt;vector&gt;
#include&lt;ctime&gt;
using namespace std;
typedef long long ll;
const int N = 2000000 + 100;
ll read() {
    ll x=0,f=1;char c=getchar();
    while(c&lt;&#39;0&#39;||c&gt;&#39;9&#39;) {
        if(c==&#39;-&#39;) f=-1;
        c=getchar();
    }
    while(c&gt;=&#39;0&#39;&amp;&amp;c&lt;=&#39;9&#39;) {
        x=x*10+c-&#39;0&#39;;
        c=getchar();
    }
    return x*f;
}
int s[N];
bool vis[N];
void ins(int x) {
    if(vis[x]) return;
    vis[x] = true;
    for(int i = 0;i &lt;= 20;++i) {
        if((x &gt;&gt; i) &amp; 1)    ins(x - (1 &lt;&lt; i));
    }
}
int solve(int x) {
    int ret = 0;
    int k = x ^ ((1 &lt;&lt; 21) - 1);
    for(int i = 20;i &gt;= 0;--i) 
        if(((k &gt;&gt; i) &amp; 1) &amp;&amp; vis[(ret + (1 &lt;&lt; i))]) 
            ret += (1 &lt;&lt; i);
    return ret;
}
int main() {
    int n = read();
    for(int i = 1;i &lt;= n;++i) s[i] = s[i - 1] ^ read();

    vis[0] = true;

    for(int i = 1;i &lt;= n;++i) {
        printf(&quot;%d &quot;,solve(s[i]) * 2 + s[i]);
        ins(s[i]);
    }

    return 0;
}</code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>