<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修剑指offer55：链表中环的入口结点' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>剑指offer55：链表中环的入口结点</center></div><div class='banquan'>原文出处:本文由博客园博主wxwreal提供。<br/>
原文连接:https://www.cnblogs.com/wxwhnu/p/11429099.html</div><br>
    <h3 class="subject-item-title">1 题目描述</h3>
<div class="subject-describe">
<div class="js-question-content">　　给一个链表，若其中包含环，请找出该链表的环的入口结点，否则，输出null。</div>
<div class="js-question-content">
<h3 class="subject-item-title">2 思路和方法</h3>
<p>　　<img src="./images/剑指offer55：链表中环的入口结点0.png" alt="" width="423" height="216" /></p>
<p>　　这是一个典型的链表中查找环的问题，基本思路是，首先设置两个快慢指针slow和fast，并且快指针fast每次前进两步，慢指针slow每次前进一步，假定当相遇的时候，设慢指针在环中走了y步，设环之外的部分长为x，环的长度</p>
<p>为y+z，则快指针一共走了：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span id="MathJax-Element-1-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;      x+b_1*c+k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;"><span id="MathJax-Span-1" class="math"><span id="MathJax-Span-2" class="mrow"><span id="MathJax-Span-3" class="semantics"><span id="MathJax-Span-4" class="mrow"><span id="MathJax-Span-5" class="mi">x<span id="MathJax-Span-6" class="mo">+<span id="MathJax-Span-7" class="msub"><span id="MathJax-Span-8" class="mi">b<span id="MathJax-Span-9" class="mn">1<span id="MathJax-Span-10" class="mo">&lowast;<span id="MathJax-Span-11" class="mi">(y+z)<span id="MathJax-Span-12" class="mo">+<span id="MathJax-Span-13" class="mi">y</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="katex--inline"><span class="katex--inline"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord mathit"><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="vlist-s"><span class="vlist-r"><span class="vlist"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit">步，（</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="katex--inline"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord"><span class="mord mathit">b<span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1<span class="vlist-s">​<span class="vlist-r"><span class="vlist">为快指针在环中走的圈数）</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>慢指针一共走了：x<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span id="MathJax-Element-3-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;      x+b_2*c+k&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;"><span id="MathJax-Span-21" class="math"><span id="MathJax-Span-22" class="mrow"><span id="MathJax-Span-23" class="semantics"><span id="MathJax-Span-24" class="mrow"><span id="MathJax-Span-25" class="mi"><span id="MathJax-Span-26" class="mo">+<span id="MathJax-Span-27" class="msub"><span id="MathJax-Span-28" class="mi">b<span id="MathJax-Span-29" class="mn">2<span id="MathJax-Span-30" class="mo">&lowast;<span id="MathJax-Span-31" class="mi">(y+z)<span id="MathJax-Span-32" class="mo">+<span id="MathJax-Span-33" class="mi">k</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="katex--inline"><span class="katex--inline"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord mathit"><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="vlist-s"><span class="vlist-r"><span class="vlist"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit"><span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;      b_1&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;"><span class="katex--inline"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord mathit"><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="vlist-s"><span class="vlist-r"><span class="vlist"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit"><span class="mspace"><span class="mbin"><span class="mspace"><span class="base"><span class="strut"><span class="mord mathit">步,（<span class="katex--inline"><span class="katex"><span class="katex-mathml"><span class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;      b_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;"><span id="MathJax-Span-34" class="math"><span id="MathJax-Span-35" class="mrow"><span id="MathJax-Span-36" class="semantics"><span id="MathJax-Span-37" class="mrow"><span id="MathJax-Span-38" class="msub"><span id="MathJax-Span-39" class="mi">b<span id="MathJax-Span-40" class="mn">2</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="katex--inline"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord"><span class="mord mathit"><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="vlist-s">​<span class="vlist-r"><span class="vlist">为快指针在环中走的圈数）因</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>为快指针的速度是慢指针的两倍。</p>
<p>　　首先，pHead、pHead-&gt;next和pHead-&gt;next-&gt;next是否为空；其次，while（fast！=slow）循环快指针和慢指针各走2步和1步，直到相等时（表明有环）跳出循环。最后，用相遇点来寻找环的入口（在编程时使用在走z步的方法比较繁琐），方法是：设置原来的快指针fast为pHead，这次每次走一步，同时slow也走一步，当两个指针相遇时即找到环的入口B，相遇时两个指针走了x步。</p>
<h3 class="subject-item-title">3 C++核心代码</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('a495c030-cce4-4f08-a764-16c0178334e5')"><img id="code_img_closed_a495c030-cce4-4f08-a764-16c0178334e5" class="code_img_closed" src="./images/剑指offer55：链表中环的入口结点1.png" alt="" /><img id="code_img_opened_a495c030-cce4-4f08-a764-16c0178334e5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a495c030-cce4-4f08-a764-16c0178334e5',event)" src="./images/剑指offer55：链表中环的入口结点2.png" alt="" />
<div id="cnblogs_code_open_a495c030-cce4-4f08-a764-16c0178334e5" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 3</span>     ListNode* EntryNodeOfLoop(ListNode*<span style="color: #000000;"> pHead)
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">if</span>(pHead==NULL || pHead-&gt;next==NULL || pHead-&gt;next-&gt;next==<span style="color: #000000;">NULL)
</span><span style="color: #008080;"> 6</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> NULL;
</span><span style="color: #008080;"> 7</span>         ListNode* slow = pHead-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;"> 8</span>         ListNode* fast = pHead-&gt;next-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">while</span>(slow !=<span style="color: #000000;"> fast){
</span><span style="color: #008080;">10</span>             <span style="color: #0000ff;">if</span>(fast-&gt;next!=NULL &amp;&amp; fast-&gt;next-&gt;next!=<span style="color: #000000;">NULL){
</span><span style="color: #008080;">11</span>                 slow = slow-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;">12</span>                 fast = fast-&gt;next-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;">13</span>             }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">14</span>                 <span style="color: #0000ff;">return</span><span style="color: #000000;"> NULL;
</span><span style="color: #008080;">15</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">17</span>         fast = pHead;<span style="color: #008000;">//</span><span style="color: #008000;">为了减少指针变量，由于快指针已经没有用处，因此将其指定为新的慢指针</span>
<span style="color: #008080;">18</span>         <span style="color: #0000ff;">while</span>(slow != fast){<span style="color: #008000;">//</span><span style="color: #008000;">到这里已经说明存在环，因此无需判断指针是否为空</span>
<span style="color: #008080;">19</span>             slow = slow-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;">20</span>             fast = fast-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> slow;
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">24</span> };</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('db49f468-b1c5-4388-a2e7-8b310a447c3f')"><img id="code_img_closed_db49f468-b1c5-4388-a2e7-8b310a447c3f" class="code_img_closed" src="./images/剑指offer55：链表中环的入口结点1.png" alt="" /><img id="code_img_opened_db49f468-b1c5-4388-a2e7-8b310a447c3f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('db49f468-b1c5-4388-a2e7-8b310a447c3f',event)" src="./images/剑指offer55：链表中环的入口结点2.png" alt="" />
<div id="cnblogs_code_open_db49f468-b1c5-4388-a2e7-8b310a447c3f" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 3</span>     ListNode* EntryNodeOfLoop(ListNode*<span style="color: #000000;"> pHead)
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">set</span>&lt;ListNode*&gt;<span style="color: #000000;"> s;
</span><span style="color: #008080;"> 6</span>         ListNode* node =<span style="color: #000000;"> pHead;
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">while</span>(node!=<span style="color: #000000;">NULL){
</span><span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;">(s.insert(node).second)
</span><span style="color: #008080;"> 9</span>                 node = node-&gt;<span style="color: #000000;">next;
</span><span style="color: #008080;">10</span>             <span style="color: #0000ff;">else</span>
<span style="color: #008080;">11</span>                 <span style="color: #0000ff;">return</span><span style="color: #000000;"> node;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> node;
</span><span style="color: #008080;">14</span>          
<span style="color: #008080;">15</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">16</span> };</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<h3 class="subject-item-title">参考资料</h3>
<p>https://blog.csdn.net/weixin_40271182/article/details/84309418</p>
<p>https://blog.csdn.net/HelloZEX/article/details/81087398</p>
</div>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>