<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修矩阵拿宝物--Codeforces 1201D - Treasure Hunting  Codeforces Round #577 (Div. 2)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>矩阵拿宝物--Codeforces 1201D - Treasure Hunting  Codeforces Round #577 (Div. 2)</center></div><div class='banquan'>原文出处:本文由博客园博主ZMWLxh提供。<br/>
原文连接:https://www.cnblogs.com/--HPY-7m/p/11312103.html</div><br>
    <h2>网上题解比较少，自己比较弱研究了半天（已经过了），希望对找题解的人有帮助</h2>
<p>题目链接：<a href="https://codeforc.es/contest/1201/problem/D">https://codeforc.es/contest/1201/problem/D</a></p>
<p>题意:&nbsp;给你一个矩形，起始点在(1,1),在给定坐标有宝物，你要将整个图中的宝物全部拿到，而且你不能向下走（左右随意），而且只有在所给出的列上你才能向上走，问最少要走多少格</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">#define</span> IOS ios_base::sync_with_stdio(0); cin.tie(0);<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #008000;">//</span><span style="color: #008000;">sprintf islower isupper</span>
#include &lt;cstdlib&gt;<span style="color: #008000;">//</span><span style="color: #008000;">malloc  exit strcat itoa system("cls")</span>
#include &lt;iostream&gt;<span style="color: #008000;">//</span><span style="color: #008000;">pair</span>
#include &lt;fstream&gt;<span style="color: #000000;">
#include </span>&lt;bitset&gt;
<span style="color: #008000;">//</span><span style="color: #008000;">#include &lt;map&gt;
</span><span style="color: #008000;">//</span><span style="color: #008000;">#include&lt;unordered_map&gt;  </span><span style="color: #008000; text-decoration: underline;">https://codeforc.es/contest/1201/problem/D</span>
#include &lt;vector&gt;<span style="color: #000000;">
#include </span>&lt;stack&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">set</span>&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>.h&gt;<span style="color: #008000;">//</span><span style="color: #008000;">strstr substr</span>
#include &lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;time.h&gt;<span style="color: #008000;">//</span><span style="color: #008000;">srand(((unsigned)time(NULL))); Seed n=rand()%10 - 0~9;</span>
#include &lt;cmath&gt;<span style="color: #000000;">
#include </span>&lt;deque&gt;<span style="color: #000000;">
#include </span>&lt;queue&gt;<span style="color: #008000;">//</span><span style="color: #008000;">priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; q;</span><span style="color: #008000;">//</span><span style="color: #008000;">less</span>
#include &lt;vector&gt;<span style="color: #008000;">//</span><span style="color: #008000;">emplace_back
</span><span style="color: #008000;">//</span><span style="color: #008000;">#include &lt;math.h&gt;
</span><span style="color: #008000;">//</span><span style="color: #008000;">#include &lt;windows.h&gt;</span><span style="color: #008000;">//</span><span style="color: #008000;">reverse(a,a+len);</span><span style="color: #008000;">//</span><span style="color: #008000;"> ~ ! ~ ! floor</span>
#include &lt;algorithm&gt;<span style="color: #008000;">//</span><span style="color: #008000;">sort + unique : sz=unique(b+1,b+n+1)-(b+1);+nth_element(first, nth, last, compare)</span>
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<span style="color: #008000;">//</span><span style="color: #008000;">next_permutation(a+1,a+1+n);</span><span style="color: #008000;">//</span><span style="color: #008000;">prev_permutation</span>
<span style="color: #0000ff;">#define</span> fo(a,b,c) for(register int a=b;a&lt;=c;++a)
<span style="color: #0000ff;">#define</span> fr(a,b,c) for(register int a=b;a&gt;=c;--a)
<span style="color: #0000ff;">#define</span> mem(a,b) memset(a,b,sizeof(a))
<span style="color: #0000ff;">#define</span> pr printf
<span style="color: #0000ff;">#define</span> sc scanf
<span style="color: #0000ff;">void</span> swapp(<span style="color: #0000ff;">int</span> &amp;a,<span style="color: #0000ff;">int</span> &amp;<span style="color: #000000;">b);
</span><span style="color: #0000ff;">double</span> fabss(<span style="color: #0000ff;">double</span><span style="color: #000000;"> a);
</span><span style="color: #0000ff;">int</span> maxx(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">int</span> minn(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">int</span> Del_bit_1(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n);
</span><span style="color: #0000ff;">int</span> lowbit(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n);
</span><span style="color: #0000ff;">int</span> abss(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a);
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> INF=(1LL&lt;&lt;<span style="color: #800080;">60</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">double</span> E=<span style="color: #800080;">2.718281828</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">double</span> PI=acos(-<span style="color: #800080;">1.0</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> inf=(<span style="color: #800080;">1</span>&lt;&lt;<span style="color: #800080;">29</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">double</span> ESP=1e-<span style="color: #800080;">9</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> mod=(<span style="color: #0000ff;">int</span>)1e9+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=(<span style="color: #0000ff;">int</span>)2e5+<span style="color: #800080;">10</span><span style="color: #000000;">;

</span><span style="color: #0000ff;">int</span> dis(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> abss(a-<span style="color: #000000;">b);
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> L[N],R[N],LV[N],RV[N];
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> node
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x,y;
    friend </span><span style="color: #0000ff;">bool</span> <span style="color: #0000ff;">operator</span>&lt;<span style="color: #000000;">(node a,node b)
    {
        </span><span style="color: #0000ff;">if</span>(a.y==<span style="color: #000000;">b.y)
            </span><span style="color: #0000ff;">return</span> a.x&lt;<span style="color: #000000;">b.x;
        </span><span style="color: #0000ff;">return</span> a.y&lt;<span style="color: #000000;">b.y;
    }
}_[N];
</span><span style="color: #0000ff;">int</span> <span style="color: #0000ff;">is</span><span style="color: #000000;">[N];

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span> n,m,k,q,n_=<span style="color: #800080;">0</span><span style="color: #000000;">;
    sc(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;m,&amp;k,&amp;<span style="color: #000000;">q);
    fo(i,</span><span style="color: #800080;">1</span>,k)sc(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;_[i].y,&amp;_[i].x);<span style="color: #008000;">//</span><span style="color: #008000;">题目中取完一行只可能停留在头和尾</span>
    sort(_+<span style="color: #800080;">1</span>,_+<span style="color: #800080;">1</span>+k);                    <span style="color: #008000;">//</span><span style="color: #008000;">下一行进行转移就行了</span>
    fo(i,<span style="color: #800080;">1</span><span style="color: #000000;">,k)
    {
        </span><span style="color: #0000ff;">int</span> tx=_[i].x,ty=<span style="color: #000000;">_[i].y;
        n_</span>=<span style="color: #000000;">maxx(n_,ty);
        </span><span style="color: #0000ff;">if</span>(!LV[ty])LV[ty]=tx;        <span style="color: #008000;">//</span><span style="color: #008000;">预处理</span>
        <span style="color: #0000ff;">else</span> LV[ty]=minn(tx,LV[ty]);<span style="color: #008000;">//</span><span style="color: #008000;">宝藏的最左</span>
        <span style="color: #0000ff;">if</span>(!RV[ty])RV[ty]=<span style="color: #000000;">tx;
        </span><span style="color: #0000ff;">else</span> RV[ty]=maxx(tx,RV[ty]);<span style="color: #008000;">//</span><span style="color: #008000;">宝藏的最右</span>
<span style="color: #000000;">    }
    fo(i,</span><span style="color: #800080;">1</span>,q)sc(<span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>,&amp;<span style="color: #0000ff;">is</span>[i]),L[<span style="color: #0000ff;">is</span>[i]]=R[<span style="color: #0000ff;">is</span>[i]]=<span style="color: #0000ff;">is</span><span style="color: #000000;">[i];
    sort(</span><span style="color: #0000ff;">is</span>+<span style="color: #800080;">1</span>,<span style="color: #0000ff;">is</span>+<span style="color: #800080;">1</span>+q);              <span style="color: #008000;">//</span><span style="color: #008000;">预处理</span>
    fo(i,<span style="color: #800080;">1</span>,m)<span style="color: #0000ff;">if</span>(!L[i])L[i]=L[i-<span style="color: #800080;">1</span>];<span style="color: #008000;">//</span><span style="color: #008000;">左邻近的安全列</span>
    fr(i,m,<span style="color: #800080;">1</span>)<span style="color: #0000ff;">if</span>(!R[i])R[i]=R[i+<span style="color: #800080;">1</span>];<span style="color: #008000;">//</span><span style="color: #008000;">右邻近的安全列</span>
    <span style="color: #0000ff;">int</span> posl=<span style="color: #800080;">1</span>,posr=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> ans=<span style="color: #800080;">0</span>,preresl=<span style="color: #800080;">0</span>,preresr=<span style="color: #800080;">0</span><span style="color: #000000;">;
    fo(i,</span><span style="color: #800080;">1</span><span style="color: #000000;">,n_)
    {
        </span><span style="color: #0000ff;">if</span>(i==<span style="color: #800080;">1</span><span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(RV[i])
                ans</span>=dis(posl,RV[i]),posl=posr=<span style="color: #000000;">RV[i];
            preresl</span>=preresr=<span style="color: #000000;">ans;
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            preresl</span>++;preresr++;<span style="color: #008000;">//</span><span style="color: #008000;">除了第一行其他只要上升了,用于转移的左右停留状态都要+1;</span>
            <span style="color: #0000ff;">if</span>(LV[i]==<span style="color: #800080;">0</span>&amp;&amp;RV[i]==<span style="color: #800080;">0</span><span style="color: #000000;">)
                </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> resl=INF,resr=<span style="color: #000000;">INF;
            </span><span style="color: #0000ff;">if</span>(L[posl])resl=min(resl,preresl+dis(posl,L[posl])+dis(L[posl],RV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(R[posl])resl=min(resl,preresl+dis(posl,R[posl])+dis(R[posl],RV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(L[posr])resl=min(resl,preresr+dis(posr,L[posr])+dis(L[posr],RV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(R[posr])resl=min(resl,preresr+dis(posr,R[posr])+dis(R[posr],RV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #008000;">//</span><span style="color: #008000;">进行转移;</span>
            <span style="color: #0000ff;">if</span>(L[posl])resr=min(resr,preresl+dis(posl,L[posl])+dis(L[posl],LV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(R[posl])resr=min(resr,preresl+dis(posl,R[posl])+dis(R[posl],LV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(L[posr])resr=min(resr,preresr+dis(posr,L[posr])+dis(L[posr],LV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            </span><span style="color: #0000ff;">if</span>(R[posr])resr=min(resr,preresr+dis(posr,R[posr])+dis(R[posr],LV[i])+<span style="color: #000000;">dis(RV[i],LV[i]));
            ans</span>=<span style="color: #000000;">min(resl,resr);
            preresl</span>=<span style="color: #000000;">resl;
            preresr</span>=<span style="color: #000000;">resr;
            posl</span>=<span style="color: #000000;">LV[i];
            posr</span>=<span style="color: #000000;">RV[i];
        }
    }
    pr(</span><span style="color: #800000;">"</span><span style="color: #800000;">%lld\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,ans);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}

</span><span style="color: #008000;">/*</span><span style="color: #008000;">************************************************************************************</span><span style="color: #008000;">*/</span>

<span style="color: #0000ff;">int</span> maxx(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a&gt;b?<span style="color: #000000;">a:b;
}

</span><span style="color: #0000ff;">void</span> swapp(<span style="color: #0000ff;">int</span> &amp;a,<span style="color: #0000ff;">int</span> &amp;<span style="color: #000000;">b)
{
    a</span>^=b^=a^=<span style="color: #000000;">b;
}

</span><span style="color: #0000ff;">int</span> lowbit(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">return</span> n&amp;(-<span style="color: #000000;">n);
}

</span><span style="color: #0000ff;">int</span> Del_bit_1(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">return</span> n&amp;(n-<span style="color: #800080;">1</span><span style="color: #000000;">);
}

</span><span style="color: #0000ff;">int</span> abss(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a)
{
    </span><span style="color: #0000ff;">return</span> a&gt;<span style="color: #800080;">0</span>?a:-<span style="color: #000000;">a;
}

</span><span style="color: #0000ff;">double</span> fabss(<span style="color: #0000ff;">double</span><span style="color: #000000;"> a)
{
    </span><span style="color: #0000ff;">return</span> a&gt;<span style="color: #800080;">0</span>?a:-<span style="color: #000000;">a;
}

</span><span style="color: #0000ff;">int</span> minn(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a&lt;b?<span style="color: #000000;">a:b;
}</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>