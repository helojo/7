<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）</center></div><div class='banquan'>原文出处:本文由博客园博主Yuuki丶提供。<br/>
原文连接:https://www.cnblogs.com/Yuuki-/p/10647112.html</div><br>
    <p>&nbsp;<span style="font-family: 宋体; font-size: 18px;">/***************************项目 2048**********************</span><br /><span style="font-family: 宋体; font-size: 18px;">c语言编写 图形库制作</span><br /><span style="font-family: 宋体; font-size: 18px;">时间：2019.04.03</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">准备工具： vs2013 图形库 ico素材（作为exe的图标） 背景图（jpg格式）</span><br /><span style="font-family: 宋体; font-size: 18px;">知识点： 循环 数组 函数 随机数</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">项目步骤分析：</span><br /><span style="font-family: 宋体; font-size: 18px;">2048  通过方向键 WASD控制方向合并相同数字直到生成2048 游戏结束</span><br /><span style="font-family: 宋体; font-size: 18px;">1、4X4的棋盘 存放数字 ----&gt;数组  游戏操作 ----&gt;键盘操作 界面 ----&gt;需要操作结果</span></p>
<p><br /><span style="font-family: 宋体; font-size: 18px;">2、步骤 </span><br /><span style="font-family: 宋体; font-size: 18px;">a、准备数组 生成两个隋杰的位置和随机的数字（2或4）  //初始化操作</span><br /><span style="font-family: 宋体; font-size: 18px;">b、等待用户输入  根据上下左右处理数组</span><br /><span style="font-family: 宋体; font-size: 18px;">//添加一个判断输赢e</span><br /><span style="font-family: 宋体; font-size: 18px;">c、生成新的随机位置 和新的数字（2或4）</span><br /><span style="font-family: 宋体; font-size: 18px;">d、打印界面 当前输出结果 等待下一轮输入</span><br /><span style="font-family: 宋体; font-size: 18px;">e、输赢条件 输--&gt;数组满，不能移动 赢--&gt;出现2048，游戏就赢了</span></p>
<p><br /><span style="font-family: 宋体; font-size: 18px;">3、拆分函数 如果同一个功能或者相似的功能可以写成一个函数，减少代码量和难点</span><br /><span style="font-family: 宋体; font-size: 18px;">a  初始化</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">函数声明：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">void init(int map[][4]);&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">函数定义：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">void init(int map[][4])</span><br /><span style="font-family: 宋体; font-size: 18px;">{</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">	rand();</span><br /><span style="font-family: 宋体; font-size: 18px;">	int x, y;</span><br /><span style="font-family: 宋体; font-size: 18px;">	for (int i = 0; i &lt; 2;)</span><br /><span style="font-family: 宋体; font-size: 18px;">	{</span><br /><span style="font-family: 宋体; font-size: 18px;">		x = rand() % 4;&nbsp;</span><br /><span style="font-family: 宋体; font-size: 18px;">		y = rand() % 4;</span><br /><span style="font-family: 宋体; font-size: 18px;">		if (map[x][y] == 0)&nbsp;</span><br /><span style="font-family: 宋体; font-size: 18px;">		{</span><br /><span style="font-family: 宋体; font-size: 18px;">			map[x][y] = rand()%2*2+2;&nbsp;</span><br /><span style="font-family: 宋体; font-size: 18px;">		}</span><br /><span style="font-family: 宋体; font-size: 18px;">	}</span><br /><span style="font-family: 宋体; font-size: 18px;">}</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">在主函数中测试效果：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">int main()</span><br /><span style="font-family: 宋体; font-size: 18px;">{</span><br /><span style="font-family: 宋体; font-size: 18px;">	int map[4][4];</span><br /><span style="font-family: 宋体; font-size: 18px;">	init(map);&nbsp;</span><br /><span style="font-family: 宋体; font-size: 18px;">	for (int i = 0; i &lt; 4; ++i)</span><br /><span style="font-family: 宋体; font-size: 18px;">	{</span><br /><span style="font-family: 宋体; font-size: 18px;">		for (int j = 0; j &lt; 4; ++j)</span><br /><span style="font-family: 宋体; font-size: 18px;">		{</span><br /><span style="font-family: 宋体; font-size: 18px;">			printf("%d\t", map[i][j]);</span><br /><span style="font-family: 宋体; font-size: 18px;">		}</span><br /><span style="font-family: 宋体; font-size: 18px;">		printf("%\n");</span><br /><span style="font-family: 宋体; font-size: 18px;">	}</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">	getchar();</span><br /><span style="font-family: 宋体; font-size: 18px;">	return 0;</span><br /><span style="font-family: 宋体; font-size: 18px;">}</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">效果如图所示：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）0.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">b  等待用户输入操作  随机位置 </span></p>
<p><span style="font-family: 宋体; font-size: 18px;">用switch进行键盘消息判断</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">各方向键的代码比对如下：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）1.png" alt="" />&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）2.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）3.png" alt="" />&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）4.png" alt="" />&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">也可以用枚举法定义方向键并对其进行消息的判断</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）5.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">对比如下：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）6.png" alt="" />&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）7.png" alt="" />&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）8.png" alt="" />&nbsp;<img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）9.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">c  判断输赢</span></p>
<p><br /><span style="font-family: 宋体; font-size: 18px;">d  打印结果 显示地图</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">打印地图的函数：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）10.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">暂时测试结果如下：</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）11.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&nbsp;</span></p>
<p><br /><span style="font-family: 宋体; font-size: 18px;">目的：</span><br /><span style="font-family: 宋体; font-size: 18px;">复习 总结 综合运用</span><br /><span style="font-family: 宋体; font-size: 18px;">***************************项目 2048**********************/</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体; font-size: 18px;">测试代码笔记如下：</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #008000;">//</span><span style="color: #008000;">**************************头文件部分*********************
</span><span style="color: #008080;">  2</span> <span style="color: #008000;">//</span><span style="color: #008000;">头文件 宏定义 类型定义 全局变量
</span><span style="color: #008080;">  3</span> 
<span style="color: #008080;">  4</span> <span style="color: #008000;">//</span><span style="color: #008000;">头文件</span>
<span style="color: #008080;">  5</span> #include&lt;stdio.h&gt;
<span style="color: #008080;">  6</span> #include&lt;memory.h&gt;  <span style="color: #008000;">//</span><span style="color: #008000;">memset的头文件 或者string.h</span>
<span style="color: #008080;">  7</span> #include&lt;stdlib.h&gt;  <span style="color: #008000;">//</span><span style="color: #008000;">srand函数  rand函数</span>
<span style="color: #008080;">  8</span> #include&lt;time.h&gt;  <span style="color: #008000;">//</span><span style="color: #008000;">time函数</span>
<span style="color: #008080;">  9</span> #include&lt;conio.h&gt;  <span style="color: #008000;">//</span><span style="color: #008000;">getch函数</span>
<span style="color: #008080;"> 10</span> #include&lt;graphics.h&gt;  <span style="color: #008000;">//</span><span style="color: #008000;">图形库
</span><span style="color: #008080;"> 11</span> <span style="color: #008000;">//</span><span style="color: #008000;">#define COLOR1 RGB(238,106,80)
</span><span style="color: #008080;"> 12</span> <span style="color: #008000;">//</span><span style="color: #008000;">#define COLOR2 RGB(238,169,184)
</span><span style="color: #008080;"> 13</span> <span style="color: #008000;">//</span><span style="color: #008000;">#define COLOR3 RGB(131,139,131)
</span><span style="color: #008080;"> 14</span> <span style="color: #008000;">//</span><span style="color: #008000;">#define COLOR4 RGB(193,205,205)
</span><span style="color: #008080;"> 15</span> 
<span style="color: #008080;"> 16</span> <span style="color: #008000;">//</span><span style="color: #008000;">类型定义 枚举</span>
<span style="color: #008080;"> 17</span> <span style="color: #0000ff;">enum</span><span style="color: #000000;"> dir
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 19</span>     UP = <span style="color: #800080;">72</span>, DOWN = <span style="color: #800080;">80</span>, LEFT = <span style="color: #800080;">75</span>, RIGHT = <span style="color: #800080;">77</span>
<span style="color: #008080;"> 20</span> };  <span style="color: #008000;">//</span><span style="color: #008000;">定义方向键</span>
<span style="color: #008080;"> 21</span> 
<span style="color: #008080;"> 22</span> IMAGE img;<span style="color: #008000;">//</span><span style="color: #008000;">存放图片变量
</span><span style="color: #008080;"> 23</span> 
<span style="color: #008080;"> 24</span> <span style="color: #008000;">//</span><span style="color: #008000;">**************************函数声明***********************
</span><span style="color: #008080;"> 25</span> <span style="color: #008000;">//</span><span style="color: #008000;">写个函数的声明</span>
<span style="color: #008080;"> 26</span> <span style="color: #0000ff;">void</span> init(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>]);  <span style="color: #008000;">//</span><span style="color: #008000;">用函数给数组赋值初始化</span>
<span style="color: #008080;"> 27</span> 
<span style="color: #008080;"> 28</span> <span style="color: #0000ff;">void</span> play(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>]);  <span style="color: #008000;">//</span><span style="color: #008000;">处理用户输入</span>
<span style="color: #008080;"> 29</span> 
<span style="color: #008080;"> 30</span> <span style="color: #0000ff;">void</span> drawMap(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>]);  <span style="color: #008000;">//</span><span style="color: #008000;">打印 画图</span>
<span style="color: #008080;"> 31</span> 
<span style="color: #008080;"> 32</span> <span style="color: #0000ff;">void</span> newNum(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>]);  <span style="color: #008000;">//</span><span style="color: #008000;">随机一个新元素</span>
<span style="color: #008080;"> 33</span> 
<span style="color: #008080;"> 34</span> <span style="color: #0000ff;">int</span> isGameOver(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>]);<span style="color: #008000;">//</span><span style="color: #008000;">判断游戏是否结束的一个函数
</span><span style="color: #008080;"> 35</span> 
<span style="color: #008080;"> 36</span> <span style="color: #008000;">//</span><span style="color: #008000;">**************************主函数*************************
</span><span style="color: #008080;"> 37</span> <span style="color: #008000;">//</span><span style="color: #008000;">main函数</span>
<span style="color: #008080;"> 38</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 40</span>     <span style="color: #0000ff;">int</span> map[<span style="color: #800080;">4</span>][<span style="color: #800080;">4</span>];  <span style="color: #008000;">//</span><span style="color: #008000;">准备数组 大小4X4的地图</span>
<span style="color: #008080;"> 41</span>     init(map);  <span style="color: #008000;">//</span><span style="color: #008000;">传参（实参） 传的是数组名</span>
<span style="color: #008080;"> 42</span>     
<span style="color: #008080;"> 43</span>     <span style="color: #0000ff;">while</span> (<span style="color: #800080;">1</span>)  <span style="color: #008000;">//</span><span style="color: #008000;">死循环</span>
<span style="color: #008080;"> 44</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">        drawMap(map);
</span><span style="color: #008080;"> 46</span> <span style="color: #000000;">        play(map);
</span><span style="color: #008080;"> 47</span>         <span style="color: #008000;">//</span><span style="color: #008000;">system("cls");  </span><span style="color: #008000;">//</span><span style="color: #008000;">清屏函数 用于控制台
</span><span style="color: #008080;"> 48</span>         <span style="color: #008000;">//</span><span style="color: #008000;">newNum(map);</span>
<span style="color: #008080;"> 49</span>         <span style="color: #0000ff;">if</span> (isGameOver(map) != <span style="color: #800080;">0</span>)  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">结束循环</span>
<span style="color: #008080;"> 50</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 51</span> 
<span style="color: #008080;"> 52</span>     <span style="color: #0000ff;">if</span> (isGameOver(map) == <span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 54</span>         <span style="color: #008000;">//</span><span style="color: #008000;">赢得游戏</span>
<span style="color: #008080;"> 55</span> <span style="color: #000000;">        drawMap(map);
</span><span style="color: #008080;"> 56</span>         <span style="color: #008000;">//</span><span style="color: #008000;">printf("赢得游戏\n");</span>
<span style="color: #008080;"> 57</span>         MessageBox(GetHWnd(), L<span style="color: #800000;">"</span><span style="color: #800000;">OK</span><span style="color: #800000;">"</span>, L<span style="color: #800000;">"</span><span style="color: #800000;">WIN</span><span style="color: #800000;">"</span><span style="color: #000000;">, MB_OK);
</span><span style="color: #008080;"> 58</span>         <span style="color: #008000;">//</span><span style="color: #008000;">第一个 是窗口句柄  表示显示在这个窗口前面   可以写NULL 或者0
</span><span style="color: #008080;"> 59</span>         <span style="color: #008000;">//</span><span style="color: #008000;">第二个参数 是文本框内容
</span><span style="color: #008080;"> 60</span>         <span style="color: #008000;">//</span><span style="color: #008000;">第三次参数 窗口标题
</span><span style="color: #008080;"> 61</span>         <span style="color: #008000;">//</span><span style="color: #008000;">最后一个参数是按钮形式</span>
<span style="color: #008080;"> 62</span>         
<span style="color: #008080;"> 63</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 64</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;"> 65</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 66</span>         <span style="color: #008000;">//</span><span style="color: #008000;">输了游戏</span>
<span style="color: #008080;"> 67</span> <span style="color: #000000;">        drawMap(map);
</span><span style="color: #008080;"> 68</span>         <span style="color: #008000;">//</span><span style="color: #008000;">printf("输了游戏\n");</span>
<span style="color: #008080;"> 69</span>         MessageBox(GetHWnd(), L<span style="color: #800000;">"</span><span style="color: #800000;">OOPS</span><span style="color: #800000;">"</span>, L<span style="color: #800000;">"</span><span style="color: #800000;">LOSE</span><span style="color: #800000;">"</span><span style="color: #000000;">, MB_OK);
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 71</span> 
<span style="color: #008080;"> 72</span>     <span style="color: #008000;">//</span><span style="color: #008000;">getchar();</span>
<span style="color: #008080;"> 73</span>     closegraph();<span style="color: #008000;">//</span><span style="color: #008000;">关闭窗口</span>
<span style="color: #008080;"> 74</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 76</span> 
<span style="color: #008080;"> 77</span> <span style="color: #008000;">//</span><span style="color: #008000;">**************************函数定义************************
</span><span style="color: #008080;"> 78</span> <span style="color: #008000;">//</span><span style="color: #008000;">上述函数的定义放在这里
</span><span style="color: #008080;"> 79</span> 
<span style="color: #008080;"> 80</span> <span style="color: #008000;">//</span><span style="color: #008000;">给数组赋值 初始化</span>
<span style="color: #008080;"> 81</span> <span style="color: #0000ff;">void</span> init(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span>])  <span style="color: #008000;">//</span><span style="color: #008000;">int (*map[4])（形参）  是数组指针 两种形式都可以</span>
<span style="color: #008080;"> 82</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 83</span>     <span style="color: #008000;">//</span><span style="color: #008000;">给数组赋值 第一种方式用循环
</span><span style="color: #008080;"> 84</span>     <span style="color: #008000;">//</span><span style="color: #008000;">for (int i = 0; i &lt; 4; ++i)  </span><span style="color: #008000;">//</span><span style="color: #008000;">数组用 下标进行循环
</span><span style="color: #008080;"> 85</span>     <span style="color: #008000;">//</span><span style="color: #008000;">{
</span><span style="color: #008080;"> 86</span>     <span style="color: #008000;">//</span><span style="color: #008000;">    for (int j = 0; j &lt; 4; ++j)
</span><span style="color: #008080;"> 87</span>     <span style="color: #008000;">//</span><span style="color: #008000;">    {
</span><span style="color: #008080;"> 88</span>     <span style="color: #008000;">//</span><span style="color: #008000;">        map[i][j] = 0;  </span><span style="color: #008000;">//</span><span style="color: #008000;">刚开始全部赋值为0
</span><span style="color: #008080;"> 89</span>     <span style="color: #008000;">//</span><span style="color: #008000;">    }
</span><span style="color: #008080;"> 90</span>     <span style="color: #008000;">//</span><span style="color: #008000;">}
</span><span style="color: #008080;"> 91</span> 
<span style="color: #008080;"> 92</span>     <span style="color: #008000;">//</span><span style="color: #008000;">第二种方式用函数 memset 初始化一块内存  头文件是stdlib,h</span>
<span style="color: #008080;"> 93</span>     memset(map, <span style="color: #800080;">0</span>, <span style="color: #0000ff;">sizeof</span>(<span style="color: #0000ff;">int</span>)* <span style="color: #800080;">4</span> * <span style="color: #800080;">4</span>); <span style="color: #008000;">//</span><span style="color: #008000;">三个参数 内存首地址 初值 字节大小
</span><span style="color: #008080;"> 94</span>     <span style="color: #008000;">//</span><span style="color: #008000;">随机两个2和4  null用于指针 随机数 借用两个函数srand  rand ---&gt;头文件stlib.h  还需要一个函数 time（时间函数）---&gt;头文件time.h</span>
<span style="color: #008080;"> 95</span>     srand((unsigned)time(NULL));  <span style="color: #008000;">//</span><span style="color: #008000;">设置随机数种子  不要写在循环里面 设置一次就够了
</span><span style="color: #008080;"> 96</span>     <span style="color: #008000;">//</span><span style="color: #008000;">得到某个范围内的随机数 用求余控制范围  0--&gt;100之间 int x=rand()%101； 66--&gt;100之间 --&gt;66+（0--&gt;43）  rand()%35+66
</span><span style="color: #008080;"> 97</span>     <span style="color: #008000;">//</span><span style="color: #008000;">得到随机位置</span>
<span style="color: #008080;"> 98</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;
</span><span style="color: #008080;"> 99</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">2</span><span style="color: #000000;">;)
</span><span style="color: #008080;">100</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">101</span>         x = rand() % <span style="color: #800080;">4</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">下标3至3  所以对4求余</span>
<span style="color: #008080;">102</span>         y = rand() % <span style="color: #800080;">4</span><span style="color: #000000;">;
</span><span style="color: #008080;">103</span>         <span style="color: #0000ff;">if</span> (map[x][y] == <span style="color: #800080;">0</span>)  <span style="color: #008000;">//</span><span style="color: #008000;">这个位置没有元素</span>
<span style="color: #008080;">104</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">105</span>             map[x][y] = rand()%<span style="color: #800080;">2</span>*<span style="color: #800080;">2</span>+<span style="color: #800080;">2</span>; <span style="color: #008000;">//</span><span style="color: #008000;">2或4 2=1*2   4=2*2</span>
<span style="color: #008080;">106</span>             i++;  <span style="color: #008000;">//</span><span style="color: #008000;">赋值之后才算一次</span>
<span style="color: #008080;">107</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">108</span>         <span style="color: #008000;">//</span><span style="color: #008000;">++i放上面 只能确保循环两次 不能确保赋值两次 所以放下面</span>
<span style="color: #008080;">109</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">110</span> <span style="color: #000000;">}
</span><span style="color: #008080;">111</span> 
<span style="color: #008080;">112</span> <span style="color: #008000;">//</span><span style="color: #008000;">处理用户输入</span>
<span style="color: #008080;">113</span> <span style="color: #0000ff;">void</span> play(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span><span style="color: #000000;">])
</span><span style="color: #008080;">114</span> <span style="color: #000000;">{
</span><span style="color: #008080;">115</span>     <span style="color: #008000;">//</span><span style="color: #008000;">方式 键盘操作
</span><span style="color: #008080;">116</span>     <span style="color: #008000;">//</span><span style="color: #008000;">getch  读取键盘中的一个字符 conio.h
</span><span style="color: #008080;">117</span>     <span style="color: #008000;">//</span><span style="color: #008000;">kbhit  conio.h  检测当前是否有键盘消息
</span><span style="color: #008080;">118</span>     <span style="color: #008000;">//</span><span style="color: #008000;">dir di;  </span><span style="color: #008000;">//</span><span style="color: #008000;">枚举变量</span>
<span style="color: #008080;">119</span>     <span style="color: #0000ff;">switch</span> (getch())  <span style="color: #008000;">//</span><span style="color: #008000;">判断键盘消息</span>
<span style="color: #008080;">120</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">121</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span><span style="color: #000000;">:
</span><span style="color: #008080;">122</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">W</span><span style="color: #800000;">'</span>:<span style="color: #008000;">//</span><span style="color: #008000;">往上</span>
<span style="color: #008080;">123</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++j)  <span style="color: #008000;">//</span><span style="color: #008000;">四列</span>
<span style="color: #008080;">124</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">125</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">3</span>; ++i)  <span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的合并</span>
<span style="color: #008080;">126</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">127</span>                 <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>) <span style="color: #008000;">//</span><span style="color: #008000;">判断是否为0</span>
<span style="color: #008080;">128</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">129</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换过来</span>
<span style="color: #008080;">130</span>                     <span style="color: #0000ff;">int</span> k = i + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">131</span>                     <span style="color: #0000ff;">for</span> (; k &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">k)
</span><span style="color: #008080;">132</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">133</span>                         <span style="color: #0000ff;">if</span> (map[k][j] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">134</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">135</span>                             map[i][j] =<span style="color: #000000;"> map[k][j];
</span><span style="color: #008080;">136</span>                             map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">137</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">138</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">139</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">140</span>                     <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">4</span>)<span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0</span>
<span style="color: #008080;">141</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">142</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]和后面的元素是否可以合并</span>
<span style="color: #008080;">143</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = i + <span style="color: #800080;">1</span>; k &lt; <span style="color: #800080;">4</span>; ++k)  <span style="color: #008000;">//</span><span style="color: #008000;">判断后面的元素</span>
<span style="color: #008080;">144</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">145</span>                     <span style="color: #0000ff;">if</span> (map[k][j] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">146</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[k][j])
</span><span style="color: #008080;">147</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">148</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">相同 合并</span>
<span style="color: #008080;">149</span>                         map[i][j] *= <span style="color: #800080;">2</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">150</span>                         map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">151</span>                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">152</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">153</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">154</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">155</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">156</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">157</span> <span style="color: #000000;">        newNum(map);
</span><span style="color: #008080;">158</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">159</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">s</span><span style="color: #800000;">'</span><span style="color: #000000;">:
</span><span style="color: #008080;">160</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">S</span><span style="color: #800000;">'</span>:<span style="color: #008000;">//</span><span style="color: #008000;">往下</span>
<span style="color: #008080;">161</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++j)<span style="color: #008000;">//</span><span style="color: #008000;">四列</span>
<span style="color: #008080;">162</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">163</span>             <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并</span>
<span style="color: #008080;">164</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">3</span>; i &gt;<span style="color: #800080;">0</span>; --i)<span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的进行合并</span>
<span style="color: #008080;">165</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">166</span>                 <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]是否为0</span>
<span style="color: #008080;">167</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">168</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换到这个位置</span>
<span style="color: #008080;">169</span>                     <span style="color: #0000ff;">int</span> k = i - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">170</span>                     <span style="color: #0000ff;">for</span> (; k &gt;= <span style="color: #800080;">0</span>; --<span style="color: #000000;">k)
</span><span style="color: #008080;">171</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">172</span>                         <span style="color: #0000ff;">if</span> (map[k][j] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">173</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">174</span>                             map[i][j] =<span style="color: #000000;"> map[k][j];
</span><span style="color: #008080;">175</span>                             map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">176</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">177</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">178</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">179</span>                     <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">0</span>)<span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0  直接找下一行</span>
<span style="color: #008080;">180</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">181</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j] 和后面的元素能否合并</span>
<span style="color: #008080;">182</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = i - <span style="color: #800080;">1</span>; k &gt;= <span style="color: #800080;">0</span>; --k)<span style="color: #008000;">//</span><span style="color: #008000;">判断后面的几个元素</span>
<span style="color: #008080;">183</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">184</span>                     <span style="color: #0000ff;">if</span> (map[k][j] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">185</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[k][j])
</span><span style="color: #008080;">186</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">187</span>                         map[i][j] *= <span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">188</span>                         map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">189</span>                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">190</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">191</span>                     <span style="color: #0000ff;">else</span>  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">192</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">193</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">194</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">195</span> <span style="color: #000000;">        newNum(map);
</span><span style="color: #008080;">196</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">197</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span><span style="color: #000000;">:  
</span><span style="color: #008080;">198</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>:<span style="color: #008000;">//</span><span style="color: #008000;">往左</span>
<span style="color: #008080;">199</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++i)  <span style="color: #008000;">//</span><span style="color: #008000;">四行</span>
<span style="color: #008080;">200</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">201</span>             <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并 从左往右 1、判断第一个元素是不是0，如果是0，就到右边找到第一个不是0的元素，放到为0的位置上 不是0，就进行下一步，（没有找到 说明全是0，那么就直接下一行）
</span><span style="color: #008080;">202</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2、找到剩下的位置中不是0的元素 如果和这个位置的相同的话合并到下一个位置</span>
<span style="color: #008080;">203</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">3</span>; ++j)  <span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的合并</span>
<span style="color: #008080;">204</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">205</span>                 <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>) <span style="color: #008000;">//</span><span style="color: #008000;">判断是否为0</span>
<span style="color: #008080;">206</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">207</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换过来</span>
<span style="color: #008080;">208</span>                     <span style="color: #0000ff;">int</span> k = j + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">209</span>                     <span style="color: #0000ff;">for</span> (; k &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">k)
</span><span style="color: #008080;">210</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">211</span>                         <span style="color: #0000ff;">if</span> (map[i][k] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">212</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">213</span>                             map[i][j] =<span style="color: #000000;"> map[i][k];
</span><span style="color: #008080;">214</span>                             map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">215</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">216</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">217</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">218</span>                     <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">4</span>)<span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0</span>
<span style="color: #008080;">219</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">220</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]和后面的元素是否可以合并</span>
<span style="color: #008080;">221</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = j + <span style="color: #800080;">1</span>; k &lt; <span style="color: #800080;">4</span>; ++k)  <span style="color: #008000;">//</span><span style="color: #008000;">判断后面的元素</span>
<span style="color: #008080;">222</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">223</span>                     <span style="color: #0000ff;">if</span> (map[i][k] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;  
</span><span style="color: #008080;">224</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[i][k])
</span><span style="color: #008080;">225</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">226</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">相同 合并</span>
<span style="color: #008080;">227</span>                         map[i][j] *= <span style="color: #800080;">2</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">228</span>                         map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">229</span>                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">230</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">231</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">232</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">233</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">234</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">235</span> <span style="color: #000000;">        newNum(map);
</span><span style="color: #008080;">236</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">237</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">d</span><span style="color: #800000;">'</span><span style="color: #000000;">:  
</span><span style="color: #008080;">238</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">'</span><span style="color: #800000;">D</span><span style="color: #800000;">'</span>:<span style="color: #008000;">//</span><span style="color: #008000;">往右</span>
<span style="color: #008080;">239</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++i) <span style="color: #008000;">//</span><span style="color: #008000;">四行</span>
<span style="color: #008080;">240</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">241</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">3</span>; j &gt;<span style="color: #800080;">0</span>; --j)  <span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的合并</span>
<span style="color: #008080;">242</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">243</span>                 <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>) <span style="color: #008000;">//</span><span style="color: #008000;">判断是否为0</span>
<span style="color: #008080;">244</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">245</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换过来</span>
<span style="color: #008080;">246</span>                     <span style="color: #0000ff;">int</span> k = j - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">247</span>                     <span style="color: #0000ff;">for</span> (; k &gt;=<span style="color: #800080;">0</span>; --<span style="color: #000000;">k)
</span><span style="color: #008080;">248</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">249</span>                         <span style="color: #0000ff;">if</span> (map[i][k] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">250</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">251</span>                             map[i][j] =<span style="color: #000000;"> map[i][k];
</span><span style="color: #008080;">252</span>                             map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">253</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">254</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">255</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">256</span>                     <span style="color: #0000ff;">if</span> (k == -<span style="color: #800080;">1</span>)<span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0</span>
<span style="color: #008080;">257</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">258</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]和后面的元素是否可以合并</span>
<span style="color: #008080;">259</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = j - <span style="color: #800080;">1</span>; k &gt;=<span style="color: #800080;">0</span>; --k)  <span style="color: #008000;">//</span><span style="color: #008000;">判断后面的元素</span>
<span style="color: #008080;">260</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">261</span>                     <span style="color: #0000ff;">if</span> (map[i][k] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">262</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[i][k])
</span><span style="color: #008080;">263</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">264</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">相同 合并</span>
<span style="color: #008080;">265</span>                         map[i][j] *= <span style="color: #800080;">2</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">266</span>                         map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">267</span>                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">268</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">269</span>                     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">break</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">270</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">271</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">272</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">273</span> <span style="color: #000000;">        newNum(map);
</span><span style="color: #008080;">274</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">275</span>     <span style="color: #0000ff;">case</span> <span style="color: #800080;">224</span>:  <span style="color: #008000;">//</span><span style="color: #008000;">表示使用方向键  方向键是组合件 用getch视为两个部分</span>
<span style="color: #008080;">276</span>         <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (getch())
</span><span style="color: #008080;">277</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">278</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> UP:
</span><span style="color: #008080;">279</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++j)<span style="color: #008000;">//</span><span style="color: #008000;">四列</span>
<span style="color: #008080;">280</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">281</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并</span>
<span style="color: #008080;">282</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">3</span>; ++i)<span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的进行合并</span>
<span style="color: #008080;">283</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">284</span>                     <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]是否为0</span>
<span style="color: #008080;">285</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">286</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换到这个位置</span>
<span style="color: #008080;">287</span>                         <span style="color: #0000ff;">int</span> k = i + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">288</span>                         <span style="color: #0000ff;">for</span> (; k&lt;<span style="color: #800080;">4</span>; ++<span style="color: #000000;">k)
</span><span style="color: #008080;">289</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">290</span>                             <span style="color: #0000ff;">if</span> (map[k][j] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">291</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">292</span>                                 map[i][j] =<span style="color: #000000;"> map[k][j];
</span><span style="color: #008080;">293</span>                                 map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">294</span>                                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">295</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">296</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">297</span>                         <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">4</span>)<span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0  直接找下一行</span>
<span style="color: #008080;">298</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">299</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j] 和后面的元素能否合并</span>
<span style="color: #008080;">300</span>                     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = i + <span style="color: #800080;">1</span>; k &lt; <span style="color: #800080;">4</span>; ++k)<span style="color: #008000;">//</span><span style="color: #008000;">判断后面的几个元素</span>
<span style="color: #008080;">301</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">302</span>                         <span style="color: #0000ff;">if</span> (map[k][j] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">303</span>                         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[k][j])
</span><span style="color: #008080;">304</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">305</span>                             map[i][j] *= <span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">306</span>                             map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">307</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">308</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">309</span>                         <span style="color: #0000ff;">else</span>  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">310</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">311</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">312</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">313</span> <span style="color: #000000;">            newNum(map);
</span><span style="color: #008080;">314</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">315</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> DOWN:
</span><span style="color: #008080;">316</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++j)<span style="color: #008000;">//</span><span style="color: #008000;">四列</span>
<span style="color: #008080;">317</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">318</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并</span>
<span style="color: #008080;">319</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">3</span>; i &gt;<span style="color: #800080;">0</span>; --i)<span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的进行合并</span>
<span style="color: #008080;">320</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">321</span>                     <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]是否为0</span>
<span style="color: #008080;">322</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">323</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换到这个位置</span>
<span style="color: #008080;">324</span>                         <span style="color: #0000ff;">int</span> k = i - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">325</span>                         <span style="color: #0000ff;">for</span> (; k &gt;= <span style="color: #800080;">0</span>; --<span style="color: #000000;">k)
</span><span style="color: #008080;">326</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">327</span>                             <span style="color: #0000ff;">if</span> (map[k][j] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">328</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">329</span>                                 map[i][j] =<span style="color: #000000;"> map[k][j];
</span><span style="color: #008080;">330</span>                                 map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">331</span>                                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">332</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">333</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">334</span>                         <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">0</span>)<span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0  直接找下一行</span>
<span style="color: #008080;">335</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">336</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j] 和后面的元素能否合并</span>
<span style="color: #008080;">337</span>                     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = i - <span style="color: #800080;">1</span>; k &gt;= <span style="color: #800080;">0</span>; --k)<span style="color: #008000;">//</span><span style="color: #008000;">判断后面的几个元素</span>
<span style="color: #008080;">338</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">339</span>                         <span style="color: #0000ff;">if</span> (map[k][j] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">340</span>                         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[k][j])
</span><span style="color: #008080;">341</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">342</span>                             map[i][j] *= <span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">343</span>                             map[k][j] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">344</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">345</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">346</span>                         <span style="color: #0000ff;">else</span>  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">347</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">348</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">349</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">350</span> <span style="color: #000000;">            newNum(map);
</span><span style="color: #008080;">351</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">352</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> LEFT:
</span><span style="color: #008080;">353</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++i)<span style="color: #008000;">//</span><span style="color: #008000;">四行</span>
<span style="color: #008080;">354</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">355</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并</span>
<span style="color: #008080;">356</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">3</span>; ++j)<span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的进行合并</span>
<span style="color: #008080;">357</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">358</span>                     <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]是否为0</span>
<span style="color: #008080;">359</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">360</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换到这个位置</span>
<span style="color: #008080;">361</span>                         <span style="color: #0000ff;">int</span> k = j + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">362</span>                         <span style="color: #0000ff;">for</span> (; k&lt;<span style="color: #800080;">4</span>; ++<span style="color: #000000;">k)
</span><span style="color: #008080;">363</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">364</span>                             <span style="color: #0000ff;">if</span> (map[i][k] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">365</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">366</span>                                 map[i][j] =<span style="color: #000000;"> map[i][k];
</span><span style="color: #008080;">367</span>                                 map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">368</span>                                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">369</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">370</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">371</span>                         <span style="color: #0000ff;">if</span> (k == <span style="color: #800080;">4</span>)<span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0  直接找下一行</span>
<span style="color: #008080;">372</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">373</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j] 和后面的元素能否合并</span>
<span style="color: #008080;">374</span>                     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = j + <span style="color: #800080;">1</span>; k &lt; <span style="color: #800080;">4</span>; ++k)<span style="color: #008000;">//</span><span style="color: #008000;">判断后面的几个元素</span>
<span style="color: #008080;">375</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">376</span>                         <span style="color: #0000ff;">if</span> (map[i][k] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">377</span>                         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[i][k])
</span><span style="color: #008080;">378</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">379</span>                             map[i][j] *= <span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">380</span>                             map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">381</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">382</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">383</span>                         <span style="color: #0000ff;">else</span>  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">384</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">385</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">386</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">387</span> <span style="color: #000000;">            newNum(map);
</span><span style="color: #008080;">388</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">389</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> RIGHT:
</span><span style="color: #008080;">390</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++i)<span style="color: #008000;">//</span><span style="color: #008000;">四行</span>
<span style="color: #008080;">391</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">392</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">每一行进行合并</span>
<span style="color: #008080;">393</span>                 <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">3</span>; j &gt;<span style="color: #800080;">0</span>; --j)<span style="color: #008000;">//</span><span style="color: #008000;">判断前三个能否和后面的进行合并</span>
<span style="color: #008080;">394</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">395</span>                     <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j]是否为0</span>
<span style="color: #008080;">396</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">397</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">到后面找一个不是0的元素 换到这个位置</span>
<span style="color: #008080;">398</span>                         <span style="color: #0000ff;">int</span> k = j - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">399</span>                         <span style="color: #0000ff;">for</span> (; k &gt;= <span style="color: #800080;">0</span>; --<span style="color: #000000;">k)
</span><span style="color: #008080;">400</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">401</span>                             <span style="color: #0000ff;">if</span> (map[i][k] != <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">402</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">403</span>                                 map[i][j] =<span style="color: #000000;"> map[i][k];
</span><span style="color: #008080;">404</span>                                 map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">405</span>                                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">406</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">407</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">408</span>                         <span style="color: #0000ff;">if</span> (k == -<span style="color: #800080;">1</span>)<span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">表明这一行全是0  直接找下一行</span>
<span style="color: #008080;">409</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">410</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">判断map[i][j] 和后面的元素能否合并</span>
<span style="color: #008080;">411</span>                     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = j - <span style="color: #800080;">1</span>; k &gt;= <span style="color: #800080;">0</span>; --k)<span style="color: #008000;">//</span><span style="color: #008000;">判断后面的几个元素</span>
<span style="color: #008080;">412</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">413</span>                         <span style="color: #0000ff;">if</span> (map[i][k] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">414</span>                         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (map[i][j] ==<span style="color: #000000;"> map[i][k])
</span><span style="color: #008080;">415</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">416</span>                             map[i][j] *= <span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">合并</span>
<span style="color: #008080;">417</span>                             map[i][k] = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">418</span>                             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">419</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">420</span>                         <span style="color: #0000ff;">else</span>  <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">不相等 往后找 退出</span>
<span style="color: #008080;">421</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">422</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">423</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">424</span> <span style="color: #000000;">            newNum(map);
</span><span style="color: #008080;">425</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">426</span>         <span style="color: #0000ff;">default</span><span style="color: #000000;">:
</span><span style="color: #008080;">427</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">428</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">429</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">430</span>     <span style="color: #0000ff;">default</span><span style="color: #000000;">:
</span><span style="color: #008080;">431</span>         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">432</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">433</span> 
<span style="color: #008080;">434</span> <span style="color: #000000;">}
</span><span style="color: #008080;">435</span> 
<span style="color: #008080;">436</span> <span style="color: #008000;">//</span><span style="color: #008000;">打印  贴图</span>
<span style="color: #008080;">437</span> <span style="color: #0000ff;">void</span> drawMap(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span><span style="color: #000000;">])
</span><span style="color: #008080;">438</span> <span style="color: #000000;">{
</span><span style="color: #008080;">439</span>     <span style="color: #008000;">/*</span><span style="color: #008000;">for (int i = 0; i &lt; 4; ++i)
</span><span style="color: #008080;">440</span> <span style="color: #008000;">    {
</span><span style="color: #008080;">441</span> <span style="color: #008000;">        for (int j = 0; j &lt; 4; ++j)
</span><span style="color: #008080;">442</span> <span style="color: #008000;">        {
</span><span style="color: #008080;">443</span> <span style="color: #008000;">            printf("%d\t", map[i][j]);
</span><span style="color: #008080;">444</span> <span style="color: #008000;">        }
</span><span style="color: #008080;">445</span> <span style="color: #008000;">        printf("\n");
</span><span style="color: #008080;">446</span> <span style="color: #008000;">    }
</span><span style="color: #008080;">447</span> <span style="color: #008000;">    printf("\n\n");</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">448</span> 
<span style="color: #008080;">449</span>     <span style="color: #008000;">//</span><span style="color: #008000;">cleardevice();</span><span style="color: #008000;">//</span><span style="color: #008000;">图形库清除屏幕内容  </span><span style="color: #008000;">//</span><span style="color: #008000;">如果加上 有闪屏的问题</span>
<span style="color: #008080;">450</span>     putimage(<span style="color: #800080;">0</span>, <span style="color: #800080;">0</span>, &amp;img);<span style="color: #008000;">//</span><span style="color: #008000;">贴背景图</span>
<span style="color: #008080;">451</span>     <span style="color: #0000ff;">char</span> arr[<span style="color: #800080;">10</span>];<span style="color: #008000;">//</span><span style="color: #008000;">准备字符串</span>
<span style="color: #008080;">452</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">i)
</span><span style="color: #008080;">453</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">454</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">j)
</span><span style="color: #008080;">455</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">456</span>             <span style="color: #008000;">//</span><span style="color: #008000;">加数字进来
</span><span style="color: #008080;">457</span>             <span style="color: #008000;">//</span><span style="color: #008000;">outtextxy根据坐标输出字符串
</span><span style="color: #008080;">458</span>             <span style="color: #008000;">//</span><span style="color: #008000;">itoa 将int转换成字符串</span>
<span style="color: #008080;">459</span>             <span style="color: #008000;">/*</span><span style="color: #008000;">if (map[i][j] != 0)
</span><span style="color: #008080;">460</span> <span style="color: #008000;">            {
</span><span style="color: #008080;">461</span> <span style="color: #008000;">            sprintf(arr,"%d",map[i][j]);
</span><span style="color: #008080;">462</span> <span style="color: #008000;">            outtextxy(160 * j+20, 160 * i+20, arr);
</span><span style="color: #008080;">463</span> <span style="color: #008000;">            }</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">464</span> 
<span style="color: #008080;">465</span>             <span style="color: #008000;">//</span><span style="color: #008000;">有素材  switch 根据不同数字进行贴图
</span><span style="color: #008080;">466</span>             <span style="color: #008000;">//</span><span style="color: #008000;">通过数字确定背景
</span><span style="color: #008080;">467</span>             <span style="color: #008000;">//</span><span style="color: #008000;">238 106 80
</span><span style="color: #008080;">468</span>             <span style="color: #008000;">//</span><span style="color: #008000;">238 169 184
</span><span style="color: #008080;">469</span>             <span style="color: #008000;">//</span><span style="color: #008000;">131 139 131
</span><span style="color: #008080;">470</span>             <span style="color: #008000;">//</span><span style="color: #008000;">193 205 205</span>
<span style="color: #008080;">471</span> 
<span style="color: #008080;">472</span>             <span style="color: #008000;">/*</span><span style="color: #008000;">switch (map[i][j])
</span><span style="color: #008080;">473</span> <span style="color: #008000;">            {
</span><span style="color: #008080;">474</span> <span style="color: #008000;">            case 0:
</span><span style="color: #008080;">475</span> <span style="color: #008000;">            case 32:
</span><span style="color: #008080;">476</span> <span style="color: #008000;">            setfillcolor(COLOR1);
</span><span style="color: #008080;">477</span> <span style="color: #008000;">            fillrectangle(160 * j, 160 * i, 160 * j + 160, 160 * i + 160);
</span><span style="color: #008080;">478</span> <span style="color: #008000;">            break;
</span><span style="color: #008080;">479</span> <span style="color: #008000;">            case 2:
</span><span style="color: #008080;">480</span> <span style="color: #008000;">            case 64:
</span><span style="color: #008080;">481</span> <span style="color: #008000;">            setfillcolor(COLOR2);
</span><span style="color: #008080;">482</span> <span style="color: #008000;">            fillrectangle(160 * j, 160 * i, 160 * j + 160, 160 * i + 160);
</span><span style="color: #008080;">483</span> <span style="color: #008000;">            break;
</span><span style="color: #008080;">484</span> <span style="color: #008000;">            case 4:
</span><span style="color: #008080;">485</span> <span style="color: #008000;">            case 128:
</span><span style="color: #008080;">486</span> <span style="color: #008000;">            setfillcolor(COLOR3);
</span><span style="color: #008080;">487</span> <span style="color: #008000;">            fillrectangle(160 * j, 160 * i, 160 * j + 160, 160 * i + 160);
</span><span style="color: #008080;">488</span> <span style="color: #008000;">            break;
</span><span style="color: #008080;">489</span> <span style="color: #008000;">            case 8:
</span><span style="color: #008080;">490</span> <span style="color: #008000;">            case 256:
</span><span style="color: #008080;">491</span> <span style="color: #008000;">            setfillcolor(COLOR4);
</span><span style="color: #008080;">492</span> <span style="color: #008000;">            fillrectangle(160 * j, 160 * i, 160 * j + 160, 160 * i + 160);
</span><span style="color: #008080;">493</span> <span style="color: #008000;">            break;
</span><span style="color: #008080;">494</span> <span style="color: #008000;">            }</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">495</span> 
<span style="color: #008080;">496</span>             sprintf(arr, <span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, map[i][j]);
</span><span style="color: #008080;">497</span>             outtextxy(<span style="color: #800080;">160</span> * j + <span style="color: #800080;">20</span>, <span style="color: #800080;">160</span> * i + <span style="color: #800080;">20</span>, arr[<span style="color: #800080;">10</span><span style="color: #000000;">]);
</span><span style="color: #008080;">498</span>             <span style="color: #008000;">//</span><span style="color: #008000;">根据数字 确定不同的背景图  然后在背景图上 写数字
</span><span style="color: #008080;">499</span>             <span style="color: #008000;">//</span><span style="color: #008000;">if ()
</span><span style="color: #008080;">500</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2^1  2^2  2^3 2^4
</span><span style="color: #008080;">501</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2^5  2^6
</span><span style="color: #008080;">502</span> 
<span style="color: #008080;">503</span>             <span style="color: #008000;">//</span><span style="color: #008000;">debug 调试版本  比较慢
</span><span style="color: #008080;">504</span>             <span style="color: #008000;">//</span><span style="color: #008000;">release 发行版本   --&gt;主要发给别人用的</span>
<span style="color: #008080;">505</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">506</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">507</span> <span style="color: #000000;">}
</span><span style="color: #008080;">508</span> 
<span style="color: #008080;">509</span> <span style="color: #008000;">//</span><span style="color: #008000;">随机一个新元素</span>
<span style="color: #008080;">510</span> <span style="color: #0000ff;">void</span> newNum(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span><span style="color: #000000;">])
</span><span style="color: #008080;">511</span> <span style="color: #000000;">{
</span><span style="color: #008080;">512</span>     <span style="color: #008000;">//</span><span style="color: #008000;">判断是不是满</span>
<span style="color: #008080;">513</span>     <span style="color: #0000ff;">int</span> empty = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">514</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">i)
</span><span style="color: #008080;">515</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">516</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">j)
</span><span style="color: #008080;">517</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">518</span>             <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>) empty = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">519</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">520</span>         <span style="color: #0000ff;">if</span> (empty == <span style="color: #800080;">1</span>) <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">如果找到这个空的位置  不需要继续循环</span>
<span style="color: #008080;">521</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">522</span>     <span style="color: #0000ff;">if</span> (empty == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">523</span> 
<span style="color: #008080;">524</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;
</span><span style="color: #008080;">525</span>     <span style="color: #0000ff;">do</span>
<span style="color: #008080;">526</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">527</span>         x = rand() % <span style="color: #800080;">4</span><span style="color: #000000;">;
</span><span style="color: #008080;">528</span>         y = rand() % <span style="color: #800080;">4</span><span style="color: #000000;">;
</span><span style="color: #008080;">529</span>     } <span style="color: #0000ff;">while</span> (map[x][y] != <span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;">530</span>     map[x][y] = rand() % <span style="color: #800080;">2</span> * <span style="color: #800080;">2</span> + <span style="color: #800080;">2</span>;  <span style="color: #008000;">//</span><span style="color: #008000;">随机2和4
</span><span style="color: #008080;">531</span>     <span style="color: #008000;">//</span><span style="color: #008000;">如果地图满的话 我们不能随机元素 所以最后 加上一个判断地图满的函数</span>
<span style="color: #008080;">532</span> <span style="color: #000000;">}
</span><span style="color: #008080;">533</span> 
<span style="color: #008080;">534</span> <span style="color: #008000;">//</span><span style="color: #008000;">判断游戏是否结束</span>
<span style="color: #008080;">535</span> <span style="color: #0000ff;">int</span> isGameOver(<span style="color: #0000ff;">int</span> map[][<span style="color: #800080;">4</span><span style="color: #000000;">])
</span><span style="color: #008080;">536</span> <span style="color: #000000;">{
</span><span style="color: #008080;">537</span>     <span style="color: #008000;">//</span><span style="color: #008000;">赢  返回1    输 -1  还没赢 还没输 返回0
</span><span style="color: #008080;">538</span>     <span style="color: #008000;">//</span><span style="color: #008000;">游戏输赢条件
</span><span style="color: #008080;">539</span>     <span style="color: #008000;">//</span><span style="color: #008000;">出现2048  游戏赢
</span><span style="color: #008080;">540</span>     <span style="color: #008000;">//</span><span style="color: #008000;">如果游戏不能走动  游戏输掉</span>
<span style="color: #008080;">541</span>     <span style="color: #0000ff;">int</span> empty = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">如果判断的时候 map[i][j]==0  empty置为1  
</span><span style="color: #008080;">542</span>     <span style="color: #008000;">//</span><span style="color: #008000;">如果有相邻元素 并且相同的话  也将empty置为1</span>
<span style="color: #008080;">543</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">i)
</span><span style="color: #008080;">544</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">545</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">j)
</span><span style="color: #008080;">546</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">547</span>             <span style="color: #0000ff;">if</span> (map[i][j] &gt;= <span style="color: #800080;">2048</span>)<span style="color: #008000;">//</span><span style="color: #008000;">赢的条件</span>
<span style="color: #008080;">548</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">549</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">赢得游戏</span>
<span style="color: #008080;">550</span>                 <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">551</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">552</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">553</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">554</span>     <span style="color: #008000;">//</span><span style="color: #008000;">条件1  数字全满 并且 相邻没有同样的数字</span>
<span style="color: #008080;">555</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">i)
</span><span style="color: #008080;">556</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">557</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; <span style="color: #800080;">4</span>; ++<span style="color: #000000;">j)
</span><span style="color: #008080;">558</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">559</span>             <span style="color: #0000ff;">if</span> (map[i][j] == <span style="color: #800080;">0</span>)  empty = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">560</span>             <span style="color: #0000ff;">if</span> (i + <span style="color: #800080;">1</span>&lt;<span style="color: #800080;">4</span> &amp;&amp; map[i][j] == map[i + <span style="color: #800080;">1</span>][j]) empty = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">561</span>             <span style="color: #0000ff;">if</span> (j + <span style="color: #800080;">1</span>&lt;<span style="color: #800080;">4</span> &amp;&amp; map[i][j] == map[i][j + <span style="color: #800080;">1</span>]) empty = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">562</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">563</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">564</span>     <span style="color: #0000ff;">if</span> (empty == <span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">565</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">566</span>         <span style="color: #008000;">//</span><span style="color: #008000;">游戏还没有结束</span>
<span style="color: #008080;">567</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">568</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">569</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">570</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">571</span>         <span style="color: #008000;">//</span><span style="color: #008000;">游戏结束 </span><span style="color: #008000;">//</span><span style="color: #008000;">输</span>
<span style="color: #008080;">572</span>         <span style="color: #0000ff;">return</span> -<span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">573</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">574</span> }</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">结果展示：</span></p>
<p><img src="./images/C++学习（三十九）（C语言部分）之 游戏项目（2048游戏）12.png" alt="" /></p>
<p>&nbsp;</p>
<p>注：代码部分仅供学习参考，完全复制下来不一定能够实现</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-family: 宋体; font-size: 18px;">2019-04-03&nbsp;&nbsp;12:04:42</span></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>