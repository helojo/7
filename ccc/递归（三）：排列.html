<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修递归（三）：排列' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>递归（三）：排列</center></div><div class='banquan'>原文出处:本文由博客园博主aTeacher提供。<br/>
原文连接:https://www.cnblogs.com/cs-whut/p/11093078.html</div><br>
    <p>&nbsp; &nbsp; &nbsp; 排列组合是组合学最基本的概念。所谓排列，就是指从给定个数的元素中取出指定个数的元素进行排序。组合则是指从给定个数的元素中仅仅取出指定个数的元素，不考虑排序。</p>
<p>&nbsp; &nbsp; &nbsp; 排列与组合在日常生活中应用较广，比如在考虑某些事物在某种情况下出现的次数时，往往需要用到排列和组合。</p>
<p><strong>【例1】n位二进制数的全排列。</strong></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;编写一个程序，输入一个自然数n（1&lt;=n&lt;=10），输出n位二进制数的全排列。例如，输入3，输出8个3位二进制数的序列：000、001、010、011、100、101、110、111。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;可以采用递归的思想来解决这个问题。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;设将产生n位二进制数的全排列的解决方法记为P(n)，显然，当n=1时，该位或置1或置0，问题解决；当n&gt;1时，可以考虑将最高位或最低位置1或0，再按同样的方法产生其余n-1位二进制数的全排列，即递归调用P(n-1)。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;具体做法是：&nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;用一维数组a来保存产生的n位二进制数序列，产生过程是从最低位（第0位）到最高位（第n-1位）逐位产生的，每位可以有0和1两种情况，设产生n位二进制数中的第k位~第n-1位的操作记为p(int *a,int k,int n)，则这一操作过程为：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; if (k==n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 第0位到第n-1位共n位全部产生</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 输出结果；</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp;&nbsp;&nbsp; // 递归终止</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 当前第k位置0</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);&nbsp;&nbsp;&nbsp;&nbsp; // 产生第k+1 位~第n-1位</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 当前第k位置 1</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);&nbsp;&nbsp;&nbsp;&nbsp; // 产生第k+1位~第n-1位</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">void p(int *a,int k,int n)</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (k==n)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for (int i=0;i&lt;n;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;a[i];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; cout&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=0;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=1;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; int n,a[10];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; cin&gt;&gt;n;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; p(a,0,n);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; return 0;</p>
<p style="margin-left: 30px;">}</p>
<p>&nbsp; &nbsp; &nbsp; 上面的例子产生了n位二进制数序列，若每位对应一个元素，0代表该元素不出现，1代表该元素出现；或每位对应一个问题，0代表该问题没有解决，1代表该问题被正确解决，这样可以在此基础上，解决实际的问题。</p>
<p><strong>【例2】低碳生活大奖赛</strong> （2012年第3届蓝桥杯省赛试题）。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;某电视台举办了低碳生活大奖赛。题目的计分规则相当奇怪：</p>
<p>&nbsp; &nbsp; &nbsp; 每位选手需要回答10个问题（其编号为1到10），越后面越有难度。答对的，当前分数翻倍；答错了则扣掉与题号相同的分数（选手必须回答问题，不回答按错误处理）。</p>
<p>&nbsp; &nbsp; &nbsp; 每位选手都有一个起步的分数为10分。</p>
<p>&nbsp; &nbsp; &nbsp; 某获胜选手最终得分刚好是100分，如果不让你看比赛过程，你能推断出他（她）哪个题目答对了，哪个题目答错了吗？</p>
<p>&nbsp; &nbsp; &nbsp; 如果把答对的记为1，答错的记为0，则10个题目的回答情况可以用仅含有1和0的串来表示。例如：0010110011 就是可能的情况。</p>
<p>&nbsp; &nbsp; &nbsp; 编写程序，输出所有可能的表示回答情况的字符串。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 采用例1的思路产生10位二进制数的全排列，每位二进制数码分别对应一个问题的解答情况，0代表答错，1代表回答正确。若计算出的分数恰好为100，则就是问题的一组解。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">void f(int s[] , int n , int score)</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; int i;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;if(n&gt;=11)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(score == 100)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for(i=1;i&lt;=10;i++)&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout&lt;&lt;s[i];</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; s[n]=0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 第n题答错</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; f(s, n+1, score-n);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; s[n]=1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 第n题答对</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; f(s, n+1, score*2);</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{&nbsp; int s[11];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; s[10] = '\0' ;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; f(s,1,10);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; return 0;</p>
<p style="margin-left: 30px;">}</p>
<p><strong>【例3】李白打酒&nbsp;（2014年第5届蓝桥杯省赛试题）。</strong></p>
<p>&nbsp; &nbsp; &nbsp; 大诗人李白，一生好饮。一天，他提着酒壶，从家里出来，酒壶中有酒2斗。他边走边唱：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 无事街上走，提壶去打酒。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;逢店加一倍，遇花喝一斗。</p>
<p>&nbsp; &nbsp; &nbsp; 这一路上，他一共遇到店5次，遇到花10次，已知最后一次遇到的是花，他正好把酒喝光了。</p>
<p>&nbsp; &nbsp; &nbsp; 请你计算李白遇到店和花的次序，可以把遇店记为a，遇花记为b。则：babaabbabbabbbb 就是合理的次序。请输出所有像这样的答案。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 同样按例1的方法生成15位二进制数的排列，对每一种排列进行判断，看是否满足要求（遇到店5次、酒正好喝完、最后一次遇到的是花），满足条件输出对应字符串即可。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">void dfs(int *a,int k)</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (k==15)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int alcohol,drinkery,i;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alcohol=2;&nbsp; drinkery=0;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; for (i=0;i&lt;15;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; if (a[i]==0)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; alcohol=2*alcohol;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; drinkery++;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; else</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; alcohol--;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (alcohol==0 &amp;&amp; drinkery==5 &amp;&amp; a[14]==1)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; for (i=0;i&lt;15;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; if (a[i]==0) cout&lt;&lt;"a";</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; else&nbsp;&nbsp; cout&lt;&lt;"b";</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; cout&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=0;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(a,k+1);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=1;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(a,k+1);</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; int a[15];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; dfs(a,0);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; return 0;</p>
<p style="margin-left: 30px;">}</p>
<p>&nbsp; &nbsp; &nbsp; （3）程序优化。</p>
<p>&nbsp; &nbsp; &nbsp; 上面的程序中用二进制数0表示遇到店，1表示遇到花。实际上，可以直接定义一个字符数组char a[16]，该数组的元素a[0]~a[14]直接用字符&rsquo;a&rsquo;或&rsquo;b&rsquo; 赋值，a[15]赋结束符&rsquo;\0&rsquo;。</p>
<p>&nbsp; &nbsp; &nbsp; 另外，通过递归产生15位二进制数的排列，共2<sup>15</sup>=32768种情况，也就是上面的程序搜索判断了32768种情况。实际上，由于满足问题的解是遇店5次，因此在某一搜索过程中遇店达到6次，肯定不是问题的解，无需继续进行，可以实施剪枝。</p>
<p>&nbsp; &nbsp; &nbsp; 为了实施剪枝，需要在递归时记录酒的斗数和遇店的次数，可以改写函数为</p>
<p>&nbsp; &nbsp; &nbsp;void dfs(char *a,int k,int alcohol,int drinkery)，其中alcohol记录酒壶里酒的斗数，drinkery记录遇店的次数。</p>
<p>&nbsp; &nbsp; &nbsp; 剪枝优化后的源程序如下：</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">void dfs(char *a,int k,int alcohol,int drinkery)</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (k==15)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (alcohol==0 &amp;&amp; drinkery==5 &amp;&amp; a[14]=='b')</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; cout&lt;&lt;a&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (drinkery&lt;=5 &amp;&amp; alcohol!=0)&nbsp;&nbsp; // 剪枝</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]='a';</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dfs(a,k+1,2*alcohol,drinkery+1);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; a[k]='b';</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dfs(a,k+1,alcohol-1,drinkery);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; char a[16];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; a[15]='\0';</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; dfs(a,0,2,0);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; return 0;</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p style="margin-left: 30px;">下面我们继续在例1递归程序的基础上进行扩展。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;例1中程序是产生二进制数的全排列，因此每位只有0和1两种情况。若每位可以赋值0~9这10个数码中的任意一个，则可将例1递归程序中的</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;a[k]=0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 当前第k位置0</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);&nbsp;&nbsp;&nbsp;&nbsp; // 产生第k+1 位~第n-1位</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[k]=1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 当前第k位置 1</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p(a,k+1,n);&nbsp;&nbsp;&nbsp;&nbsp; // 产生第k+1位~第n-1位</p>
<p style="margin-left: 30px;">改写为：</p>
<p style="margin-left: 60px;"> for (int i=0;i&lt;=9;i++)<br />	   {<br />&nbsp; &nbsp; &nbsp;a[k]=i;</p>
<p style="margin-left: 60px;">&nbsp; &nbsp; &nbsp;p(a,k+1,n);<br />	   }</p>
<p style="margin-left: 30px;">这样，若主函数中递归调用 p(a,0,3); ，则可以输出000~999共1000个三位数。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;进一步考虑，如果需要产生的排列中各位数字全不相同，怎么办呢？</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;显然，在执行<span style="font-family: 宋体;">&ldquo;a[k]=i;&rdquo;将数字i（0~9之一）赋值给a[k]前需要判断i是否已被使用，如果数字i已被使用，则不进行赋值。</span></p>
<p>&nbsp; &nbsp; &nbsp; 可以定义一个数组int visit[10]={0}标记数字是否出现，如visit[3]=1表示数字3已被使用，visit[3]=0表示数字3还未被使用。修改上面的递归函数如下：</p>
<p style="margin-left: 30px;">void p(int *a,int k,int n,int visit[])</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;if (k==n)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; {</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (int i=0;i&lt;n;i++)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cout&lt;&lt;a[i];</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cout&lt;&lt;" ";</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;}</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;for (int i=0;i&lt;=9;i++)<br />&nbsp; &nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (!visit[i])  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a[k] = i;  visit[i] = 1;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p(a,k+1,n,visit);  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; visit[i] = 0;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}  <br />&nbsp; &nbsp; &nbsp;}<br />}</p>
<p>&nbsp; &nbsp; &nbsp; 在主函数中定义数组int&nbsp; x[10]和int visit[10]={0}，递归调用函数p(x,0,3,visit)，可以输出无重复数字的三位数012~987（共720个数）的排列。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;如果再将递归函数中对a[k]赋值的循环语句&nbsp; for (int i=0;i&lt;=9;i++)，改写为&nbsp; &nbsp; &nbsp; &nbsp;for (int i=1;i&lt;=n;i++)，则递归调用</p>
<p>函数p(x,0,3,visit)，可以输出由1、2、3三个数字组成的无重复数字的三位数的全排列（123、132、213、231、312和&nbsp; 321）。</p>
<p>&nbsp;</p>
<p><strong>【例4】马虎的算式（2013年第4届蓝桥杯省赛试题）</strong></p>
<p>&nbsp; &nbsp; &nbsp; 小明是个急性子，上小学的时候经常把老师写在黑板上的题目抄错了。有一次，老师出的题目是：36 x 495 = ?&nbsp; 他却给抄成了：396 x 45 = ?&nbsp;&nbsp; 但结果却很戏剧性，他的答案竟然是对的！因为 36 * 495 = 396 * 45 = 17820</p>
<p>&nbsp; &nbsp; &nbsp; 类似这样的巧合情况可能还有很多，比如：27 * 594 = 297 * 54。</p>
<p>&nbsp; &nbsp; &nbsp; 假设a、b、c、d、e 代表1~9不同的5个数字（注意是各不相同的数字，且不含0），能满足形如：ab * cde = adb * ce 这样的算式一共有多少种呢？</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 定义一个数组int num[6]，其中num[1]~num[5]五个元素分别表示a、b、c、d、e的取值。可仿照前面扩展探讨的方法，生成由1~9这9个数字组成的无重复数字的5位数的全排列。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;生成1~9不同的5个数字存储到数组中后，检测对应算式ab*cde == adb*ce是否成立，如果成立，是一组解，输出并计数。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">void dfs(int num[],&nbsp;int pos,bool visit[],int &amp;cnt)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; if(pos == 6)&nbsp;&nbsp;&nbsp;&nbsp; // 已有5个数&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ab = num[1]*10 + num[2];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int cde = num[3]*100 + num[4]*10 + num[5];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int adb = num[1]*100 + num[4]*10 + num[2];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ce = num[3]*10 + num[5];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(ab*cde == adb*ce)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;ab&lt;&lt;"*"&lt;&lt;cde&lt;&lt;"="&lt;&lt;adb&lt;&lt;"*"&lt;&lt;ce&lt;&lt;"="&lt;&lt;ab*cde&lt;&lt;endl;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cnt++;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; for(int i = 1;i &lt;= 9;i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(!visit[i])&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num[pos] = i;&nbsp; visit[i] = true;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(num,pos+1,visit,cnt);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; visit[i] = false;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;int num[6],cnt=0;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool visit[10];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i=1;i&lt;=9;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; visit[i]=false;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;dfs(num,1,visit,cnt);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Count="&lt;&lt;cnt&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; return 0;</p>
<p style="margin-left: 30px;">}</p>
<p>【例5】六角填数<strong>（2014年第5届蓝桥杯省赛试题）。</strong></p>
<p>&nbsp; &nbsp; &nbsp; 在如图1所示六角形中，填入1~12共12个不同的数字，使得每条直线上的4个数字之和都相同。如图2所示为一种可行的填法。图3中，已经替你填好了3个数字，请你计算星号位置所代表的数字是多少？</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/递归（三）：排列0.png" alt="" /></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;图1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 图2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 图3</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 定义一个数组int a[13]，其中a[1]~a[12]这12个元素分别从上到下，自左向右的12个圆圈。可仿照前面扩展探讨的方法，生成由1~12这12个数字组成的无重复数字的全排列。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;生成1~12不同的12个数字存储到数组中后，检测6条直线上的四个数字之和是否全相等，如果全相等，是一组解，输出并计数。</p>
<p>&nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;&nbsp;</p>
<p style="margin-left: 30px;">#include &lt;iomanip&gt;&nbsp;</p>
<p style="margin-left: 30px;">using namespace std;&nbsp;</p>
<p style="margin-left: 30px;">int a[13];&nbsp;</p>
<p style="margin-left: 30px;">int vis[13];</p>
<p style="margin-left: 30px;">int cnt=0;&nbsp;</p>
<p style="margin-left: 30px;">void dfs(int x)</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;if(x == 12)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int t[6];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[0] = a[1] + a[3] + a[6] + a[8];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[1] = a[1] + a[4] + a[7] + a[11];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[2] = a[2] + a[3] + a[4] + a[5];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[3] = a[2] + a[6] + a[9] + a[12];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[4] = a[8] + a[9] + a[10] + a[11];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t[5] = a[12] + a[10] + a[7] + a[5];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i = 1; i &lt; 6; ++i)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(t[i] != t[i-1])&nbsp; return ;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; cnt++;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; cout&lt;&lt;"No "&lt;&lt;cnt&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;cout&lt;&lt;setw(12)&lt;&lt;a[1]&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;setw(3)&lt;&lt;a[2]&lt;&lt;setw(6)&lt;&lt;a[3]&lt;&lt;setw(6)&lt;&lt;a[4]&lt;&lt;setw(6)&lt;&lt;a[5]&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;setw(6)&lt;&lt;a[6]&lt;&lt;setw(12)&lt;&lt;a[7]&lt;&lt;endl;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;setw(3)&lt;&lt;a[8]&lt;&lt;setw(6)&lt;&lt;a[9]&lt;&lt;setw(6)&lt;&lt;a[10]&lt;&lt;setw(6)&lt;&lt;a[11]&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; cout&lt;&lt;setw(12)&lt;&lt;a[12]&lt;&lt;endl&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for(int i = 1;i &lt; 13; ++i)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!vis[i])</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis[i] = 1;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[x] = i;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(x+1);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis[i] = 0;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">int main()</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for (int i=1;i&lt;=12;i++)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vis[i]=0;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; vis[1] = 1;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; a[1] = 1;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; vis[8] = 1;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; a[2] = 8;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; vis[3] = 1;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; a[12] =3;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; dfs(3);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; cout&lt;&lt;"Count="&lt;&lt;cnt&lt;&lt;endl;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; return 0;&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;&nbsp;</p>
<p><strong>【例6】差三角形。</strong></p>
<p>&nbsp; &nbsp; &nbsp; 观察下面的数字组成的三角形：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 4</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5 6 2</p>
<p>&nbsp; &nbsp; &nbsp; 看出什么特征吗？</p>
<p>&nbsp; &nbsp; &nbsp; 1）它包含了1~6的连续整数。</p>
<p>&nbsp; &nbsp; &nbsp; 2）每个数字都是其下方相邻的两个数字的差（当然是大数减去小数）</p>
<p>&nbsp; &nbsp; &nbsp; 满足这样特征的三角形，称为差三角形。</p>
<p>&nbsp; &nbsp; &nbsp; 编写程序，找出由1~15共15个整数组成的一个更大的差三角。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 先确定最后一行的值，即在1~15（5*6/2）这15个数中任意选取5个元素进行全排列。之后，按差三角形的特征依次确定上面其它行的值。在确定值的过程中，若某个值已被使用，则不可能是问题的解。直接剪枝，进行下次搜索。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;</p>
<p style="margin-left: 30px;">#include &lt;iomanip&gt;&nbsp;</p>
<p style="margin-left: 30px;">#include &lt;cmath&gt;&nbsp;</p>
<p style="margin-left: 30px;">using namespace std;&nbsp;</p>
<p style="margin-left: 30px;">void judge(int take[],int n)</p>
<p style="margin-left: 30px;">{</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; bool visited[22];&nbsp; // 最多6行，21个数&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; int num[6][6],i,j,x;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for (i=1;i&lt;=n*(n+1)/2;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; visited[i]=false;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for(i = 0; i &lt; n; i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num[n-1][i]=take[i];&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; visited[take[i]] = true;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for (i=n-2; i&gt;=0; i--)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (j = 0; j &lt;= i; j++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x = abs(num[i+1][j] - num[i+1][j+1]);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(visited[x])&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if(x&gt;=1 &amp;&amp; x&lt;= n*(n+1)/2)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; visited[x] = true;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num[i][j] = x;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if&nbsp; (num[n-1][0]&gt;num[n-1][n-1]) return ;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (i = 0; i &lt; n; i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for(j = 0; j&lt;=i; j++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cout &lt;&lt; setw(4)&lt;&lt;num[i][j];&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cout &lt;&lt; endl;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; &nbsp;}</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;</p>
<p style="margin-left: 30px;">}</p>
<p style="margin-left: 30px;">void dfs(int take[], int index, bool vis[],int n)&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; int i, j;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; if (index==n)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; judge(take,n);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for(i = 1; i &lt;= n*(n+1)/2; i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!vis[i])&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis[i] = true;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; take[index]= i;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dfs(take, index+1,vis,n);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis[i] = false;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">int main()&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; int n,take[6],i;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool vis[22];</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; cin&gt;&gt;n;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for(i = 1; i &lt;= n*(n+1)/2; i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vis[i]=false;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; dfs(take,0,vis,n);</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; return 0;&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;&nbsp;</p>
<p><strong>【例7】带分数（2013年第4届蓝桥杯省赛试题）</strong>。</p>
<p>&nbsp; &nbsp; &nbsp; 100 可以表示为带分数的形式：100= 3 + 69258 / 714</p>
<p>&nbsp; &nbsp; &nbsp; 还可以表示为：100 = 82 + 3546 / 197</p>
<p>&nbsp; &nbsp; &nbsp; 类似这样的带分数，100 有 11 种表示法。</p>
<p>&nbsp; &nbsp; &nbsp; 需要强调的是：带分数中，数字1~9分别出现且只出现一次（不包含0）。</p>
<p>&nbsp; &nbsp; &nbsp; 编写一个程序，输入一个正整数N（N&lt;1000*1000），输出该数字N用数码1~9不重复不遗漏地组成带分数表示的全部种数。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 若将带分数符号化为&nbsp;num=m1+m2/m3；那么首先m1一定是小于num的，又因为num为整数，所以m1和m2/m3都是整数，这就要求m2/m3一定可以整除，所以m2%m3=0，m2/m3还要满足可除条件，即m2&gt;=m3。因此，可确定四个条件：&nbsp;1)m1&lt;num；&nbsp;2)m2%m3=0；&nbsp;&nbsp;3)m2&gt;=m3； 4)num=m1+m2/m3。</p>
<p>&nbsp; &nbsp; &nbsp; 因此，程序只要在1~9的全排列中选取满足这四个条件的全排列就是所求的结果之一。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;1~9的全排列生成方法可以参照前面的例子。本例的关键还在于在1~9的全排列（9个数字）中如何确定m1，m2，m3的取值范围。</p>
<p>&nbsp; &nbsp; &nbsp; m1的取值应小于num，而m2一定大于或等于m3，则m2的取值范围一定在m1选择过后去选择剩下的一半或一半以上的数据。举个例子，1~9的其中一个全排列为 156987423，若m1选择156，则m2只能选择剩下的987423中的一半或一半以上，如987、9874、98742。如果m2小于剩下的一半，那么一定不满足除法（如98/7432）。m3的范围则是m1和m2选择剩下的所有了。</p>
<p>&nbsp; &nbsp; &nbsp; 假设m1选择9位中的前i位，那么m2的选择范围为第i+（9-i）/2至9-1位数字（结尾为一半或一半以上，最多时到9-1，给m3留一个数字）。</p>
<p>&nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;iostream&gt;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">using namespace std;</p>
<p style="margin-left: 30px;">int aws=0;&nbsp;</p>
<p style="margin-left: 30px;">int a[10],flag[10];&nbsp;</p>
<p style="margin-left: 30px;">int sum(int start,int end)&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; int i,num=0;&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; for(i=start;i&lt;=end;i++)&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num=num*10+a[i];&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; return num;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">void Found(int a[],int num) // 将DFS中的每一个全排列结果放在Found函数中检验&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; int i,j,m1,m2,m3;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; for(i=1;i&lt;10;i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m1=sum(1,i);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 第一个数从1至9开始选&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (m1&gt;=num) return;&nbsp;&nbsp; // 不满足第一个数&lt;num的直接淘汰&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(j=i+(9-i)/2;j&lt;9;j++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m2=sum(i+1,j);&nbsp;&nbsp;&nbsp;&nbsp; // 第二个数&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m3=sum(j+1,9);&nbsp;&nbsp;&nbsp;&nbsp; // 第三个数&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (m2&gt;m3 &amp;&amp; m2%m3==0 &amp;&amp; num==m1+m2/m3)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;num&lt;&lt;"="&lt;&lt;m1&lt;&lt;"+"&lt;&lt;m2&lt;&lt;"/"&lt;&lt;m3&lt;&lt;endl;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aws++;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">void DFS(int start,int num)&nbsp;&nbsp;&nbsp; // 对1~9进行全排列&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; int i;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; if (start==10)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Found(a,num);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; else&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i=1;i&lt;10;i++)&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(flag[i])&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a[start]=i;&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag[i]=1;&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DFS(start+1,num);&nbsp;&nbsp; //选择好一位开始选下一位&nbsp;&nbsp;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag[i]=0;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;</p>
<p style="margin-left: 30px;">int main()&nbsp;</p>
<p style="margin-left: 30px;">{&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; int num,i;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; for(i=1;i&lt;10;i++)</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag[i]=0;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; cin&gt;&gt;num;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; DFS(1,num);&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; cout&lt;&lt;aws&lt;&lt;endl;&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;&nbsp;&nbsp; return 0;&nbsp;</p>
<p style="margin-left: 30px;">}&nbsp;&nbsp;</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>