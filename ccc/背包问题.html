<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修背包问题' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>背包问题</center></div><div class='banquan'>原文出处:本文由博客园博主revolIA提供。<br/>
原文连接:https://www.cnblogs.com/revolIA-room/p/11615797.html</div><br>
    <h2>&nbsp;</h2>
<h2>01背包</h2>
<p>n个物品，v的体积，求最多能装下的价值</p>
<p>每个物品只能拿一次</p>
<p><a title="题目链接" href="https://www.acwing.com/problem/content/2/" target="_blank">https://www.acwing.com/problem/content/2/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('0df25ffe-6b7c-415d-b80d-674182a72551')"><img id="code_img_closed_0df25ffe-6b7c-415d-b80d-674182a72551" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_0df25ffe-6b7c-415d-b80d-674182a72551" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0df25ffe-6b7c-415d-b80d-674182a72551',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_0df25ffe-6b7c-415d-b80d-674182a72551" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include&lt;bits/stdc++.h&gt;
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">int</span> N,V,dp[<span style="color: #800080;">1005</span>] = {<span style="color: #800080;">0</span><span style="color: #000000;">};
</span><span style="color: #008080;"> 5</span>     scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;N,&amp;<span style="color: #000000;">V);
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>,x,y;i&lt;=N;i++<span style="color: #000000;">){
</span><span style="color: #008080;"> 7</span>         scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;x,&amp;<span style="color: #000000;">y);
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=V;j&gt;=x;j--<span style="color: #000000;">){
</span><span style="color: #008080;"> 9</span>             dp[j] = max(dp[j],dp[j-x]+<span style="color: #000000;">y);
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">12</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[V]);
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">14</span> }</pre>
</div>
<span class="cnblogs_code_collapse">代码</span></div>
<h2>完全背包</h2>
<p>n个物品，v的体积，求最多能装下的价值</p>
<p>每个物品可以拿无限次</p>
<p><a title="题目链接" href="https://www.acwing.com/problem/content/2/" target="_blank">https://www.acwing.com/problem/content/3/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('02d88c5e-b2ca-4ea5-ad1f-4b3a88a21d3b')"><img id="code_img_closed_02d88c5e-b2ca-4ea5-ad1f-4b3a88a21d3b" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_02d88c5e-b2ca-4ea5-ad1f-4b3a88a21d3b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('02d88c5e-b2ca-4ea5-ad1f-4b3a88a21d3b',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_02d88c5e-b2ca-4ea5-ad1f-4b3a88a21d3b" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include&lt;bits/stdc++.h&gt;
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">int</span> N,V,dp[<span style="color: #800080;">1005</span>] = {<span style="color: #800080;">0</span><span style="color: #000000;">};
</span><span style="color: #008080;"> 5</span>     scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;N,&amp;<span style="color: #000000;">V);
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>,x,y;i&lt;=N;i++<span style="color: #000000;">){
</span><span style="color: #008080;"> 7</span>         scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;x,&amp;<span style="color: #000000;">y);
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=x;j&lt;=V;j++<span style="color: #000000;">){
</span><span style="color: #008080;"> 9</span>             dp[j] = max(dp[j],dp[j-x]+<span style="color: #000000;">y);
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">12</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[V]);
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">14</span> }</pre>
</div>
<span class="cnblogs_code_collapse">代码</span></div>
<p>&nbsp;</p>
<h2>多重背包</h2>
<p>n个物品，v的体积，求最多能装下的价值</p>
<p>每个物品可以拿k<sub>i</sub>次</p>
<p><a title="题目链接" href="https://www.acwing.com/problem/content/2/" target="_blank">https://www.acwing.com/problem/content/5/</a></p>
<p>一个优化：（二进制优化）</p>
<p>显然我们没有必要跑全k<sub>i</sub>次，判断下能用完全背包的就用完全背包好了<sub><br /></sub></p>
<p>不能用完全背包的，考虑一个等价的次数，即，每次取1个，2个，4个。。。k<sub>i</sub>-2<sup>j</sup>+1个</p>
<p>j是最大的能使k<sub>i</sub>-2<sup>j</sup>+1&gt;0的数</p>
<p>也就是说我们将k<sub>i</sub>二进制拆分了</p>
<p>时间复杂度为O(n*m*log(&sum;k<sub>i</sub>))</p>
<p>另一个优化：（单调队列优化）</p>
<p>&mdash;&mdash;&mdash;&mdash;咕咕咕&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</p>
<p>时间复杂度O(n*m)</p>
<p><a href="https://www.acwing.com/problem/content/6/">https://www.acwing.com/problem/content/6/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('2a55f251-e596-4833-9930-6833709c14b3')"><img id="code_img_closed_2a55f251-e596-4833-9930-6833709c14b3" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_2a55f251-e596-4833-9930-6833709c14b3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2a55f251-e596-4833-9930-6833709c14b3',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_2a55f251-e596-4833-9930-6833709c14b3" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(x,y) (x&gt;y?x:y)
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    ll N,V,dp[</span><span style="color: #800080;">20005</span>] = {<span style="color: #800080;">0</span><span style="color: #000000;">};
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%lld%lld</span><span style="color: #800000;">"</span>,&amp;N,&amp;<span style="color: #000000;">V);
    </span><span style="color: #0000ff;">for</span>(ll i=<span style="color: #800080;">1</span>,x,y,z;i&lt;=N;i++<span style="color: #000000;">){
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%lld%d%lld</span><span style="color: #800000;">"</span>,&amp;x,&amp;y,&amp;<span style="color: #000000;">z);
        </span><span style="color: #0000ff;">if</span>(x*z&gt;<span style="color: #000000;">V){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=x;j&lt;=V;j++<span style="color: #000000;">){
                dp[j] </span>= max(dp[j],dp[j-x]+<span style="color: #000000;">y);
            }
        }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
            </span><span style="color: #0000ff;">for</span>(ll tmp = <span style="color: #800080;">1</span>;z-tmp+<span style="color: #800080;">1</span> &gt; <span style="color: #800080;">0</span>;tmp &lt;&lt;= <span style="color: #800080;">1</span><span style="color: #000000;">){
                ll k </span>= (z-(tmp&lt;&lt;<span style="color: #800080;">1</span>)+<span style="color: #800080;">1</span>)&lt;<span style="color: #800080;">0</span>?z-tmp+<span style="color: #800080;">1</span><span style="color: #000000;">:tmp;
                </span><span style="color: #0000ff;">for</span>(ll j=V;j&gt;=x*k;j--<span style="color: #000000;">){
                    dp[j] </span>= max(dp[j],dp[j-x*k]+y*<span style="color: #000000;">k);
                }
            }
        }
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%lld\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[V]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2>混合背包</h2>
<p>前三个混在一起，加个if判断即可</p>
<p><strong><a href="https://www.acwing.com/problem/content/submission/7/">https://www.acwing.com/problem/content/submission/7/</a></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('87cb1905-a808-4fb5-96bd-254301119826')"><img id="code_img_closed_87cb1905-a808-4fb5-96bd-254301119826" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_87cb1905-a808-4fb5-96bd-254301119826" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('87cb1905-a808-4fb5-96bd-254301119826',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_87cb1905-a808-4fb5-96bd-254301119826" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(a,b) (a&gt;b?a:b)<span style="color: #000000;">
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = 2e4+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;<span style="color: #000000;">m);
    </span><span style="color: #0000ff;">while</span>(n--<span style="color: #000000;">){
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k,value,cnt;
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span>,&amp;k,&amp;value,&amp;<span style="color: #000000;">cnt);
        </span><span style="color: #0000ff;">if</span>(cnt == -<span style="color: #800080;">1</span><span style="color: #000000;">){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=m;i&gt;=k;i--<span style="color: #000000;">){
                dp[i] </span>= max(dp[i],dp[i-k]+<span style="color: #000000;">value);
            }
        }</span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(cnt == <span style="color: #800080;">0</span> || k*cnt&gt;=<span style="color: #000000;">m){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=k;i&lt;=m;i++<span style="color: #000000;">){
                dp[i] </span>= max(dp[i],dp[i-k]+<span style="color: #000000;">value);
            }
        }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;cnt-i+<span style="color: #800080;">1</span>&gt;<span style="color: #800080;">0</span>;i&lt;&lt;=<span style="color: #800080;">1</span><span style="color: #000000;">){
                </span><span style="color: #0000ff;">int</span> tmp = (cnt-(i&lt;&lt;<span style="color: #800080;">1</span>)+<span style="color: #800080;">1</span>)&lt;<span style="color: #800080;">0</span>?cnt-i+<span style="color: #800080;">1</span><span style="color: #000000;">:i;
                </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=m;j&gt;=tmp*k;j--<span style="color: #000000;">){
                    dp[j] </span>= max(dp[j],dp[j-tmp*k]+tmp*<span style="color: #000000;">value);
                }
            }
        }
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, dp[m]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2>二维费用的背包问题</h2>
<p>物体不止有体积这个限制条件，还有质量这个限制条件</p>
<p>n个物体，v的背包容积，m的负重限制，还是01背包只能拿一个</p>
<p><a href="https://www.acwing.com/problem/content/submission/8/">https://www.acwing.com/problem/content/submission/8/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('5803bd8c-07dd-47b4-9456-b4a2cb78f5a2')"><img id="code_img_closed_5803bd8c-07dd-47b4-9456-b4a2cb78f5a2" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_5803bd8c-07dd-47b4-9456-b4a2cb78f5a2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5803bd8c-07dd-47b4-9456-b4a2cb78f5a2',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_5803bd8c-07dd-47b4-9456-b4a2cb78f5a2" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(a,b) (a&gt;b?a:b)<span style="color: #000000;">
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = 1e3+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn][maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,v,m;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;v,&amp;<span style="color: #000000;">m);
    </span><span style="color: #0000ff;">while</span>(n--<span style="color: #000000;">){
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> volum,weight,value;
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span>,&amp;volum,&amp;weight,&amp;<span style="color: #000000;">value);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=v;i&gt;=volum;i--<span style="color: #000000;">){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=m;j&gt;=weight;j--<span style="color: #000000;">){
                dp[i][j] </span>= max(dp[i][j],dp[i-volum][j-weight]+<span style="color: #000000;">value);
            }
        }
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[v][m]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2>分组背包问题</h2>
<p>每组只能拿一个，这样调整下for的顺序就好了</p>
<p><a href="https://www.acwing.com/problem/content/submission/9/">https://www.acwing.com/problem/content/submission/9/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d3056bb9-84a6-4ea5-9b1d-e87dd645a1e0')"><img id="code_img_closed_d3056bb9-84a6-4ea5-9b1d-e87dd645a1e0" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_d3056bb9-84a6-4ea5-9b1d-e87dd645a1e0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d3056bb9-84a6-4ea5-9b1d-e87dd645a1e0',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_d3056bb9-84a6-4ea5-9b1d-e87dd645a1e0" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(a,b) (a&gt;b?a:b)<span style="color: #000000;">
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = 1e3+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> weight[maxn],value[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;<span style="color: #000000;">m);
    </span><span style="color: #0000ff;">while</span>(n--<span style="color: #000000;">){
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> cnt;
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>,&amp;<span style="color: #000000;">cnt);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=cnt;i++<span style="color: #000000;">){
            scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;weight[i],&amp;<span style="color: #000000;">value[i]);
        }
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=m;i&gt;=<span style="color: #800080;">0</span>;i--<span style="color: #000000;">){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=cnt;j++)<span style="color: #0000ff;">if</span>(i&gt;=<span style="color: #000000;">weight[j]){
                dp[i] </span>= max(dp[i],dp[i-weight[j]]+<span style="color: #000000;">value[j]);
            }
        }
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[m]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2><strong>有依赖的背包问题<br /></strong></h2>
<p>要想拿当前物体，必须拿它的父亲</p>
<p>用dfs先处理处子节点，然后拿出当前节点（因为必须拿当前才能拿子节点）</p>
<p>做一个背包，然后把当前节点更新进去</p>
<p><a href="https://www.acwing.com/problem/content/submission/10/">https://www.acwing.com/problem/content/submission/10/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('6ae949ba-c30a-4286-9170-fe31e7220015')"><img id="code_img_closed_6ae949ba-c30a-4286-9170-fe31e7220015" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_6ae949ba-c30a-4286-9170-fe31e7220015" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6ae949ba-c30a-4286-9170-fe31e7220015',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_6ae949ba-c30a-4286-9170-fe31e7220015" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(x,y) (x&gt;y?x:y)
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = <span style="color: #800080;">107</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m,root;
</span><span style="color: #0000ff;">int</span> head[maxn],to[maxn],Next[maxn],tot = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn][maxn],val[maxn],wei[maxn];
</span><span style="color: #0000ff;">void</span> Add(<span style="color: #0000ff;">int</span> u,<span style="color: #0000ff;">int</span><span style="color: #000000;"> v){
    to[tot] </span>=<span style="color: #000000;"> v;
    Next[tot] </span>=<span style="color: #000000;"> head[u];
    head[u] </span>= tot++<span style="color: #000000;">;
}
</span><span style="color: #0000ff;">void</span> dfs(<span style="color: #0000ff;">int</span><span style="color: #000000;"> u){
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=head[u];i;i=<span style="color: #000000;">Next[i]){
        </span><span style="color: #0000ff;">int</span> son =<span style="color: #000000;"> to[i];
        dfs(son);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=m-wei[u];j&gt;=wei[son];j--<span style="color: #000000;">){
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=wei[son];k&lt;=j;k++<span style="color: #000000;">){
                dp[u][j] </span>= max(dp[u][j],dp[u][j-k]+<span style="color: #000000;">dp[son][k]);
            }
        }
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=m;i&gt;=wei[u];i--)dp[u][i] = dp[u][i-wei[u]]+<span style="color: #000000;">val[u];
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;wei[u];i++)dp[u][i] = <span style="color: #800080;">0</span><span style="color: #000000;">;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;<span style="color: #000000;">m);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>,x;i&lt;=n;i++<span style="color: #000000;">){
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span>,&amp;wei[i],&amp;val[i],&amp;<span style="color: #000000;">x);
        </span><span style="color: #0000ff;">if</span>(~<span style="color: #000000;">x)Add(x,i);
        </span><span style="color: #0000ff;">else</span> root =<span style="color: #000000;"> i;
    }
    dfs(root);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,dp[root][m]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2>背包问题求方案数</h2>
<p>加一个数组，更新即可</p>
<p><a href="https://www.acwing.com/problem/content/submission/11/">https://www.acwing.com/problem/content/submission/11/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('07b38029-e952-4e30-9386-7f7f45715cf8')"><img id="code_img_closed_07b38029-e952-4e30-9386-7f7f45715cf8" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_07b38029-e952-4e30-9386-7f7f45715cf8" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('07b38029-e952-4e30-9386-7f7f45715cf8',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_07b38029-e952-4e30-9386-7f7f45715cf8" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(x,y) (x&gt;y?x:y)
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = 1e5+<span style="color: #800080;">7</span>,mod = 1e9+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn],ans[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;<span style="color: #000000;">m);
    fill(ans,ans</span>+n,<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>,x,y;i&lt;=n;i++<span style="color: #000000;">){
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;x,&amp;<span style="color: #000000;">y);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=m;j&gt;=x;j--<span style="color: #000000;">){
            </span><span style="color: #0000ff;">if</span>(dp[j]&lt;dp[j-x]+<span style="color: #000000;">y){
                ans[j] </span>= ans[j-<span style="color: #000000;">x];
            }</span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(dp[j] == dp[j-x]+<span style="color: #000000;">y){
                ans[j] </span>+= ans[j-<span style="color: #000000;">x];
                ans[j] </span>%=<span style="color: #000000;"> mod;
            }
            dp[j] </span>= max(dp[j],dp[j-x]+<span style="color: #000000;">y);
        }
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,ans[m]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h2>背包问题求具体方案</h2>
<p>求字典序最小的方案</p>
<p>倒着来一遍背包，然后正着扫描一遍</p>
<p><a href="https://www.acwing.com/problem/content/submission/12/">https://www.acwing.com/problem/content/submission/12/</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('510dfec1-8c7b-44ac-a375-d9ddcd70579e')"><img id="code_img_closed_510dfec1-8c7b-44ac-a375-d9ddcd70579e" class="code_img_closed" src="./images/背包问题0.png" alt="" /><img id="code_img_opened_510dfec1-8c7b-44ac-a375-d9ddcd70579e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('510dfec1-8c7b-44ac-a375-d9ddcd70579e',event)" src="./images/背包问题1.png" alt="" />
<div id="cnblogs_code_open_510dfec1-8c7b-44ac-a375-d9ddcd70579e" class="cnblogs_code_hide">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">author:revolIA</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#include</span>&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> max(x,y) (x&gt;y?x:y)
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
typedef </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ll;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = 1e3+<span style="color: #800080;">7</span>,mod = 1e9+<span style="color: #800080;">7</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dp[maxn][maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x[maxn],y[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;<span style="color: #000000;">m);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">){
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;x[i],&amp;<span style="color: #000000;">y[i]);
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=n;i&gt;=<span style="color: #800080;">1</span>;i--<span style="color: #000000;">){
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;x[i];j++<span style="color: #000000;">)
            dp[i][j] </span>= dp[i+<span style="color: #800080;">1</span><span style="color: #000000;">][j];
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=x[i];j&lt;=m;j++<span style="color: #000000;">)
            dp[i][j] </span>= max(dp[i+<span style="color: #800080;">1</span>][j],(dp[i+<span style="color: #800080;">1</span>][j-x[i]]+<span style="color: #000000;">y[i]));
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">){
        </span><span style="color: #0000ff;">if</span>(m&gt;=x[i] &amp;&amp; dp[i][m] == dp[i+<span style="color: #800080;">1</span>][m-x[i]]+<span style="color: #000000;">y[i]){
            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d </span><span style="color: #800000;">"</span><span style="color: #000000;">,i);
            m </span>-=<span style="color: #000000;"> x[i];
        }
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>