<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修c++指针全攻略' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>c++指针全攻略</center></div><div class='banquan'>原文出处:本文由博客园博主ys-fullStack提供。<br/>
原文连接:https://www.cnblogs.com/huyangshu-fs/p/11617216.html</div><br>
    <p><strong>1、指针概念理解</strong></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; int*&nbsp; p&nbsp; &nbsp; &nbsp; 定义一个指针（推荐使用这种写法int* ，理解上有好处）<br />&nbsp; &nbsp; &nbsp; &nbsp; p 　　　 指针变量；<br />&nbsp; &nbsp; &nbsp; &nbsp; * 　　　&nbsp; 间接运算符（访问符），代表访问该地址所指向的空间；<br />&nbsp; &nbsp; &nbsp; &nbsp; *p 　　&nbsp; &nbsp;指针所保存（指向）的地址中对应（指向）的值；<br />&nbsp; &nbsp; &nbsp; &nbsp; &amp;p 　　&nbsp; &nbsp;获取指针变量的内存地址（指针本身占用内存空间）；<br />&nbsp; &nbsp; &nbsp; &nbsp; 故 指针是</p>
<p>　　　　（1）通过间接的方式访问内存空间（直接方式是通过变量名称（内存空间名字）直接访问空间）；</p>
<p>　　　　（2）指针是一种保存变量内存地址的变量，自身也占用内存空间。<span style="font-family: 'Helvetica Neue', Helvetica, Verdana, Arial, sans-serif;"><br /></span></p>
<p>&nbsp; &nbsp; eg：</p>
<p>　&nbsp; &nbsp; 指针初始化的两种方式</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span> a = <span style="color: #800080;">40</span><span style="color: #000000;">;

</span><span style="color: #008000;">//</span><span style="color: #008000;">指针初始化方式第一种写法</span>
<span style="color: #0000ff;">int</span>* p;<span style="color: #008000;">//</span><span style="color: #008000;">p是指针变量，而不是*p</span>
p = &amp;a;<span style="color: #008000;">//</span><span style="color: #008000;">指针变量用来存放内存地址；注意，此处使用*p = &amp;a是错误的定义，应该是对p（指针变量）赋值，而不是*p（指针保存的地址指向的值）

</span><span style="color: #008000;">//</span><span style="color: #008000;">指针初始化方式第二种写法，实质是第一种写法的简化方式。</span>
<span style="color: #0000ff;">int</span>* p1 = &amp;<span style="color: #000000;">a;

cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;"> &amp;p--对指针变量取地址--输出指针变量的地址：</span><span style="color: #800000;">"</span> &lt;&lt; &amp;p &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;"> *p--该指针保存的地址对应的值--输出指针所存放的地址对应的在堆内存中的值：</span><span style="color: #800000;">"</span> &lt;&lt; *p &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span>;</pre>
</div>
<p>&nbsp;</p>
<pre><code><span style="font-size: 16px;"><strong><span style="font-family: 'Microsoft YaHei';">2、声明指向int类型的指针，即指针包含的地址对应的内存单元存储了一个整数</span></strong></span><br /></code></pre>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;">int* p = NULL;
</pre>
</div>
<p>　</p>
<p><span style="font-size: 16px;"><strong><code>&nbsp;3、<span style="font-family: 'Microsoft YaHei';">使用 指针 存储 由地址运算符&amp;&nbsp; 获取的地址</span></code></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span> age = <span style="color: #800080;">30</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span>* pa = &amp;<span style="color: #000000;">age;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">*pa = </span><span style="color: #800000;">"</span> &lt;&lt; *pa &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">pa = </span><span style="color: #800000;">"</span> &lt;&lt; pa &lt;&lt; endl; <span style="color: #008000;">//</span><span style="color: #008000;">age的内存地址</span>
cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">&amp;age = </span><span style="color: #800000;">"</span> &lt;&lt; &amp;age &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">指针自身的地址----&amp;pa = </span><span style="color: #800000;">"</span> &lt;&lt; &amp;pa &lt;&lt; endl; <span style="color: #008000;">//</span><span style="color: #008000;">指针自身的地址</span></pre>
</div>
<pre><code><span style="font-size: 16px;"><strong><span style="font-family: 'Microsoft YaHei';"><code>
4、const指针</code></span></strong></span></pre>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span> day = <span style="color: #800080;">30</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span>* <span style="color: #0000ff;">const</span> pDay = &amp;day; <span style="color: #008000;">//</span><span style="color: #008000;">指针包含的地址是常量---常量指针</span>
cout &lt;&lt; pDay &lt;&lt;<span style="color: #000000;"> endl;

</span><span style="color: #0000ff;">int</span> hour = <span style="color: #800080;">24</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span>* pHour = &amp;hour; <span style="color: #008000;">//</span><span style="color: #008000;">指针指向的数据是常量---指向常量的指针</span>
cout &lt;&lt; pHour &lt;&lt;<span style="color: #000000;"> endl;

</span><span style="color: #0000ff;">int</span> h = <span style="color: #800080;">24</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span>* <span style="color: #0000ff;">const</span> ph = &amp;h; <span style="color: #008000;">//</span><span style="color: #008000;">指针包含的地址以及指向的值都是常量---指向常量的常量指针</span>
cout &lt;&lt; ph &lt;&lt; endl;</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 16px;"><strong>&nbsp; 5、 声明指向内存块的指针，即void指针</strong></span></p>
<p><span style="font-size: 15px;">　&nbsp; void 指针是一种特殊的指针，表示为&ldquo;无类型指针&rdquo;，由于 void 指针没有特定的类型，因此它可以指向任何类型的数据。也就是说，任何类型的指针都可以直接赋值给 void 指针，而无需进行其他相关的强制类型转换。</span></p>
<p>&nbsp; &nbsp;eg:</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">void</span>*<span style="color: #000000;"> p1;
</span><span style="color: #0000ff;">int</span>*<span style="color: #000000;"> p2;
p1 </span>=<span style="color: #000000;"> p2;
p2 </span>= (<span style="color: #0000ff;">int</span>* )p1;</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; <span style="font-size: 16px;">6、野指针：</span></p>
<p>　　 把没有合法指向的指针称为&ldquo;野&rdquo;指针。因为&ldquo;野&rdquo;指针随机指向一块空间，该空间中存储的可能是其他程序的数据甚至是系统数据，故不能对&ldquo;野&rdquo;指针所指向的空间进行存取操作，否则轻者会引起程序崩溃，严重的可能导致整个系统崩溃。</p>
<p>&nbsp; &nbsp; eg：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span> *pi,a; <span style="color: #008000;">//</span><span style="color: #008000;">pi未初始化，无合法指向，为&ldquo;野&rdquo;指针</span>
*pi=<span style="color: #800080;">3</span>; <span style="color: #008000;">//</span><span style="color: #008000;">运行时错误！不能对&rdquo;野&rdquo;指针指向的空间做存入操作。该语句试图把 3 存入&ldquo;野&rdquo;指针pi所指的随机空间中，会产生运行时错误。</span>
a=*pi; <span style="color: #008000;">//</span><span style="color: #008000;">运行时错误！不能对&rdquo;野&rdquo;指针指向的空间取操作。该语句试图从&ldquo;野&rdquo;指针pi所指的空间中取出数据，然后赋给变量a同样会产生运行时错误。</span></pre>
</div>
<p>&nbsp; &nbsp;</p>
<p><span style="font-size: 16px;"><strong>　7、指针运算</strong></span></p>
<p>&nbsp; &nbsp; eg:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; int* p = 4;</p>
<p>　　 p++;</p>
<p><img src="./images/c++指针全攻略0.png" alt="" width="654" height="228" /></p>
<p><span style="font-family: 'Helvetica Neue', Helvetica, Verdana, Arial, sans-serif;">&nbsp; &nbsp; &nbsp; 指针变量 p 进行 p++，</span><span style="font-family: 'Helvetica Neue', Helvetica, Verdana, Arial, sans-serif;">p 是一个 int 类型的指针，指向内存地址 0x10000008 处。则 p++ 将指向与 p 相邻的下一个内存地址，由于 int 型数据占 4 个字节，因此 p++ 所指的内存地址为 1000000b。这种运算并不会改变指针变量 p 自身的地址，只是改变了它所指向的地址（存放的地址）。</span></p>
<pre><code><span style="font-size: 15px;"><code>8、补充：<br />  c++指针内存空间释放</code></span></pre>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span>* pb = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span>* pb2 = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span>[<span style="color: #800080;">4</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">delete</span><span style="color: #000000;"> pb;
</span><span style="color: #0000ff;">delete</span>[] pb2;</pre>
</div>
<pre><code><span style="font-size: 15px;"><code>&nbsp;</code></span></pre>
<p><span style="font-size: 16px;"><strong>9、数组与指针：</strong></span></p>
<p><span style="font-size: 15px;">&nbsp; &nbsp;（1）一维数组和指针 </span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span>* p,a[<span style="color: #800080;">10</span>] = {<span style="color: #800080;">1</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">4</span>,<span style="color: #800080;">5</span>}; <br />p = a;<span style="color: #008000;">//</span><span style="color: #008000;">p指向数组a的首地址，即p=&amp;a[0],数组名相当于数组首元素的地址a[0]

</span><span style="color: #008000;">//</span><span style="color: #008000;">数组的访问方式
</span><span style="color: #008000;">//</span><span style="color: #008000;">1、直接访问---数组名[下标]</span>
cout &lt;&lt; a[<span style="color: #800080;">1</span>] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;

</span><span style="color: #008000;">//</span><span style="color: #008000;">2、间接访问---*(数组名+i)</span>
cout &lt;&lt; *(a+<span style="color: #800080;">2</span>) &lt;&lt; endl;<span style="color: #008000;">//</span><span style="color: #008000;">  a+2表示数组首地址向后移动2个位置，a+2相当于&amp;a[2]

</span><span style="color: #008000;">//</span><span style="color: #008000;">3、间接访问--- *（指针变量）</span>
<span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;<span style="color: #800080;">10</span>; i++<span style="color: #000000;">) {
    cout </span>&lt;&lt; * p++ &lt;&lt; endl;<span style="color: #008000;">//</span><span style="color: #008000;">++运算符的优先级要高于*</span>
}</pre>
</div>
<pre><code><span style="font-size: 15px;"><code>
指针数组：存储指针的数组，int* p[5]</code></span></pre>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span><span style="color: #000000;"> a0,a1,a2,a3;
</span><span style="color: #0000ff;">int</span>* b[<span style="color: #800080;">5</span><span style="color: #000000;">];
b[</span><span style="color: #800080;">0</span>] = &amp;<span style="color: #000000;">a0;
b[</span><span style="color: #800080;">1</span>] = &amp;<span style="color: #000000;">a1;
b[</span><span style="color: #800080;">2</span>] = &amp;a2;</pre>
</div>
<pre></pre>
<pre><code><span style="font-size: 15px;"><code>
数组指针：指向一维数组的指针,int (*p)[5]<br /></code></span></pre>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">int</span> c[<span style="color: #800080;">3</span>][<span style="color: #800080;">4</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">int</span> (*p)[<span style="color: #800080;">4</span>];<span style="color: #008000;">//</span><span style="color: #008000;">定义一个数组指针，指向含4个元素的一维数组</span>
    p = c;<span style="color: #008000;">//</span><span style="color: #008000;">二维数组的首地址赋给p，即a[0],或&amp;a[0][0]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 15px;">（2）二维数组 </span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">int</span>*<span style="color: #000000;"> p; <br />int a[</span><span style="color: #800080;">3</span>][<span style="color: #800080;">4</span>] = {{<span style="color: #800080;">1</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">4</span>},{<span style="color: #800080;">5</span>,<span style="color: #800080;">6</span>,<span style="color: #800080;">7</span>,<span style="color: #800080;">8</span>},{<span style="color: #800080;">9</span>,<span style="color: #800080;">10</span>,<span style="color: #800080;">11</span>,<span style="color: #800080;">12</span>}}; <br />p = &amp;a[<span style="color: #800080;">0</span>][<span style="color: #800080;">0</span><span style="color: #000000;">];

</span><span style="color: #008000;">//</span><span style="color: #008000;">通过数组下边直接访问</span>

<span style="color: #008000;">/*</span><span style="color: #008000;">
 *   通过地址间接访问，即*(*(a+i)j)的形式，二维数组可看成由特殊一维数组组成的一维数组，a[i]可看成一个由N列组成的一维数组， a表示a[0][0]的地址
 *   a[i]等价于*(a+i),表示i的首行地址，i行对应的一维数组的数组名。
 *   a[i]+0 &lt;---&gt; *(a+i)+0 &lt;---&gt; &amp;a[i][0]
 *   a[i]+j &lt;---&gt; *(a+i)+j &lt;---&gt; &amp;a[i][j]
 *   地址即指针，通过间接运算符*,可以访问内存空间，则
 *   *(a[i]+j) &lt;---&gt; *(*(a+i)+j) &lt;---&gt; *&amp;a[i][j] &lt;---&gt; a[i][j]
 </span><span style="color: #008000;">*/</span><span style="color: #000000;">

cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">a[0][0]的地址：</span><span style="color: #800000;">"</span> &lt;&lt; a &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">a[0][1]的地址：</span><span style="color: #800000;">"</span> &lt;&lt; a+<span style="color: #800080;">1</span> &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">a[1][0]的地址：</span><span style="color: #800000;">"</span> &lt;&lt; a[<span style="color: #800080;">1</span>]+<span style="color: #800080;">0</span> &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; *(a+<span style="color: #800080;">1</span>)+<span style="color: #800080;">0</span> &lt;&lt;<span style="color: #000000;"> endl;
cout </span>&lt;&lt; &amp;a[<span style="color: #800080;">1</span>][<span style="color: #800080;">0</span>] &lt;&lt; endl;</pre>
</div>
<pre><code><span style="font-size: 15px;"><code><br /><br /><span style="font-size: 16px;"><strong>10、函数与指针：</strong></span><br />（1）指针函数，函数返回调用者某个地址即指针类型;<br /></code></span></pre>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">char</span>* str_cat(<span style="color: #0000ff;">char</span>* c1, <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> c2){
    </span><span style="color: #0000ff;">char</span>* p1 =<span style="color: #000000;"> c1;
    </span><span style="color: #0000ff;">char</span>* p2 =<span style="color: #000000;"> c2;
    </span><span style="color: #0000ff;">while</span> (*p1!=<span style="color: #800000;">'</span><span style="color: #800000;">\0</span><span style="color: #800000;">'</span><span style="color: #000000;">){
        p1</span>++<span style="color: #000000;">;
    }

    </span>*p1++=<span style="color: #800000;">'</span> <span style="color: #800000;">'</span><span style="color: #000000;">;

    </span><span style="color: #0000ff;">while</span> (*p2!=<span style="color: #800000;">'</span><span style="color: #800000;">\0</span><span style="color: #800000;">'</span><span style="color: #000000;">){
        </span>*p1++=*p2++<span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c1;</span>//返回结果为指针类型</pre>
<pre><code><span style="color: #000000;">}</span></pre>
</div>
<pre></pre>
<p>&nbsp;（2）函数指针---指向函数的指针</p>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">int</span>* pf (<span style="color: #0000ff;">int</span>, <span style="color: #0000ff;">int</span>);<span style="color: #008000;">//</span><span style="color: #008000;">函数的返回值为int指针类型，int*</span>
    <span style="color: #0000ff;">int</span> (*pf1) (<span style="color: #0000ff;">int</span>, <span style="color: #0000ff;">int</span>);<span style="color: #008000;">//</span><span style="color: #008000;">函数指针变量pf，可以指向任意含有两个整形参数，且返回值为整形的函数</span>
    pf = &amp;<span style="color: #000000;">fun;
    pf </span>= fun;<span style="color: #008000;">//</span><span style="color: #008000;">可以不用取地址，一个函数标识符就代表了它的地址<br /></span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; 调用函数指针的方式两种方式</p>
<div class="cnblogs_code">
<pre>    x = (*<span style="color: #000000;">func)();
    x </span>= func();</pre>
</div>
<p>&nbsp;</p>
<p>非常感谢您的阅读，如需转载，请注明出处，本文链接<a id="Editor_Edit_hlEntryLink" title="view: c++指针全攻略" href="https://www.cnblogs.com/huyangshu-fs/p/11617216.html" target="_blank">https://www.cnblogs.com/huyangshu-fs/p/11617216.html</a></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>