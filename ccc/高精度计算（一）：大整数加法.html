<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修高精度计算（一）：大整数加法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>高精度计算（一）：大整数加法</center></div><div class='banquan'>原文出处:本文由博客园博主aTeacher提供。<br/>
原文连接:https://www.cnblogs.com/cs-whut/p/11190639.html</div><br>
    <p>&nbsp; &nbsp; &nbsp; C/C++中的int 类型能表示的范围是-2<sup>31</sup>~2<sup>31</sup> &ndash; 1。unsigned 类型能表示的范围是 0 ~2<sup>32</sup></p>
<p>&ndash; 1，即 0~4294967295。所以，int 和unsigned 类型变量，都不能保存超过10 位的整数。<br />有时我们需要参与运算的数，可能会远远不止10 位，例如要求100！的精确值。即便使用能表示的很大数值范围的double 变量，但是由于double变量只有64 位，double 变量的精度也不足以表示一个超过100 位的整数。一般我们称这种基本数据类型无法表示的整数为大整数。如何表示和存放大整数呢？最简单的思想就是：用数组存放和表示大整数。一个数组元素，存放大整数中的一位。</p>
<p>【例1】大整数加法。</p>
<p>&nbsp; &nbsp; &nbsp; 输入两个不超过200位的非负大整数a和b，求a+b的值。</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 首先要解决的就是存储 200 位整数的问题。显然，任何C/C++固有类型的变量都无法保<br />存它。最直观的想法是可以用一个字符串来保存它。</p>
<p>&nbsp; &nbsp; &nbsp; 由于字符串本质上是一个字符数组，因此为了编程更方便，可以用数组unsigned a[200]来保存一个200 位的整数，让a[0]存放个位数，a[1]存放十位数，a[2]存放百位数&hellip;&hellip;。<br />&nbsp; &nbsp; &nbsp;实现两个大整数相加的方法很简单，就是模拟小学生列竖式做加法，从个位<br />开始逐位相加，超过或达到10 则进位。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;stdio.h&gt;<br />#include &lt;string.h&gt;<br />#define MAX_LEN 201<br />void bigNumAdd(char a[],char b[],char c[])<br />{<br />&nbsp; &nbsp; &nbsp;int i,j,n1,n2,n;<br />&nbsp; &nbsp; &nbsp;int num1[MAX_LEN]={0},num2[MAX_LEN]={0};<br />&nbsp; &nbsp; &nbsp;// 将a和b中存储的字符串形式的整数转换到num1和num2中去，<br />&nbsp; &nbsp; &nbsp;// num1[0]对应于个位、num1[1]对应于十位、&hellip;&hellip;<br />&nbsp; &nbsp; &nbsp;n1 = strlen(a);<br />&nbsp; &nbsp; &nbsp;j = 0;<br />&nbsp; &nbsp; for (i = n1 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[j++] = a[i] - '0';<br />&nbsp; &nbsp; n2 = strlen(b);<br />&nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; for (i = n2 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num2[j++] = b[i] - '0';<br />&nbsp; &nbsp; n=n1&gt;n2?n1:n2;<br />&nbsp; &nbsp; for (i = 0;i &lt; n ; i ++ )<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i] += num2[i];    // 逐位相加<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (num1[i] &gt;= 10 )    // 处理进位<br />&nbsp; &nbsp; &nbsp; &nbsp; {   <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i] -= 10;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i+1] ++;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp;j=0;<br />&nbsp; &nbsp; &nbsp;if (num1[n]!=0) c[j++]=num1[n]+'0';<br />&nbsp; &nbsp; &nbsp;for(i=n-1; i&gt;=0; i--) <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c[j++]=num1[i]+'0';<br />&nbsp; &nbsp; &nbsp;c[j]='\0';<br />}<br />int main()<br />{<br />&nbsp; &nbsp; &nbsp;char a[MAX_LEN],b[MAX_LEN],c[MAX_LEN+1];<br />&nbsp; &nbsp; &nbsp;scanf("%s",a);<br />&nbsp; &nbsp; &nbsp;scanf("%s",b);<br />&nbsp; &nbsp; &nbsp;bigNumAdd(a,b,c);<br />&nbsp; &nbsp; &nbsp;printf("%s\n",c);<br />&nbsp; &nbsp; &nbsp;return 0;<br />}</p>
<p><strong><span style="font-size: 16px;">【例2】Integer Inquiry （POJ 1503）</span></strong></p>
<p><strong>Description</strong></p>
<p>One of the first users of BIT's new supercomputer was Chip Diller. He extended his exploration of powers of 3 to go from 0 to 333 and he explored taking various sums of those numbers. <br />``This supercomputer is great,'' remarked Chip. ``I only wish Timothy were here to see these results.'' (Chip moved to a new apartment, once one became available on the third floor of the Lemon Sky apartments on Third Street.) <br /><strong>Input</strong></p>
<p>The input will consist of at most 100 lines of text, each of which contains a single VeryLongInteger. Each VeryLongInteger will be 100 or fewer characters in length, and will only contain digits (no VeryLongInteger will be negative). </p>
<p>The final input line will contain a single zero on a line by itself. <br /><strong>Output</strong></p>
<p>Your program should output the sum of the VeryLongIntegers given in the input.<br /><strong>Sample Input</strong></p>
<p>123456789012345678901234567890<br />123456789012345678901234567890<br />123456789012345678901234567890<br />0<br /><strong>Sample Output</strong></p>
<p>370370367037037036703703703670</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路1。</p>
<p>&nbsp; &nbsp; &nbsp; 直接调用例1中设计的函数void bigNumAdd(char a[],char b[],char c[])完成。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序1。&nbsp;</p>
<p style="margin-left: 30px;">#include &lt;stdio.h&gt;<br />#include &lt;string.h&gt;<br />#define MAX_LEN 201<br />void bigNumAdd(char a[],char b[],char c[])<br />{<br />&nbsp; &nbsp; &nbsp; int i,j,n1,n2,n;<br />&nbsp; &nbsp; &nbsp; int num1[MAX_LEN]={0},num2[MAX_LEN]={0};<br />&nbsp; &nbsp; &nbsp; // 将a和b中存储的字符串形式的整数转换到num1和num2中去，<br />&nbsp; &nbsp; &nbsp; // num1[0]对应于个位、num1[1]对应于十位、&hellip;&hellip;<br />&nbsp; &nbsp; &nbsp; n1 = strlen(a);<br />&nbsp; &nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; &nbsp; for (i = n1 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[j++] = a[i] - '0';<br />&nbsp; &nbsp; &nbsp; n2 = strlen(b);<br />&nbsp; &nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; &nbsp; for (i = n2 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num2[j++] = b[i] - '0';<br />&nbsp; &nbsp; &nbsp; n=n1&gt;n2?n1:n2;<br />&nbsp; &nbsp; &nbsp; for (i = 0;i &lt; n ; i ++ )<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i] += num2[i]; // 逐位相加<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (num1[i] &gt;= 10 ) // 处理进位<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i] -= 10;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i+1] ++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; j=0;<br />&nbsp; &nbsp; &nbsp; if (num1[n]!=0) c[j++]=num1[n]+'0';<br />&nbsp; &nbsp; &nbsp; for(i=n-1; i&gt;=0; i--) <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c[j++]=num1[i]+'0';<br />&nbsp; &nbsp; &nbsp; c[j]='\0';<br />}<br />int main()<br />{<br />&nbsp; &nbsp; &nbsp; char a[MAX_LEN],c[MAX_LEN]={'0'};<br />&nbsp; &nbsp; &nbsp; scanf("%s",a);<br />&nbsp; &nbsp; &nbsp; while (1)<br />&nbsp; &nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(strlen(a)==1 &amp;&amp; a[0]=='0')<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bigNumAdd(c,a,c);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scanf("%s",a);<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; printf("%s\n",c);<br />&nbsp; &nbsp; &nbsp; return 0;<br />}</p>
<p style="margin-left: 30px;">（3）编程思路2。</p>
<p>&nbsp; &nbsp; &nbsp; 在上面的程序中，每次调用函数都需要将被加数和加数字符串转换成数值，还需要将计算出的和转换成字符串。下面的程序不调用函数，直接通过循环完成多个数的累加。</p>
<p style="margin-left: 30px;">（4）源程序2。</p>
<p style="margin-left: 30px;">#include &lt;stdio.h&gt;<br />#include &lt;string.h&gt;<br />#define MAX_LEN 201<br />int main()<br />{<br />&nbsp; &nbsp; &nbsp; char a[MAX_LEN];<br />&nbsp; &nbsp; &nbsp; int sum[MAX_LEN]={0},tmp[MAX_LEN]={0};<br />&nbsp; &nbsp; &nbsp; int i,j,n=0,n1;<br />&nbsp; &nbsp; &nbsp; scanf("%s",a);<br />&nbsp; &nbsp; &nbsp; while (1)<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(strlen(a)==1 &amp;&amp; a[0]=='0')<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n1 = strlen(a);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (i = n1 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tmp[j++] = a[i] - '0';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (n&lt;n1)  n=n1+1;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for (i = 0;i &lt; n ; i ++ )<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sum[i] += tmp[i];   // 逐位相加<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (sum[i] &gt;= 10 )  // 处理进位<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sum[i] -= 10;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sum[i+1] ++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scanf("%s",a);<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; bool isBeginZero = false;<br />&nbsp; &nbsp; &nbsp; for( i = n; i &gt;= 0; i -- )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(isBeginZero)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf("%d", sum[i]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else if (sum[i]) <br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf("%d", sum[i]);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isBeginZero = true;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; if(! isBeginZero)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("0");<br />&nbsp; &nbsp; &nbsp; printf("\n");<br />&nbsp; &nbsp; &nbsp; return 0;<br />}</p>
<p><strong>【例3】序列（POJ 3982）</strong></p>
<p><strong>Description</strong></p>
<p>数列A满足An = An-1 + An-2 + An-3, n &gt;= 3 </p>
<p>编写程序，给定A0, A1 和 A2, 计算A99<br />Input</p>
<p>输入包含多行数据 </p>
<p>每行数据包含3个整数A0, A1, A2 (0 &lt;= A0, A1, A2 &lt;= 32767) <br />数据以EOF结束<br />Output</p>
<p>对于输入的每一行输出A99的值<br />Sample Input</p>
<p>1 1 1<br />Sample Output</p>
<p>69087442470169316923566147</p>
<p>&nbsp; &nbsp; &nbsp; （1）编程思路。</p>
<p>&nbsp; &nbsp; &nbsp; 直接调用例1中设计的函数void bigNumAdd(char a[],char b[],char c[])完成大整数的相加。</p>
<p>&nbsp; &nbsp; &nbsp; （2）源程序。</p>
<p style="margin-left: 30px;">#include &lt;stdio.h&gt;</p>
<p style="margin-left: 30px;">#include &lt;string.h&gt;</p>
<p style="margin-left: 30px;">#define MAX_LEN 201<br />void bigNumAdd(char a[],char b[],char c[])<br />{<br />&nbsp; &nbsp; &nbsp; int i,j,n1,n2,n;<br />&nbsp; &nbsp; &nbsp; int num1[MAX_LEN]={0},num2[MAX_LEN]={0};<br />&nbsp; &nbsp; &nbsp; // 将a和b中存储的字符串形式的整数转换到num1和num2中去，<br />&nbsp; &nbsp; &nbsp; // num1[0]对应于个位、num1[1]对应于十位、&hellip;&hellip;<br />&nbsp; &nbsp; &nbsp; n1 = strlen(a);<br />&nbsp; &nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; &nbsp; for (i = n1 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num1[j++] = a[i] - '0'<em id="__mceDel"><em id="__mceDel">;<br />    </em></em>&nbsp; &nbsp; &nbsp; n2 = strlen(b);<br />&nbsp; &nbsp; &nbsp; j = 0;<br />&nbsp; &nbsp; &nbsp; for (i = n2 - 1;i &gt;= 0 ; i --)<br />&nbsp; &nbsp; &nbsp; num2[j++] = b[i] - '0';<br />&nbsp; &nbsp; &nbsp; n=n1&gt;n2?n1:n2;<br />&nbsp; &nbsp; &nbsp; for (i = 0;i &lt; n ; i ++ )<br />&nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;num1[i] += num2[i]; // 逐位相加<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (num1[i] &gt;= 10 ) // 处理进位<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num1[i] -= 10;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num1[i+1] ++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; j=0;<br />&nbsp; &nbsp; &nbsp; if (num1[n]!=0) c[j++]=num1[n]+'0';<br />&nbsp; &nbsp; &nbsp; for(i=n-1; i&gt;=0; i--) <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c[j++]=num1[i]+'0';<br />&nbsp; &nbsp; &nbsp; c[j]='\0';<br />}<br />int main()<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp;char a[MAX_LEN],b[MAX_LEN],c[MAX_LEN],sum[MAX_LEN];<br />&nbsp; &nbsp; &nbsp; &nbsp;while (scanf("%s%s%s",a,b,c)!=EOF)<br />&nbsp; &nbsp; &nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (int i=3;i&lt;=99;i++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bigNumAdd(a,b,a);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bigNumAdd(a,c,sum);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strcpy(a,b);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strcpy(b,c);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strcpy(c,sum);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("%s\n",sum);<br />&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; &nbsp;return 0;<br />}</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>