<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修图论2——拓扑排序' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>图论2——拓扑排序</center></div><div class='banquan'>原文出处:本文由博客园博主idyllic提供。<br/>
原文连接:https://www.cnblogs.com/idyllic/p/10827501.html</div><br>
    <p>拓扑排序：*保证无环&nbsp;</p><p>1：模板（若要字典序则采用优先队列）</p><div>#include&lt;iostream&gt;</div><p>&nbsp;</p><div>#include&lt;cstring&gt;</div><div>#include&lt;queue&gt;&nbsp;</div><div>int s[100010],f[100010];</div><div>int vis[100010];</div><div>using namespace std;</div><div>int main()</div><div>{</div><div><span style="white-space:pre">	</span>int n,m,i,temp,flag,u,v;</div><div><span style="white-space:pre">	</span>queue&lt;int&gt; q;</div><div><span style="white-space:pre">	</span>//priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; q;</div><div><span style="white-space:pre">	</span>memset(s,0,sizeof(s));</div><div><span style="white-space:pre">	</span>memset(f,0,sizeof(f));</div><div><span style="white-space:pre">	</span>cin&gt;&gt;n&gt;&gt;m;</div><div><span style="white-space:pre">	</span>for (i=1;i&lt;=m;i++)</div><div><span style="white-space:pre">	</span>{</div><div><span style="white-space:pre">		</span>cin&gt;&gt;u&gt;&gt;v;</div><div><span style="white-space:pre">		</span>s[v]++;</div><div><span style="white-space:pre">		</span>f[u]=f[u]+v;</div><div><span style="white-space:pre">		</span>f[v]=f[v]+u;</div><div><span style="white-space:pre">	</span>}</div><div><span style="white-space:pre">	</span>for (i=1;i&lt;=n;i++)</div><div><span style="white-space:pre">	</span>{</div><div><span style="white-space:pre">		</span>if (s[i]==0)&nbsp;</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>q.push(i);</div><div><span style="white-space:pre">			</span>vis[i]=1;</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">	</span>}</div><div><span style="white-space:pre">	</span>flag=0;</div><div><span style="white-space:pre">	</span>while (!q.empty())</div><div><span style="white-space:pre">	</span>{</div><div><span style="white-space:pre">		</span>temp=q.front();<span style="white-space:pre">	</span></div><div><span style="white-space:pre">		</span>q.pop();<span style="white-space:pre">		</span></div><div><span style="white-space:pre">		</span>f[f[temp]]-=temp;</div><div><span style="white-space:pre">		</span>s[f[temp]]--;</div><div><span style="white-space:pre">		</span>//temp=q.top();</div><div><span style="white-space:pre">		</span>if (flag)&nbsp;</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>cout&lt;&lt;" ";</div><div><span style="white-space:pre">			</span>flag=1;</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>cout&lt;&lt;temp;</div><div><span style="white-space:pre">		</span>if (s[f[temp]]==0&amp;&amp;!vis[f[temp]])&nbsp;</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>q.push(f[temp]);</div><div><span style="white-space:pre">			</span>vis[f[temp]]=1;</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">	</span>}</div><div><span style="white-space:pre">	</span>cout&lt;&lt;endl;</div><div><span style="white-space:pre">	</span>return 0;</div><div>}</div><div>2：建立超级汇点</div><p>即，存在多个连通块，进行字典序拓扑。先用并查集分块。exm:<a id="problem-origin" href="https://vjudge.net/problem/2401174/origin" target="_blank" style="box-sizing: inherit; color: #0275d8; text-decoration-line: none; touch-action: manipulation; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px;">ZOJ - 4109</a></p><p>AC代码：</p><div>#include&lt;queue&gt;</div><div>#include&lt;cstring&gt;</div><div>#include&lt;stdio.h&gt;</div><div>#include&lt;iostream&gt;</div><div>#include&lt;vector&gt;</div><div>using namespace std;&nbsp;</div><div>int edge[2000010],next[2000010],end[1000010];</div><div>bool vis[1000010];</div><div>int ans[1000010];</div><div>int f[1000010];</div><div>int find(int m)</div><div>{</div><div><span style="white-space:pre">	</span>if (m==f[m]) return m;</div><div><span style="white-space:pre">	</span>else return find(f[m]);</div><div>}</div><div>void merge(int i,int t)</div><div>{</div><div><span style="white-space:pre">	</span>int t1=find(i);</div><div><span style="white-space:pre">	</span>int t2=find(t);</div><div><span style="white-space:pre">	</span>if (t1==t2) return;</div><div><span style="white-space:pre">	</span>if (t1&gt;t2) f[t1]=t2;</div><div><span style="white-space:pre">	</span>else f[t2]=t1;</div><div>}</div><div>int main()</div><div>{</div><div><span style="white-space:pre">	</span>long long t,n,m,minj,num,sum,jj,k,j,i,u,v,p;</div><div><span style="white-space:pre">	</span>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; q;</div><div><span style="white-space:pre">	</span>scanf("%lld",&amp;t);</div><div><span style="white-space:pre">	</span>for (k=1;k&lt;=t;k++)</div><div><span style="white-space:pre">	</span>{</div><div><span style="white-space:pre">		</span>scanf("%lld%lld",&amp;n,&amp;m);</div><div><span style="white-space:pre">		</span>for (i=0;i&lt;=n;i++)</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>f[i]=i;</div><div><span style="white-space:pre">			</span>vis[i]=0;</div><div><span style="white-space:pre">			</span>end[i]=0;</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>for (i=1;i&lt;=m;i++)</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>scanf("%lld%lld",&amp;u,&amp;v);</div><div><span style="white-space:pre">			</span>merge(u,v);</div><div><span style="white-space:pre">			</span>if (end[u]==0)</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>end[u]=i*2-1;</div><div><span style="white-space:pre">				</span>edge[i*2-1]=v;</div><div><span style="white-space:pre">				</span>next[i*2-1]=0;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">			</span>else</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>next[i*2-1]=end[u];</div><div><span style="white-space:pre">				</span>edge[i*2-1]=v;</div><div><span style="white-space:pre">				</span>end[u]=i*2-1;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">			</span>if (end[v]==0)</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>end[v]=i*2;</div><div><span style="white-space:pre">				</span>edge[i*2]=u;</div><div><span style="white-space:pre">				</span>next[i*2]=0;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">			</span>else</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>next[i*2]=end[v];</div><div><span style="white-space:pre">				</span>edge[i*2]=u;</div><div><span style="white-space:pre">				</span>end[v]=i*2;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>sum=0;</div><div><span style="white-space:pre">		</span>for (i=1;i&lt;=n;i++)</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>if (i==f[i])&nbsp;</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>sum++;</div><div><span style="white-space:pre">				</span>ans[sum]=i;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>cout&lt;&lt;sum&lt;&lt;endl;</div><div><span style="white-space:pre">		</span>for (i=1;i&lt;=sum;i++)</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>vis[ans[i]]=1;</div><div><span style="white-space:pre">			</span>q.push(ans[i]);</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>while (!q.empty())</div><div><span style="white-space:pre">		</span>{</div><div><span style="white-space:pre">			</span>if (q.top()!=1) cout&lt;&lt;" ";</div><div><span style="white-space:pre">			</span>cout&lt;&lt;q.top();</div><div><span style="white-space:pre">			</span>p=end[q.top()];</div><div><span style="white-space:pre">			</span>q.pop();</div><div><span style="white-space:pre">			</span>while (p!=0)</div><div><span style="white-space:pre">			</span>{</div><div><span style="white-space:pre">				</span>if (!vis[edge[p]])&nbsp;</div><div><span style="white-space:pre">				</span>{</div><div><span style="white-space:pre">					</span>q.push(edge[p]);&nbsp;</div><div><span style="white-space:pre">					</span>vis[edge[p]]=1;</div><div><span style="white-space:pre">				</span>}</div><div><span style="white-space:pre">				</span>p=next[p];&nbsp;</div><div><span style="white-space:pre">			</span>}</div><div><span style="white-space:pre">		</span>}</div><div><span style="white-space:pre">		</span>cout&lt;&lt;endl;</div><div><span style="white-space:pre">	</span>}</div><div><span style="white-space:pre">	</span>return 0;</div><div>}</div><p>&nbsp;</p><p><span style="white-space:pre">	</span>&nbsp;</p><p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>