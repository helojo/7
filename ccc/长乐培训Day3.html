<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修长乐培训Day3' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>长乐培训Day3</center></div><div class='banquan'>原文出处:本文由博客园博主Ra煞提供。<br/>
原文连接:https://www.cnblogs.com/I-Love-You-520/p/11239720.html</div><br>
    <h2>T1 奶牛晒衣服</h2>
<h3><a title="奶牛晒衣服" href="https://www.luogu.org/problemnew/show/P1843" target="_blank">题目</a></h3>
<p>【题目描述】</p>
<p>在熊大妈英明的带领下，时针和他的同伴生下了许多牛宝宝。熊大妈决定给每个宝宝都穿上可爱的婴儿装。于是，为牛宝宝洗晒衣服就成了很不爽的事情。</p>
<p>圣人王担负起了这个重任。洗完衣服后，你就要弄干衣服。衣服在自然条件下用1的时间可以晒干A点湿度。抠门的熊大妈买了1台烘衣机。</p>
<p>使用烘衣机可以让你用1的时间使1件衣服除开自然晒干的A点湿度外，还可烘干B点湿度，但在1的时间内只能对1件衣服使用。</p>
<p>N件的衣服因为种种原因而不一样湿，现在告诉你每件衣服的湿度，要你求出弄干所有衣服的最少时间（湿度为0为干）。</p>
<p>【输入格式】</p>
<p>第一行N，A，B，接下来N行，每行一个数，表示衣服的湿度。</p>
<p>【输出格式】</p>
<p>一行，最少时间。</p>
<p>【输入样例】</p>
<p>3 2 1</p>
<p>1</p>
<p>2</p>
<p>3</p>
<p>【输出样例】</p>
<p>1</p>
<p>【数据规模】</p>
<p>1&lt;=湿度,A,B&lt;=500000,1&lt;=N&lt;=500000。</p>
<h3>解析</h3>
<p>第一题依旧是送分的（安慰一下其他题爆零的情绪QAQ）。</p>
<p>直接二分即可，每次循环中只需要判断s[i]（湿度）与a*mid（mid为天数）的大小就可以了。</p>
<p>最后的答案即为l。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('fefce498-017b-45ae-8e5b-8e70ea7883c7')"><img id="code_img_closed_fefce498-017b-45ae-8e5b-8e70ea7883c7" class="code_img_closed" src="./images/长乐培训Day30.png" alt="" /><img id="code_img_opened_fefce498-017b-45ae-8e5b-8e70ea7883c7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('fefce498-017b-45ae-8e5b-8e70ea7883c7',event)" src="./images/长乐培训Day31.png" alt="" />
<div id="cnblogs_code_open_fefce498-017b-45ae-8e5b-8e70ea7883c7" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span> n,a,b,s[<span style="color: #800080;">500100</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> l,r,mid;
</span><span style="color: #0000ff;">bool</span> cmp(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">return</span> x&gt;<span style="color: #000000;">y;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("dry.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("dry.out","w",stdout);</span>
    n=read(),a=read(),b=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        s[i]</span>+=<span style="color: #000000;">read();
        r</span>+=<span style="color: #000000;">s[i];
    }
    </span><span style="color: #0000ff;">while</span>(l&lt;=<span style="color: #000000;">r)
    {
        </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
        mid</span>=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">if</span>(s[i]-a*mid&gt;<span style="color: #800080;">0</span><span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">if</span>((s[i]-a*mid)%b==<span style="color: #800080;">0</span>) ans+=(s[i]-a*mid)/<span style="color: #000000;">b;
                </span><span style="color: #0000ff;">else</span> ans+=(s[i]-a*mid)/b+<span style="color: #800080;">1</span><span style="color: #000000;">;
            }
        </span><span style="color: #0000ff;">if</span>(ans&lt;=mid) r=mid-<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span> l=mid+<span style="color: #800080;">1</span><span style="color: #000000;">;
    }
    cout</span>&lt;&lt;<span style="color: #000000;">l;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdout);</span>
}</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T2 解密文件</h2>
<h3><a title="解密文件" href="https://www.luogu.org/problem/T89527" target="_blank">题目</a></h3>
<p>【题目描述】</p>
<p>&nbsp;已知英语中26个字母出现的概率p[0],p[1]&hellip;&hellip;,p[25]（它们的和为1），分别表示&rsquo;a&rsquo;, &lsquo;b&rsquo;,&lsquo;c&rsquo;&hellip;&hellip;出现的概率（大写字母和小写字母被认为是一样的）。</p>
<p>现在有一个加密过的文件，加密方法是将原文件中的每一个字母进行相同的变换，其他的字符不变，变换的方法如下：</p>
<p>如果将a到z编号为0到25，那么字母i将被替换成(i+k) mod 26，0&lt;=k&lt;26。原来是大写的字母，仍然是大写，原来是小写的字母仍然是小写。</p>
<p>但是你并不知道k的值，所以只好枚举。因为知道26个字母出现的频率，所以你可以选择一个尽量好的k，使得频率的方差和最小，方差和定义如下：</p>
<p>假设你枚举的k还原出来的原文件中的26个字母出现的概率为x[0], x[1], &hellip;&hellip;, x[25]，那么方差和为：(p[0]-x[0])^2 + (p[1]-x[1])^2 + &hellip;&hellip; + (p[25]-x[25])^2。</p>
<p>如果有两个相同的k一样好，那么选较小的k。</p>
<p>最后输出解密出的原文件。</p>
<p>【输入格式】</p>
<p>前26行分别是26个字母出现的概率。</p>
<p>接下来是一个只含有26个大小写字母和空格，换行符，标点符号，阿拉伯数字等的文本。</p>
<p>【输出格式】</p>
<p>解密过的文本。</p>
<p>【输入样例】</p>
<p>0.109375</p>
<p>0.000000</p>
<p>0.062500</p>
<p>0.015625</p>
<p>0.109375</p>
<p>0.015625</p>
<p>0.015625</p>
<p>0.000000</p>
<p>0.062500</p>
<p>0.015625</p>
<p>0.000000</p>
<p>0.078125</p>
<p>0.062500</p>
<p>0.062500</p>
<p>0.093750</p>
<p>0.015625</p>
<p>0.015625</p>
<p>0.031250</p>
<p>0.046875</p>
<p>0.046875</p>
<p>0.046875</p>
<p>0.000000</p>
<p>0.000000</p>
<p>0.000000</p>
<p>0.093750</p>
<p>0.000000</p>
<p>L dp Ol Bxtldq, ru brx fdq fdoo ph VsdfhIobhu.</p>
<p>L dp jodg wr vhh brx.</p>
<p>Hqmrb pb frqwhvw.</p>
<p>【输出样例】</p>
<p>I am Li Yuqian, or you can call me SpaceFlyer.</p>
<p>I am glad to see you.</p>
<p>Enjoy my contest.</p>
<p>【数据规模】</p>
<p class="Default">输入文件不超过10k。</p>
<h3 class="Default">解析</h3>
<p>这题直接模拟即可，非常<span style="text-decoration: line-through;">恶心</span>有趣。</p>
<p>先预处理出a数组（每个数字所对应的字母，0-25表示a-z，26-51表示A-Z）。</p>
<p>处理文本我用的是string，直接while循环getline(cin,s[++temp])，这里有两个细节：</p>
<p>1、输入时要先输入一个&ldquo;\n&rdquo;（我也不知道为什么，反正它会读入一个换行）；</p>
<p>2、由于++temp，所以即使没有读入了还是会自加一次，所以要-1或者输出时把&lt;=改成&lt;。</p>
<p>关于每个字母的频率，本蒟蒻是在枚举k时每次都计算，实际上并不用那么麻烦，</p>
<p>因为每个字母都是由初始字母一一对应转换来的，所以只需要计算初始字母的频率就行了（<span style="text-decoration: line-through;">输入时明明给了的说</span>）。</p>
<p>然后取方差和最小的即可。输出时如果是字母要分大写和小写处理，</p>
<p>小写输出a[(int)((s[i][j]-'a'+kk)%26)]，大写输出a[(int)((s[i][j]-'A'+kk)%26+26)]（预处理a数组是大写字母实在小写字母基础上+26的）。</p>
<p>如果不是字母直接输出原来的文本就好了。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('2eb891c8-b6da-410a-ba34-741afe7927bb')"><img id="code_img_closed_2eb891c8-b6da-410a-ba34-741afe7927bb" class="code_img_closed" src="./images/长乐培训Day30.png" alt="" /><img id="code_img_opened_2eb891c8-b6da-410a-ba34-741afe7927bb" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2eb891c8-b6da-410a-ba34-741afe7927bb',event)" src="./images/长乐培训Day31.png" alt="" />
<div id="cnblogs_code_open_2eb891c8-b6da-410a-ba34-741afe7927bb" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span> temp=<span style="color: #800080;">0</span>,sum[<span style="color: #800080;">55</span><span style="color: #000000;">],kk;
</span><span style="color: #0000ff;">double</span> p[<span style="color: #800080;">26</span>],x[<span style="color: #800080;">26</span>],ans,minn=<span style="color: #800080;">1000000.0</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">char</span> a[<span style="color: #800080;">55</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">string</span> s[<span style="color: #800080;">10001</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("decode.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("decode.out","w",stdout);</span>
    <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;<span style="color: #800080;">26</span>;i++) a[i]=<span style="color: #0000ff;">char</span>(<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>+<span style="color: #000000;">i);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">26</span>;i&lt;<span style="color: #800080;">52</span>;i++) a[i]=<span style="color: #0000ff;">char</span>(<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>+i-<span style="color: #800080;">26</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;<span style="color: #800080;">26</span>;i++) cin&gt;&gt;<span style="color: #000000;">p[i];
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">while</span>(getline(cin,s[++<span style="color: #000000;">temp])) ;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=<span style="color: #800080;">0</span>;k&lt;<span style="color: #800080;">26</span>;k++<span style="color: #000000;">)
    {
        memset(sum,</span><span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(sum));
        ans</span>=<span style="color: #800080;">0.0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=temp;i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;s[i].size();j++<span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">if</span>(s[i][j]&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>&amp;&amp;s[i][j]&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">z</span><span style="color: #800000;">'</span>) sum[(s[i][j]-<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>+k)%<span style="color: #800080;">26</span>]++<span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span>(s[i][j]&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>&amp;&amp;s[i][j]&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">Z</span><span style="color: #800000;">'</span>) sum[(s[i][j]-<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>+k)%<span style="color: #800080;">26</span>]++<span style="color: #000000;">;
            }
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;<span style="color: #800080;">26</span>;i++<span style="color: #000000;">)
        {
            x[i]</span>=(<span style="color: #0000ff;">double</span>)(sum[i]*<span style="color: #800080;">0.03846153846</span><span style="color: #000000;">);
            ans</span>+=(p[i]-x[i])*(p[i]-<span style="color: #000000;">x[i]);
        }
        </span><span style="color: #0000ff;">if</span>(ans&lt;<span style="color: #000000;">minn)
        {
            minn</span>=<span style="color: #000000;">ans;
            kk</span>=<span style="color: #000000;">k;
        }
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;temp;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;s[i].size();j++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">if</span>(s[i][j]&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>&amp;&amp;s[i][j]&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">z</span><span style="color: #800000;">'</span>) cout&lt;&lt;a[(<span style="color: #0000ff;">int</span>)((s[i][j]-<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>+kk)%<span style="color: #800080;">26</span><span style="color: #000000;">)];
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(s[i][j]&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>&amp;&amp;s[i][j]&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">Z</span><span style="color: #800000;">'</span>) cout&lt;&lt;a[(<span style="color: #0000ff;">int</span>)((s[i][j]-<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>+kk)%<span style="color: #800080;">26</span>+<span style="color: #800080;">26</span><span style="color: #000000;">)];
            </span><span style="color: #0000ff;">else</span> cout&lt;&lt;<span style="color: #000000;">s[i][j];
        }
        cout</span>&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdout);</span>
}</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T3 休息</h2>
<h3><a title="休息" href="https://www.luogu.org/problemnew/show/T89528" target="_blank">题目</a></h3>
<p>【题目描述】</p>
<p>休息的时候，可以放松放松浑身的肌肉，打扫打扫卫生，感觉很舒服。在某一天，某LMZ开始整理他那书架。</p>
<p>已知他的书有n本，从左到右按顺序排列。他想把书从矮到高排好序，而每一本书都有一个独一无二的高度H<sub>i</sub>。</p>
<p>他排序的方法是：每一次将所有的书划分为尽量少的连续部分，使得每一部分的书的高度都是单调下降，然后将其中所有不少于2本书的区间全部翻转。</p>
<p>重复执行以上操作，最后使得书的高度全部单调上升。可是毕竟是休息时间，LMZ不想花太多时间在给书排序这种事上面。</p>
<p>因此他划分并翻转完第一次书之后，他想计算，他一共执行了多少次翻转操作才能把所有的书排好序。</p>
<p>LMZ惊奇地发现，第一次排序之前，他第一次划分出来的所有区间的长度都是偶数。</p>
<p>【输入格式】</p>
<p>第一行一个正整数n, 为书的总数。</p>
<p>接下来n行，每行仅一个正整数H<sub>i</sub>，为第i本书的高度。</p>
<p>【输出格式】</p>
<p>仅一个整数，为LMZ需要做的翻转操作的次数。</p>
<p>【输入样例】</p>
<p>6</p>
<p>5 3 2 1 6 4</p>
<p>【输出样例】</p>
<p>3</p>
<p>【数据规模】</p>
<p>对于10%的数据：n&lt;=50</p>
<p>对于40%的数据：n&lt;=3000</p>
<p>对于100%的数据：1&lt;=n&lt;=100000, 1&lt;=H<sub>i</sub>&lt;=n</p>
<h3>解析</h3>
<p>其实这题就是在求逆序对，所以用归并排序来做。</p>
<p>在归并的过程中，如果a[i]&gt;a[j]，即逆序对，则ans+=mid-i+1，具体原因模拟一遍就知道了。</p>
<p>程序中运用到的reverse函数是&lt;algorithm&gt;里的，作用是翻转，在给p[cnt].r赋值的时候,赋的是i-1，所以在翻转时，得在最后+1。</p>
<p>答案是在n<sup>2</sup>/2的，很显然int是不够的，记得开long long。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('040ab976-fb5f-4d2e-9f97-1018e3dd2dd5')"><img id="code_img_closed_040ab976-fb5f-4d2e-9f97-1018e3dd2dd5" class="code_img_closed" src="./images/长乐培训Day30.png" alt="" /><img id="code_img_opened_040ab976-fb5f-4d2e-9f97-1018e3dd2dd5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('040ab976-fb5f-4d2e-9f97-1018e3dd2dd5',event)" src="./images/长乐培训Day31.png" alt="" />
<div id="cnblogs_code_open_040ab976-fb5f-4d2e-9f97-1018e3dd2dd5" class="cnblogs_code_hide">
<pre>#include&lt;algorithm&gt;<span style="color: #000000;">
#include</span>&lt;iostream&gt;<span style="color: #000000;">
#include</span>&lt;cstdio&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N = 1e5 + <span style="color: #800080;">10</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> c[N], a[N], n;
</span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> ans;
</span><span style="color: #0000ff;">void</span> msort(<span style="color: #0000ff;">int</span> l, <span style="color: #0000ff;">int</span><span style="color: #000000;"> r) {
    </span><span style="color: #0000ff;">if</span>(l == r) <span style="color: #0000ff;">return</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span> mid = (l + r) &gt;&gt; <span style="color: #800080;">1</span><span style="color: #000000;">;
    msort(l, mid), msort(mid </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">, r);
    </span><span style="color: #0000ff;">int</span> i = l, j = mid + <span style="color: #800080;">1</span>, k =<span style="color: #000000;"> l;
    </span><span style="color: #0000ff;">while</span>(i &lt;= mid &amp;&amp; j &lt;=<span style="color: #000000;"> r) {
        </span><span style="color: #0000ff;">if</span>(a[i] &lt;=<span style="color: #000000;"> a[j]) 
            c[k</span>++] = a[i++<span style="color: #000000;">];
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
            ans </span>+= mid - i + <span style="color: #800080;">1</span><span style="color: #000000;">;
            c[k</span>++] = a[j++<span style="color: #000000;">];
        }
    }
    </span><span style="color: #0000ff;">while</span>(i &lt;= mid) c[k++] = a[i++<span style="color: #000000;">];
    </span><span style="color: #0000ff;">while</span>(j &lt;= r) c[k++] = a[j++<span style="color: #000000;">];
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> t = l; t &lt;= r; t++<span style="color: #000000;">)
        a[t] </span>=<span style="color: #000000;"> c[t];
}
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> rec {
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> l, r;
}p[N];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main() {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rest.in", "r", stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rest.out", "w", stdout);</span>
    <span style="color: #0000ff;">int</span> cnt = <span style="color: #800080;">0</span><span style="color: #000000;">;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, &amp;<span style="color: #000000;">n);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= n; i++<span style="color: #000000;">) {
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, a +<span style="color: #000000;"> i);
        </span><span style="color: #0000ff;">if</span>(a[i] &gt; a[i - <span style="color: #800080;">1</span><span style="color: #000000;">]) {
            p[cnt].r </span>= i - <span style="color: #800080;">1</span><span style="color: #000000;">;
            p[</span>++cnt].l =<span style="color: #000000;"> i;
        }
    }
    p[cnt].r </span>=<span style="color: #000000;"> n;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= cnt; i++<span style="color: #000000;">) 
        reverse(a </span>+ p[i].l, a + p[i].r + <span style="color: #800080;">1</span>), ans++<span style="color: #000000;">;
    msort(</span><span style="color: #800080;">1</span><span style="color: #000000;">, n);
    cout</span>&lt;&lt;<span style="color: #000000;">ans;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T4 矩阵取数游戏</h2>
<h3><a title="矩阵取数游戏" href="https://www.luogu.org/problemnew/show/P1005" target="_blank">题目</a></h3>
<p>【题目描述】</p>
<p>帅帅经常跟同学玩一个矩阵取数游戏：对于一个给定的<em>n*m</em>的矩阵，矩阵中的每个元素<em>a<sub>ij</sub></em>均为非负整数。游戏规则如下：</p>
<p>1.每次取数时须从每行各取走一个元素，共n个。m次后取完矩阵所有的元素；<br />2.每次取走的各个元素只能是该元素所在行的行首或行尾；<br />3.每次取数都一个得分值，为每行取数的得分之和；每行取数的得分=被取走的元素值*2<sup>i</sup>，其中i表示第i次取数(从1开始编号)；<br />4.游戏结束总得分为m次取数得分之和。</p>
<p>帅帅想请你帮忙写一个程序，对于任意矩阵，可以求出取数后的最大得分。</p>
<p>【输入格式】</p>
<p align="left">输入文件包括n+1行：</p>
<p align="left">第一行为两个用空格隔开的整数n和m。</p>
<p align="left">第2~n+1行为n*m矩阵，其中每行m个用单个空格隔开。</p>
<p align="left">【输出格式】</p>
<p align="left">输出文件仅包含1行，为一个整数，即输入矩阵取数后的最大的分。</p>
<p align="left">【输入样例】</p>
<p align="left">2 3<br />
1 2 3<br />
3 4 2</p>
<p align="left">【输出样例】</p>
<p align="left">82</p>
<p align="left">【数据规模】</p>
<p align="left">60%的数据满足：1&lt;=<em>n</em>, <em>m</em>&lt;=30，答案不超过10<sup>16</sup></p>
<p align="left">100%的数据满足：1&lt;=<em>n, m</em>&lt;=80，0&lt;=<em>a<sub>ij</sub></em>&lt;=1000</p>
<h3 align="left">解析</h3>
<p>这题实际上一眼就可以看出是区间DP。</p>
<p>令f[i][j]表示第k行取数取成了[i,j]的区间的得分。</p>
<p>由于只能从左右两端取，所以状态转移方程显而易见：</p>
<p>f[i][j]=max(f[i-1][j]+a[i-1][j]*2<sup>m-j+i-1</sup>,f[i][j+1]+a[i][j+1]*2<sup>m-j+i-1</sup>)</p>
<p>由于本蒟蒻的代码i和j都是从0开始循环的所以2的次方并不是m-j+i-1，而是i+j（个人更推荐上面的写法，更通俗易懂）。</p>
<p>好了，这题就是这样。</p>
<p>才怪，</p>
<p>如果单单只是这样的话，这题就太简单了，</p>
<p>但是！！！！！</p>
<p>注意看数据范围，m最大为80，那么2的80次方是多少？1208925819614629174706176！</p>
<p>这么大的数int不行，long long也不行，哪怕是unsigned long long也不够，那怎么办呢？</p>
<p>答案是：高精！</p>
<p>高精才是这道题真正恶心的地方，需要用到的有：</p>
<p>高精+高精、高精*单精、max(高精,高精)。</p>
<p>所以本蒟蒻来讲一下高精如何实现......才怪。</p>
<p>由于本蒟蒻不会高精，所以下面代码中的高精是直接从标程&ldquo;借鉴&rdquo;来的（手动滑稽）。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('11f10bd4-6534-43fc-8232-b173236223a0')"><img id="code_img_closed_11f10bd4-6534-43fc-8232-b173236223a0" class="code_img_closed" src="./images/长乐培训Day30.png" alt="" /><img id="code_img_opened_11f10bd4-6534-43fc-8232-b173236223a0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('11f10bd4-6534-43fc-8232-b173236223a0',event)" src="./images/长乐培训Day31.png" alt="" />
<div id="cnblogs_code_open_11f10bd4-6534-43fc-8232-b173236223a0" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span> n,m,a[<span style="color: #800080;">85</span>][<span style="color: #800080;">85</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> sb{
    </span><span style="color: #0000ff;">int</span> c[<span style="color: #800080;">16</span><span style="color: #000000;">];
    friend inline sb </span><span style="color: #0000ff;">operator</span> * (<span style="color: #0000ff;">const</span> sb &amp;a, <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> &amp;<span style="color: #000000;">b)
    {
        sb c;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= <span style="color: #800080;">15</span>; i ++<span style="color: #000000;">)
            c.c[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
        c.c[</span><span style="color: #800080;">0</span>] = a.c[<span style="color: #800080;">0</span><span style="color: #000000;">];
        </span><span style="color: #0000ff;">int</span> p = <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= a.c[<span style="color: #800080;">0</span>]; i ++<span style="color: #000000;">)
        {
            c.c[i] </span>= a.c[i] * b +<span style="color: #000000;"> p;
            p </span>= c.c[i] / <span style="color: #800080;">10000</span><span style="color: #000000;">;
            c.c[i] </span>%= <span style="color: #800080;">10000</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">int</span> &amp;len = c.c[<span style="color: #800080;">0</span><span style="color: #000000;">];
        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (p)
        {
            c.c[</span>++len] = p % <span style="color: #800080;">10000</span><span style="color: #000000;">;
            p </span>/= <span style="color: #800080;">10000</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c;
    }
    friend inline sb </span><span style="color: #0000ff;">operator</span> * (<span style="color: #0000ff;">const</span> sb &amp;a, <span style="color: #0000ff;">const</span> sb &amp;<span style="color: #000000;">b)
    {
        sb c;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= <span style="color: #800080;">15</span>; i ++<span style="color: #000000;">)
            c.c[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
        c.c[</span><span style="color: #800080;">0</span>] = a.c[<span style="color: #800080;">0</span>] + b.c[<span style="color: #800080;">0</span>] - <span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= a.c[<span style="color: #800080;">0</span>]; i ++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> p = <span style="color: #800080;">0</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">1</span>; j &lt;= b.c[<span style="color: #800080;">0</span>]; j ++<span style="color: #000000;">)
            {
                c.c[i </span>+ j - <span style="color: #800080;">1</span>] += a.c[i] * b.c[j] +<span style="color: #000000;"> p;
                p </span>= c.c[i + j - <span style="color: #800080;">1</span>] / <span style="color: #800080;">10000</span><span style="color: #000000;">;
                c.c[i </span>+ j - <span style="color: #800080;">1</span>] %= <span style="color: #800080;">10000</span><span style="color: #000000;">;
            }
            c.c[i </span>+ b.c[<span style="color: #800080;">0</span>]] +=<span style="color: #000000;"> p;
        }
        </span><span style="color: #0000ff;">if</span> (c.c[c.c[<span style="color: #800080;">0</span>] + <span style="color: #800080;">1</span>]) c.c[<span style="color: #800080;">0</span>] ++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c;
    }
    friend inline sb </span><span style="color: #0000ff;">operator</span> + (<span style="color: #0000ff;">const</span> sb &amp;a, <span style="color: #0000ff;">const</span> sb &amp;<span style="color: #000000;">b)
    {
        sb c;
        </span><span style="color: #0000ff;">int</span> &amp;len = c.c[<span style="color: #800080;">0</span><span style="color: #000000;">];
        c.c[</span><span style="color: #800080;">0</span>] = max(a.c[<span style="color: #800080;">0</span>], b.c[<span style="color: #800080;">0</span><span style="color: #000000;">]);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= <span style="color: #800080;">15</span>; i ++<span style="color: #000000;">)
            c.c[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> p = <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= len; i ++<span style="color: #000000;">)
        {
            c.c[i] </span>= a.c[i] + b.c[i] +<span style="color: #000000;"> p;
            p </span>= c.c[i] / <span style="color: #800080;">10000</span><span style="color: #000000;">;
            c.c[i] </span>%= <span style="color: #800080;">10000</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">if</span> (p) len ++, c.c[len] =<span style="color: #000000;"> p;
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c;
    }
    inline sb </span><span style="color: #0000ff;">operator</span> = (<span style="color: #0000ff;">const</span> sb &amp;<span style="color: #000000;">b)
    {
        c[</span><span style="color: #800080;">0</span>] = b.c[<span style="color: #800080;">0</span><span style="color: #000000;">];
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= <span style="color: #800080;">15</span>; i ++<span style="color: #000000;">)
            c[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= b.c[<span style="color: #800080;">0</span>]; i ++<span style="color: #000000;">)
            c[i] </span>=<span style="color: #000000;"> b.c[i];
        </span><span style="color: #0000ff;">return</span> *<span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }
    inline </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> print()
    {
        cout </span>&lt;&lt; c[c[<span style="color: #800080;">0</span><span style="color: #000000;">]];
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = c[<span style="color: #800080;">0</span>] - <span style="color: #800080;">1</span>; i &gt;= <span style="color: #800080;">1</span>; i --<span style="color: #000000;">)
            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%04d</span><span style="color: #800000;">"</span><span style="color: #000000;">, c[i]);
        cout </span>&lt;&lt;<span style="color: #000000;"> endl;
    }
};
inline sb Max(</span><span style="color: #0000ff;">const</span> sb &amp;a, <span style="color: #0000ff;">const</span> sb &amp;<span style="color: #000000;">b)
{
    </span><span style="color: #0000ff;">if</span> (a.c[<span style="color: #800080;">0</span>] &gt; b.c[<span style="color: #800080;">0</span>]) <span style="color: #0000ff;">return</span><span style="color: #000000;"> a;
    </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a.c[<span style="color: #800080;">0</span>] &lt; b.c[<span style="color: #800080;">0</span>]) <span style="color: #0000ff;">return</span><span style="color: #000000;"> b;
    </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a.c[<span style="color: #800080;">0</span>] == b.c[<span style="color: #800080;">0</span><span style="color: #000000;">])
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = a.c[<span style="color: #800080;">0</span>]; i &gt;= <span style="color: #800080;">1</span>; i --<span style="color: #000000;">)
            </span><span style="color: #0000ff;">if</span> (a.c[i] &gt; b.c[i]) <span style="color: #0000ff;">return</span><span style="color: #000000;"> a;
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a.c[i] &lt; b.c[i]) <span style="color: #0000ff;">return</span><span style="color: #000000;"> b;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> a;
}
sb f[</span><span style="color: #800080;">85</span>][<span style="color: #800080;">85</span>],cf[<span style="color: #800080;">85</span><span style="color: #000000;">],tot,ans;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("game.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("game.out","w",stdout);</span>
    n=read(),m=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=m;j++) a[i][j]=<span style="color: #000000;">read();
    cf[</span><span style="color: #800080;">0</span>].c[<span style="color: #800080;">0</span>]=<span style="color: #800080;">1</span>;cf[<span style="color: #800080;">0</span>].c[<span style="color: #800080;">1</span>]=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++) cf[i]=cf[i-<span style="color: #800080;">1</span>]*<span style="color: #800080;">2</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=<span style="color: #800080;">1</span>;k&lt;=n;k++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;=m;i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=m;j++) memset(f[i][j].c,<span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(f[i][j].c));
        f[m][m].c[</span><span style="color: #800080;">0</span>]=<span style="color: #800080;">1</span><span style="color: #000000;">;
        memset(tot.c,</span><span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(tot.c));
        tot.c[</span><span style="color: #800080;">0</span>]=<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;=m;i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=m-i;j++<span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">if</span>(i==<span style="color: #800080;">0</span>&amp;&amp;j==<span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">if</span>(i) f[i][j]=Max(f[i][j],f[i-<span style="color: #800080;">1</span>][j]+cf[i+j]*<span style="color: #000000;">a[k][i]);
                </span><span style="color: #0000ff;">if</span>(j) f[i][j]=Max(f[i][j],f[i][j-<span style="color: #800080;">1</span>]+cf[i+j]*a[k][m-j+<span style="color: #800080;">1</span><span style="color: #000000;">]);
                tot</span>=<span style="color: #000000;">Max(tot,f[i][j]);
            }
        ans</span>=ans+<span style="color: #000000;">tot;
    }
    ans.print();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fclose(stdout);</span>
    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>