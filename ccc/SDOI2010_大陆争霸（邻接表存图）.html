<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修SDOI2010_大陆争霸（邻接表存图）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>SDOI2010_大陆争霸（邻接表存图）</center></div><div class='banquan'>原文出处:本文由博客园博主没有人_蒟蒻提供。<br/>
原文连接:https://www.cnblogs.com/hch348/p/hch_348.html</div><br>
    <div class="row">
<div class="column">
<h4 class="ui top attached block header">题目描述</h4>
<div class="ui bottom attached segment font-content">
<p>在一个遥远的世界里有两个国家：位于大陆西端的杰森国和位于大陆东端的 克里斯国。两个国家的人民分别信仰两个对立的神：杰森国信仰象征黑暗和毁灭 的神曾&middot;布拉泽，而克里斯国信仰象征光明和永恒的神斯普林&middot;布拉泽。 幻想历 8012年 1月，杰森国正式宣布曾&middot;布拉泽是他们唯一信仰的神，同 时开始迫害在杰森国的信仰斯普林&middot;布拉泽的克里斯国教徒。 幻想历 8012年 3月2日，位于杰森国东部小镇神谕镇的克里斯国教徒发动 起义。 幻想历 8012年 3月7日，神谕镇的起义被杰森国大军以残酷手段镇压。 幻想历 8012年 3月8日，克里斯国对杰森国宣战。由数十万大军组成的克 里斯军团开至两国边境，与杰森军团对峙。 幻想历 8012年 4月，克里斯军团攻破杰森军团防线进入神谕镇，该镇幸存 的克里斯国教徒得到解放。 战争随后进入胶着状态，旷日持久。战况惨烈，一时间枪林弹雨，硝烟弥漫， 民不聊生。 幻想历 8012年 5月12日深夜，斯普林&middot;布拉泽降下神谕：&ldquo;Trust me, earn eternal life.&rdquo;克里斯军团士气大增。作为克里斯军团的主帅，你决定利用这一机 会发动奇袭，一举击败杰森国。具体地说，杰森国有 N 个城市，由 M条单向道 路连接。神谕镇是城市 1而杰森国的首都是城市 N。你只需摧毁位于杰森国首都 的曾&middot;布拉泽大神殿，杰森国的信仰，军队还有一切就都会土崩瓦解，灰飞烟灭。 为了尽量减小己方的消耗，你决定使用自爆机器人完成这一任务。唯一的困 难是，杰森国的一部分城市有结界保护，不破坏掉结界就无法进入城市。而每个 城市的结界都是由分布在其他城市中的一些结界发生器维持的，如果想进入某个 城市，你就必须破坏掉维持这个城市结界的所有结界发生器。 现在你有无限多的自爆机器人，一旦进入了某个城市，自爆机器人可以瞬间 引爆，破坏一个目标（结界发生器，或是杰森国大神殿），当然机器人本身也会 一起被破坏。你需要知道：摧毁杰森国所需的最短时间。<br />输入格式</p>
<p>第一行两个正整数 N, M。 接下来 M行，每行三个正整数&nbsp;<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-1-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-1" class="math"><span id="MathJax-Span-2" class="mrow"><span id="MathJax-Span-3" class="msubsup"><span id="MathJax-Span-4" class="mi">u<span id="MathJax-Span-5" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">ui​,<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-2-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-6" class="math"><span id="MathJax-Span-7" class="mrow"><span id="MathJax-Span-8" class="msubsup"><span id="MathJax-Span-9" class="mi">v<span id="MathJax-Span-10" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">vi,<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-3-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-11" class="math"><span id="MathJax-Span-12" class="mrow"><span id="MathJax-Span-13" class="msubsup"><span id="MathJax-Span-14" class="mi">w<span id="MathJax-Span-15" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">wi,表示有一条从城市ui​到城市vi的单向道路，自爆机器人通过这条道路需要<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-4-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-16" class="math"><span id="MathJax-Span-17" class="mrow"><span id="MathJax-Span-18" class="msubsup"><span id="MathJax-Span-19" class="mi">w<span id="MathJax-Span-20" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">wi的时间。 之后 N 行，每行描述一个城市。首先是一个正整数 li，维持这个城市结界所 使用的结界发生器数目。之后<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-5-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-21" class="math"><span id="MathJax-Span-22" class="mrow"><span id="MathJax-Span-23" class="msubsup"><span id="MathJax-Span-24" class="mi">l<span id="MathJax-Span-25" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">li个1~N 之间的城市编号，表示每个结界发生器的 位置。如果<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-6-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-26" class="math"><span id="MathJax-Span-27" class="mrow"><span id="MathJax-Span-28" class="msubsup"><span id="MathJax-Span-29" class="mi">l<span id="MathJax-Span-30" class="mi">i</span></span></span></span></span><span class="MJX_Assistive_MathML">li​=0，则说明该城市没有结界保护，保证<span class="math inline"><span class="MathJax_Preview"><span id="MathJax-Element-7-Frame" class="MathJax" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;"><span id="MathJax-Span-31" class="math"><span id="MathJax-Span-32" class="mrow"><span id="MathJax-Span-33" class="msubsup"><span id="MathJax-Span-34" class="mi">l<span id="MathJax-Span-35" class="mn">1</span></span></span></span></span><span class="MJX_Assistive_MathML">l1=0 。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong>输出格式</strong></p>
<p>仅包含一个正整数 ，击败杰森国所需的最短时间。</p>
<p><strong>样例</strong><br />输入样例</p>
<p>6 6<br />1 2 1<br />1 4 3<br />2 3 1<br />2 5 2<br />4 6 2<br />5 3 2<br />0<br />0<br />0<br />1 3<br />0<br />2 3 5</p>
<p>输出样例</p>
<p>5</p>



</div>



</div>



</div>
<div class="row">
<div class="column">
<div class="ui bottom attached segment font-content">
<div class="ui existing segment">
<h4 class="ui top attached block header">数据范围与提示</h4>
<div class="ui bottom attached segment font-content">
<p>对于 20%的数据，满足<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">N<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">1<span class="mord">5，<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">M<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">5<span class="mord">0；<br />对于 50%的数据，满足<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">N<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">5<span class="mord">0<span class="mord">0，<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">M<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">6<span class="mpunct">,<span class="mspace"><span class="mord">0<span class="mord">0<span class="mord">0；<br />对于 100%的数据，满足<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">N<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">3<span class="mpunct">,<span class="mspace"><span class="mord">0<span class="mord">0<span class="mord">0，<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault">M<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">7<span class="mord">0<span class="mpunct">,<span class="mspace"><span class="mord">0<span class="mord">0<span class="mord">0，<span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord">1<span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord mathdefault">w<span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i<span class="vlist-s">​<span class="vlist-r"><span class="vlist"><span class="mspace"><span class="mrel">&le;<span class="mspace"><span class="base"><span class="strut"><span class="mord">1<span class="mord"><span class="mord">0^8<span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><br />输入数据保证一定有解，且不会存在维持某个城市结界的结界发生器在这个城市内部。连接两个城市的道路可能不止一条， 也可能存在一个城市自己到自己的道路。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mpunct"><span class="mspace"><span class="mord"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mpunct"><span class="mspace"><span class="mord"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord mathdefault"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord"><span class="mpunct"><span class="mspace"><span class="mord"><span class="mord"><span class="mord"><span class="katex"><span class="katex-mathml"><span class="katex-html"><span class="base"><span class="strut"><span class="mord"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord mathdefault"><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight"><span class="vlist-s"><span class="vlist-r"><span class="vlist"><span class="mspace"><span class="mrel"><span class="mspace"><span class="base"><span class="strut"><span class="mord"><span class="mord"><span class="mord"><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist"><span class="pstrut"><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">这道题是一道dijkstra的题目，只不过要做略微变形。用</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>t1代表到达城市的最短时间,t2代表摧毁保护城市的所有结界发生器的最短时间,摧毁城市的最短时间即 MAX(t1,t2) 。</p>
<p>每次用 dis[x] 更新 t1[x可以到的点]，再更新保护 x可以到的点的结界发生器数量即可。</p>
<div class="cnblogs_code">
<pre>#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;vector&gt;<span style="color: #000000;">
#include </span>&lt;queue&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">#define</span> ll long long
<span style="color: #0000ff;">#define</span> inf 0x3f3f3f3f
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008000;">//</span><span style="color: #008000;">快读</span>
<span style="color: #0000ff;">int</span><span style="color: #000000;"> read(){
    </span><span style="color: #0000ff;">int</span> ret=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span> || ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">){
        ch</span>=<span style="color: #000000;">getchar();
    }</span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span> &amp;&amp; ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">){
        ret</span>=(ret&lt;&lt;<span style="color: #800080;">1</span>)+(ret&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;
}
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> dat{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> p,d;
};
vector </span>&lt;dat&gt; v[<span style="color: #800080;">3005</span><span style="color: #000000;">];
vector </span>&lt;<span style="color: #0000ff;">int</span>&gt; h[<span style="color: #800080;">3005</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span> t1[<span style="color: #800080;">3005</span>],t2[<span style="color: #800080;">3005</span>],dis[<span style="color: #800080;">3005</span>],cnt[<span style="color: #800080;">3005</span><span style="color: #000000;">];
</span><span style="color: #008000;">//</span><span style="color: #008000;">t1[i]代表到达城市i的最短时间   t2[i]代表摧毁保护城市i的所有结界发生器的最短时间  dis[i]代表摧毁城市i的最短时间</span>
<span style="color: #0000ff;">bool</span> vis[<span style="color: #800080;">3005</span><span style="color: #000000;">];
priority_queue </span>&lt;pair&lt;<span style="color: #0000ff;">int</span>,<span style="color: #0000ff;">int</span>&gt; &gt; q;<span style="color: #008000;">//</span><span style="color: #008000;">优先队列
</span><span style="color: #008000;">//</span><span style="color: #008000;">迪杰斯特拉 </span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> dj(){
    t1[</span><span style="color: #800080;">1</span>]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    dis[</span><span style="color: #800080;">1</span>]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    q.push(make_pair(</span><span style="color: #800080;">0</span>,<span style="color: #800080;">1</span><span style="color: #000000;">));
    </span><span style="color: #0000ff;">while</span>(!<span style="color: #000000;">q.empty()){
        </span><span style="color: #0000ff;">int</span> x=<span style="color: #000000;">q.top().second;
        q.pop();
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(vis[x]){
            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;
        }vis[x]</span>=<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;v[x].size(); i++<span style="color: #000000;">){
            </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">vis[v[x][i].p]){
                </span><span style="color: #0000ff;">int</span> y=<span style="color: #000000;">v[x][i].p;
                </span><span style="color: #0000ff;">int</span> z=<span style="color: #000000;">v[x][i].d;
                </span><span style="color: #0000ff;">if</span>(t1[y]&gt;dis[x]+<span style="color: #000000;">z){
                    t1[y]</span>=dis[x]+<span style="color: #000000;">z;
                    </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">cnt[y]){
                        dis[y]</span>=<span style="color: #000000;">max(t1[y],t2[y]);
                        q.push(make_pair(</span>-<span style="color: #000000;">dis[y],y));
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">优先队列默认大根堆，所以要取反</span>
<span style="color: #000000;">                    }
                }
            }
        }</span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;h[x].size(); i++<span style="color: #000000;">){ 
            </span><span style="color: #0000ff;">int</span> y=<span style="color: #000000;">h[x][i];
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(cnt[y]){
                cnt[y]</span>--<span style="color: #000000;">;
                t2[y]</span>=<span style="color: #000000;">max(dis[x],t2[y]);
                </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">cnt[y]){
                    dis[y]</span>=<span style="color: #000000;">max(t1[y],t2[y]);
                    q.push(make_pair(</span>-<span style="color: #000000;">dis[y],y));
                }
            }
        }
    }
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main(){
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t4.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("d.out","w",stdout);</span>
    <span style="color: #0000ff;">int</span> n,m,x,y,z,tmp=<span style="color: #800080;">0</span><span style="color: #000000;">;
    dat u;
    n</span>=<span style="color: #000000;">read();
    m</span>=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=m; i++<span style="color: #000000;">){
        x</span>=<span style="color: #000000;">read();
        y</span>=<span style="color: #000000;">read();
        z</span>=<span style="color: #000000;">read();
        u.d</span>=<span style="color: #000000;">z;
        u.p</span>=<span style="color: #000000;">y;
        v[x].push_back(u);
    }</span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=n; i++<span style="color: #000000;">){
        x</span>=<span style="color: #000000;">read();
        cnt[i]</span>=<span style="color: #000000;">x;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>; j&lt;=x; j++<span style="color: #000000;">){
            y</span>=<span style="color: #000000;">read();
            h[y].push_back(i);
        }
    }memset(t1,inf,</span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(t1));
    memset(dis,inf,</span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(dis));
    dj();
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,dis[n]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>