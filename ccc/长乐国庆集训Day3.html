<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修长乐国庆集训Day3' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>长乐国庆集训Day3</center></div><div class='banquan'>原文出处:本文由博客园博主Ra煞提供。<br/>
原文连接:https://www.cnblogs.com/I-Love-You-520/p/11619429.html</div><br>
    <h2>T1 动态逆序对</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>给出一个长度为n的排列a（1~n这n个数在数列中各出现1次）。每次交换两个数，求逆序对数%2的结果。</p>
<p>逆序对：对于两个数a[i],a[j](i&lt;j)，若a[i]&gt;a[j]，则(a[i],a[j])为1个逆序对。</p>
<p>【输入格式】</p>
<p>第一行一个正整数n。</p>
<p>接下来一行n个数，表示给出的排列a。</p>
<p>接下来一行一个正整数q。</p>
<p>接下来q行，每行两个正整数i,j，表示交换a[i]和a[j]。</p>
<p>【输出格式】</p>
<p>输出共q行，表示每次交换后的逆序对数%2的结果。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">4</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> <span style="color: #800080;">4</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">1</span>
<span style="color: #800080;">0</span></pre>
</div>
<p>【数据规模】</p>
<p>对于60%的数据：n,q&le;100；</p>
<p>对于80%的数据：n,q&le;1000；</p>
<p>对于100%的数据：n,q&le;100000。</p>
<h3>解析</h3>
<p>先求出初始序列的逆序对总数对2取余的结果。</p>
<p>每次交换a[i]与a[j](i&lt;j)，对于a[k]的影响如下：</p>
<ul>
<li>若k&lt;i，a[k]依旧在a[i]与a[j]前面，所以a[k]与a[i]、a[j]产生的逆序对数不变；</li>
<li>若k&gt;j，同上，逆序对数不变；</li>
<li>若i&lt;k&lt;j，如果a[i]&lt;a[k]，则逆序对数+1，否则-1,；如果a[j]&gt;a[k]，则逆序对数+1，否则-1，</li>
</ul>
<p>而我们只需求出逆序对数对2取余的结果，可以发现，逆序对个数的奇偶性与k无关。</p>
<p>事实上，只需在每次交换位置时，令逆序对总数对2取余的结果^1即可（i=j时则不变）。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('6d5235bf-cd40-45e5-89f2-86674a58a9f9')"><img id="code_img_closed_6d5235bf-cd40-45e5-89f2-86674a58a9f9" class="code_img_closed" src="./images/长乐国庆集训Day30.png" alt="" /><img id="code_img_opened_6d5235bf-cd40-45e5-89f2-86674a58a9f9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6d5235bf-cd40-45e5-89f2-86674a58a9f9',event)" src="./images/长乐国庆集训Day31.png" alt="" />
<div id="cnblogs_code_open_6d5235bf-cd40-45e5-89f2-86674a58a9f9" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span> n,q,a[<span style="color: #800080;">100100</span>],f[<span style="color: #800080;">100100</span><span style="color: #000000;">],temp;
</span><span style="color: #0000ff;">void</span> add(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">for</span>(;x&lt;=n;x+=(x&amp;-x)) f[x]+=<span style="color: #000000;">y;
}
</span><span style="color: #0000ff;">int</span> ask(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x)
{
    </span><span style="color: #0000ff;">int</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(;x;x-=(x&amp;-x)) ans+=<span style="color: #000000;">f[x];
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ans;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("lyk.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("lyk.out","w",stdout);</span>
    n=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++) a[i]=<span style="color: #000000;">read();
    q</span>=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=n;i&gt;=<span style="color: #800080;">1</span>;i--<span style="color: #000000;">)
    {
        temp</span>+=ask(a[i]-<span style="color: #800080;">1</span><span style="color: #000000;">);
        add(a[i],</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    }
    temp</span>&amp;=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=q;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> x=read(),y=<span style="color: #000000;">read();
        </span><span style="color: #0000ff;">if</span>(x!=y) temp^=<span style="color: #800080;">1</span><span style="color: #000000;">;
        cout</span>&lt;&lt;temp&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T2 树的统计</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>给出一棵n个点的满二叉树，根节点为1，第i个点的左右子节点分别为第2i,2i+1个点，第i个点的权值为a[i]。</p>
<p>有m个询问。对于每个询问给出x,d，求到点x的距离为d的所有点的点权和。如果不存在符合条件的点，输出0。</p>
<p>两点距离即两点间最短路径的边数。</p>
<p>保证最终答案在int范围内。</p>
<p>【输入格式】</p>
<p>第一行两个正整数n,m。</p>
<p>接下来n行每行一个正整数，第i行的数表示a[i]。</p>
<p>接下来m行每行两个整数x,d，表示一个询问。</p>
<p>【输出格式】</p>
<p>对于每个询问输出一行表示答案。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">7</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">13</span>
<span style="color: #800080;">7</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">9</span>
<span style="color: #800080;">5</span>
<span style="color: #800080;">6</span>
<span style="color: #800080;">8</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">4</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">3</span> <span style="color: #800080;">1</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">0</span>
<span style="color: #800080;">18</span>
<span style="color: #800080;">27</span></pre>
</div>
<p>【数据规模】</p>
<p>对于80%的数据，n&le;1023，m&le;1000。</p>
<p>对于100%的数据，n&le;131071，m&le;100000，n=2<sup>t</sup>-1，1&le;t&le;17，a[i]&le;30000。</p>
<h3>解析</h3>
<p>对于每个询问，用dfs搜索与点x距离为d的点，进行统计即可。</p>
<p>注意每个点之间的关系，访问父亲是x&lt;&lt;1，左儿子是x&gt;&gt;1，右儿子是x&gt;&gt;1+1，要特判一下左右儿子编号不能大于n，否则会RE。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('918a5926-285f-4200-89df-779bf38d8514')"><img id="code_img_closed_918a5926-285f-4200-89df-779bf38d8514" class="code_img_closed" src="./images/长乐国庆集训Day30.png" alt="" /><img id="code_img_opened_918a5926-285f-4200-89df-779bf38d8514" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('918a5926-285f-4200-89df-779bf38d8514',event)" src="./images/长乐国庆集训Day31.png" alt="" />
<div id="cnblogs_code_open_918a5926-285f-4200-89df-779bf38d8514" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;<span style="color: #000000;">
#include </span>&lt;queue&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=<span style="color: #800080;">131073</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m,a[N],dd,ans;
</span><span style="color: #0000ff;">void</span> dfs(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span> d,<span style="color: #0000ff;">int</span> <span style="color: #0000ff;">from</span><span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">if</span>(d&gt;dd) <span style="color: #0000ff;">return</span><span style="color: #000000;"> ;
    </span><span style="color: #0000ff;">if</span>(d==<span style="color: #000000;">dd)
    {
        ans</span>+=<span style="color: #000000;">a[x];
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ;
    }
    </span><span style="color: #0000ff;">int</span> y=x&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span>(y&gt;=<span style="color: #800080;">1</span>&amp;&amp;y!=<span style="color: #0000ff;">from</span>) dfs(y,d+<span style="color: #800080;">1</span><span style="color: #000000;">,x);
    y</span>=x&lt;&lt;<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span>(y&lt;=n&amp;&amp;y!=<span style="color: #0000ff;">from</span>) dfs(y,d+<span style="color: #800080;">1</span><span style="color: #000000;">,x);
    </span><span style="color: #0000ff;">if</span>(y+<span style="color: #800080;">1</span>&lt;=n&amp;&amp;y+<span style="color: #800080;">1</span>!=<span style="color: #0000ff;">from</span>) dfs(y+<span style="color: #800080;">1</span>,d+<span style="color: #800080;">1</span><span style="color: #000000;">,x);
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("dream.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("dream.out","w",stdout);</span>
    n=read(),m=<span style="color: #000000;">read();
    a[</span><span style="color: #800080;">1</span>]=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">2</span>;i&lt;=n;i++) a[i]=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> x=<span style="color: #000000;">read();
        dd</span>=read(),ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
        dfs(x,</span><span style="color: #800080;">0</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
        cout</span>&lt;&lt;ans&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T3 宣传栏</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>有一个大型的矩形宣传栏，高和宽分别为h和m。宣传栏是用来张贴告示的地方，最初，宣传栏是空的，但此后告示将一张一张的被放上去。</p>
<p>有n张告示，每张告示的高都是一个单位长度，第i张贴上的告示宽度为w[i]。</p>
<p>每次张贴时，总是将告示贴在可以张贴且最高的地方，如果有多个可行的地方，则选择最左边张贴。</p>
<p>给定宣传栏的高和宽，你的任务是找出每个告示张贴在第几行。</p>
<p>【输入格式】</p>
<p>第一行为三个整数，h，m和n(1&le;m&le;10<sup>9</sup>;1&le;h&le;n&le;200000)，表示宣传栏的尺寸和张贴的告示个数。</p>
<p>接下来n行表示w[i]（1&le;w[i]&le;10<sup>9</sup>）。</p>
<p>【输出格式】</p>
<p>每行一个整数表示答案。如果第i个告示没地方贴，输出-1。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span> <span style="color: #800080;">5</span> <span style="color: #800080;">5</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">4</span>
<span style="color: #800080;">3</span>
<span style="color: #800080;">3</span>
<span style="color: #800080;">3</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">1</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">1</span>
<span style="color: #800080;">3</span>
-<span style="color: #800080;">1</span></pre>
</div>
<p>【数据规模】</p>
<p>对于20%的数据，n=1。</p>
<p>对于40%的数据，n,m&le;500。</p>
<p>对于70%的数据，n&le;2000。</p>
<p>对于90%的数据，n&le;50000。</p>
<p>对于100%的数据，n&le;200000。</p>
<h3>解析</h3>
<p>用c[i]表示第i行还剩多少长度。</p>
<p>用线段树维护c[i]的区间最大值即可。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('a47c0ab5-3882-494a-bd1b-f404ff376a08')"><img id="code_img_closed_a47c0ab5-3882-494a-bd1b-f404ff376a08" class="code_img_closed" src="./images/长乐国庆集训Day30.png" alt="" /><img id="code_img_opened_a47c0ab5-3882-494a-bd1b-f404ff376a08" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a47c0ab5-3882-494a-bd1b-f404ff376a08',event)" src="./images/长乐国庆集训Day31.png" alt="" />
<div id="cnblogs_code_open_a47c0ab5-3882-494a-bd1b-f404ff376a08" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;<span style="color: #000000;">
#include </span>&lt;queue&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span> h,m,n,c[<span style="color: #800080;">800100</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> w;
</span><span style="color: #0000ff;">void</span> build(<span style="color: #0000ff;">int</span> p,<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span><span style="color: #000000;"> r)
{
    c[p]</span>=<span style="color: #000000;">m;
    </span><span style="color: #0000ff;">if</span>(l==r) <span style="color: #0000ff;">return</span><span style="color: #000000;"> ;
    </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
    build(p</span>*<span style="color: #800080;">2</span>,l,mid),build(p*<span style="color: #800080;">2</span>+<span style="color: #800080;">1</span>,mid+<span style="color: #800080;">1</span><span style="color: #000000;">,r);
}
</span><span style="color: #0000ff;">int</span> ask(<span style="color: #0000ff;">int</span> p,<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span><span style="color: #000000;"> r)
{
    </span><span style="color: #0000ff;">if</span>(l==<span style="color: #000000;">r)
    {
        c[p]</span>-=<span style="color: #000000;">w;
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> l;
    }
    </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span>(c[p*<span style="color: #800080;">2</span>]&gt;=<span style="color: #000000;">w)
    {
        </span><span style="color: #0000ff;">int</span> temp=ask(p*<span style="color: #800080;">2</span><span style="color: #000000;">,l,mid);
        c[p]</span>=max(c[p*<span style="color: #800080;">2</span>+<span style="color: #800080;">1</span>],c[p*<span style="color: #800080;">2</span><span style="color: #000000;">]);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp;
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        </span><span style="color: #0000ff;">int</span> temp=ask(p*<span style="color: #800080;">2</span>+<span style="color: #800080;">1</span>,mid+<span style="color: #800080;">1</span><span style="color: #000000;">,r);
        c[p]</span>=max(c[p*<span style="color: #800080;">2</span>+<span style="color: #800080;">1</span>],c[p*<span style="color: #800080;">2</span><span style="color: #000000;">]);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp;
    }
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("billboard.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("billboard.out","w",stdout);</span>
    h=read(),m=read(),n=<span style="color: #000000;">read();
    build(</span><span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,h);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        w</span>=<span style="color: #000000;">read();
        </span><span style="color: #0000ff;">if</span>(w&gt;c[<span style="color: #800080;">1</span><span style="color: #000000;">])
        {
            cout</span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">-1</span><span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">endl;
            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;
        }
        cout</span>&lt;&lt;ask(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,h)&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T4 种树</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>你要在一条无穷长的马路上种树。</p>
<p>你想种3种树，分别是草莓树，西瓜树，土豆树。</p>
<p>给定3个正整数A,B,C，你可以选择3个整数x,y,z，然后：</p>
<ul>
<li>在位置 &hellip; , x-2A , x-A , x , x+A , x+2A , &hellip; 分别种1棵草莓树。</li>
<li>在位置 &hellip; , y-2B , y-B , y , y+B , y+2B , &hellip; 分别种1棵西瓜树。</li>
<li>在位置 &hellip; , z-2C ,z-C , z , z+C , z+2C , &hellip; 分别种1棵土豆树。</li>
</ul>
<p>你想要最大化最近的两棵树的距离，请你输出这个最大距离。</p>
<p>【输入格式】</p>
<p>每个测试点多组测试数据。</p>
<p>每组数据输入一行A,B,C。</p>
<p>没给出数据组数，你可以这样输入：</p>
<p>while (scanf(&ldquo;%d%d%d&rdquo;, &amp;A, &amp;B, &amp;C) == 3)</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &hellip;&hellip;</p>
<p>}</p>
<p>【输出格式】</p>
<p>对于每个询问输出一行表示答案。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">1</span> <span style="color: #800080;">5</span> <span style="color: #800080;">8</span>
<span style="color: #800080;">3</span> <span style="color: #800080;">3</span> <span style="color: #800080;">6</span>
<span style="color: #800080;">2000</span> <span style="color: #800080;">2000</span> <span style="color: #800080;">2000</span>
<span style="color: #800080;">999</span> <span style="color: #800080;">999</span> <span style="color: #800080;">999</span>
<span style="color: #800080;">233</span> <span style="color: #800080;">233</span> <span style="color: #800080;">233</span>
<span style="color: #800080;">100</span> <span style="color: #800080;">100</span> <span style="color: #800080;">100</span>
<span style="color: #800080;">40</span> <span style="color: #800080;">30</span> <span style="color: #800080;">20</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">0</span>
<span style="color: #800080;">1</span>
<span style="color: #800080;">666</span>
<span style="color: #800080;">333</span>
<span style="color: #800080;">77</span>
<span style="color: #800080;">33</span>
<span style="color: #800080;">5</span></pre>
</div>
<p>【数据规模】</p>
<p>对于100%的数据，1&le;A,B,C&le;2000。</p>
<h3>解析</h3>
<p>先用solve函数求出三树两两之间最小距离的最小值，然后再找到最大的即可。</p>
<p>证明过程比较麻烦，本蒟蒻数论不太好，就不给出详细证明了。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('98a7bb48-fb3b-4aaa-85a7-d71e0df7fa69')"><img id="code_img_closed_98a7bb48-fb3b-4aaa-85a7-d71e0df7fa69" class="code_img_closed" src="./images/长乐国庆集训Day30.png" alt="" /><img id="code_img_opened_98a7bb48-fb3b-4aaa-85a7-d71e0df7fa69" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('98a7bb48-fb3b-4aaa-85a7-d71e0df7fa69',event)" src="./images/长乐国庆集训Day31.png" alt="" />
<div id="cnblogs_code_open_98a7bb48-fb3b-4aaa-85a7-d71e0df7fa69" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;<span style="color: #000000;">
#include </span>&lt;queue&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a,b,c,x,y,z,ans;
</span><span style="color: #0000ff;">int</span> gcd(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">if</span>(y==<span style="color: #800080;">0</span>) <span style="color: #0000ff;">return</span><span style="color: #000000;"> x;
    </span><span style="color: #0000ff;">return</span> gcd(y,x%<span style="color: #000000;">y);
}
</span><span style="color: #0000ff;">int</span> solve(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span> b,<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">int</span> g=<span style="color: #000000;">gcd(a,b);
    </span><span style="color: #0000ff;">int</span> t=(x-y)%<span style="color: #000000;">g;
    </span><span style="color: #0000ff;">if</span>(t&lt;<span style="color: #800080;">0</span>) t+=<span style="color: #000000;">g;
    </span><span style="color: #0000ff;">return</span> min(t,g-<span style="color: #000000;">t);
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">while</span>(cin&gt;&gt;a&gt;&gt;b&gt;&gt;<span style="color: #000000;">c)
    {
        ans</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(y=<span style="color: #800080;">0</span>;y&lt;b;y++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">for</span>(z=<span style="color: #800080;">0</span>;z&lt;c;z++<span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> temp;
                temp</span>=min(solve(a,b,<span style="color: #800080;">0</span>,y),min(solve(b,c,y,z),solve(a,c,<span style="color: #800080;">0</span><span style="color: #000000;">,z)));
                ans</span>=<span style="color: #000000;">max(ans,temp);
            }
        cout</span>&lt;&lt;ans&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>