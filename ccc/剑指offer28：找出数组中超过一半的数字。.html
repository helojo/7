<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修剑指offer28：找出数组中超过一半的数字。' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>剑指offer28：找出数组中超过一半的数字。</center></div><div class='banquan'>原文出处:本文由博客园博主wxwreal提供。<br/>
原文连接:https://www.cnblogs.com/wxwhnu/p/11415849.html</div><br>
    <h3 class="subject-item-title">1 题目描述</h3>
<div class="subject-describe">
<div class="js-question-content">　　数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。例如输入一个长度为9的数组{1,2,3,2,2,2,5,4,2}。由于数字2在数组中出现了5次，超过数组长度的一半，因此输出2。如果不存在则输出0。</div>
</div>
<h3 class="subject-item-title">2 思路和方法</h3>
<h4>　　（1） 哈希表</h4>
<p>　　用哈希表记录每个元素出现的次数，如果该元素出现次数超过一半，返回1，时间复杂度O（n），空间复杂度O（n）。<code>m<span class="token punctuation">[numbers<span class="token punctuation">[i<span class="token punctuation">]<span class="token punctuation">]<span class="token operator">+<span class="token operator">=<span class="token number">1<span class="token punctuation">;&nbsp;</span></span></span></span></span></span></span></span></code><code>map<span class="token operator">&lt;<span class="token keyword">int<span class="token punctuation">, <span class="token keyword">int<span class="token operator">&gt; m<span class="token punctuation">;</span></span></span></span></span></span></code></p>
<h4>　　（2） 排序</h4>
<p>　　先排序，取中间的数，若这个数在数组中出现超过长度一半，则存在；否则不存在时间复杂度O（nlogn）排序；空间复杂度O（1）.</p>
<h4>　　（3） 查找中位数 O(n)</h4>
<p>　　基于partiton函数 O(n)，如果存在：该数出现次数超过一半，排序第2/n个元素是该元素；即为中位数</p>
<h3 class="subject-item-title">3 C++核心代码</h3>
<p>（1）哈希表&nbsp;<code>m<span class="token punctuation">[numbers<span class="token punctuation">[i<span class="token punctuation">]<span class="token punctuation">]<span class="token operator">+<span class="token operator">=<span class="token number">1<span class="token punctuation">;&nbsp;</span></span></span></span></span></span></span></span></code><code>map<span class="token operator">&lt;<span class="token keyword">int<span class="token punctuation">,&nbsp;<span class="token keyword">int<span class="token operator">&gt; m<span class="token punctuation">;</span></span></span></span></span></span></code></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ef300ddb-1d62-45c2-88a6-c43e8c2c9668')"><img id="code_img_closed_ef300ddb-1d62-45c2-88a6-c43e8c2c9668" class="code_img_closed" src="./images/剑指offer28：找出数组中超过一半的数字。0.png" alt="" /><img id="code_img_opened_ef300ddb-1d62-45c2-88a6-c43e8c2c9668" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ef300ddb-1d62-45c2-88a6-c43e8c2c9668',event)" src="./images/剑指offer28：找出数组中超过一半的数字。1.png" alt="" />
<div id="cnblogs_code_open_ef300ddb-1d62-45c2-88a6-c43e8c2c9668" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">int</span> MoreThanHalfNum_Solution(vector&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> numbers) {
</span><span style="color: #008080;"> 4</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 哈希表存储某个数出现的次数 hash查询时间复杂度O（1）;总时间复杂度O（n）</span>
<span style="color: #008080;"> 5</span>         map&lt;<span style="color: #0000ff;">int</span>, <span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> m;
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; numbers.size(); ++<span style="color: #000000;">i) {
</span><span style="color: #008080;"> 7</span>             m[numbers[i]]+=<span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">if</span>(m[numbers[i]]&gt;numbers.size()/<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 9</span>                 <span style="color: #0000ff;">return</span><span style="color: #000000;"> numbers[i];
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">13</span> };</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p class="subject-item-title">（2）&nbsp;排序</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ae3e5a4b-dc9e-41ef-8d4f-23c0aa93b1fb')"><img id="code_img_closed_ae3e5a4b-dc9e-41ef-8d4f-23c0aa93b1fb" class="code_img_closed" src="./images/剑指offer28：找出数组中超过一半的数字。0.png" alt="" /><img id="code_img_opened_ae3e5a4b-dc9e-41ef-8d4f-23c0aa93b1fb" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ae3e5a4b-dc9e-41ef-8d4f-23c0aa93b1fb',event)" src="./images/剑指offer28：找出数组中超过一半的数字。1.png" alt="" />
<div id="cnblogs_code_open_ae3e5a4b-dc9e-41ef-8d4f-23c0aa93b1fb" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">int</span> MoreThanHalfNum_Solution(vector&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> numbers) {
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">        sort(numbers.begin(),numbers.end());
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">int</span> key = numbers[numbers.size()/<span style="color: #800080;">2</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">int</span> count = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; numbers.size(); ++<span style="color: #000000;">i) {
</span><span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">if</span>(key ==<span style="color: #000000;"> numbers[i])
</span><span style="color: #008080;"> 9</span>                 ++<span style="color: #000000;"> count;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">if</span> (count&gt;numbers.size()/<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">12</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> key;
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span> };</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p class="subject-item-title">（3）&nbsp;&nbsp;查找中位数 O(n)&mdash;&mdash;完整代码</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('893c7200-b800-446c-b3f9-06384c45fb25')"><img id="code_img_closed_893c7200-b800-446c-b3f9-06384c45fb25" class="code_img_closed" src="./images/剑指offer28：找出数组中超过一半的数字。0.png" alt="" /><img id="code_img_opened_893c7200-b800-446c-b3f9-06384c45fb25" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('893c7200-b800-446c-b3f9-06384c45fb25',event)" src="./images/剑指offer28：找出数组中超过一半的数字。1.png" alt="" />
<div id="cnblogs_code_open_893c7200-b800-446c-b3f9-06384c45fb25" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">int</span> Partition(<span style="color: #0000ff;">int</span> A[], <span style="color: #0000ff;">int</span> low, <span style="color: #0000ff;">int</span><span style="color: #000000;"> high)
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">int</span> pivot =<span style="color: #000000;"> A[low];
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">while</span> (low &lt;<span style="color: #000000;">high)
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">while</span> (low&lt;high &amp;&amp; A[high] &gt;= pivot) --<span style="color: #000000;">high;
</span><span style="color: #008080;"> 8</span>         A[low] =<span style="color: #000000;"> A[high];
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">while</span> (low&lt;high &amp;&amp; A[low] &lt;= pivot) ++<span style="color: #000000;">low;
</span><span style="color: #008080;">10</span>         A[high] =<span style="color: #000000;"> A[low];
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">12</span>     A[low] =<span style="color: #000000;"> pivot;
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> low;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">}
</span><span style="color: #008080;">15</span> <span style="color: #0000ff;">int</span> HalfData(<span style="color: #0000ff;">int</span> a[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> len)
</span><span style="color: #008080;">16</span> <span style="color: #000000;">{
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">int</span> start = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">int</span> end = len - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">int</span> middle = len &gt;&gt; <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">int</span> index =<span style="color: #000000;"> Partition(a, start, end);
</span><span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span>     <span style="color: #0000ff;">while</span> (index !=<span style="color: #000000;"> middle)
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">if</span> (index &gt;<span style="color: #000000;"> middle)
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">26</span>             end = index - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">27</span>             index =<span style="color: #000000;"> Partition(a, start, end);
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">30</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">31</span>             start = index + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">32</span>             index =<span style="color: #000000;"> Partition(a, start, end);
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">34</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">35</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> a[index];
</span><span style="color: #008080;">36</span> <span style="color: #000000;">}
</span><span style="color: #008080;">37</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">38</span> <span style="color: #000000;">{
</span><span style="color: #008080;">39</span>     <span style="color: #0000ff;">int</span> a[<span style="color: #800080;">9</span>] = { <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">2</span><span style="color: #000000;"> };
</span><span style="color: #008080;">40</span>     <span style="color: #0000ff;">int</span> len = <span style="color: #800080;">9</span><span style="color: #000000;">;
</span><span style="color: #008080;">41</span>     <span style="color: #0000ff;">int</span> result = HalfData(a, <span style="color: #800080;">9</span><span style="color: #000000;">);
</span><span style="color: #008080;">42</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">result:%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, result);
</span><span style="color: #008080;">43</span> 
<span style="color: #008080;">44</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">45</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">46</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<h3 class="subject-item-title">4 C++完整代码　　</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('55d8c937-c772-4dd4-8fa4-acbd703d19ab')"><img id="code_img_closed_55d8c937-c772-4dd4-8fa4-acbd703d19ab" class="code_img_closed" src="./images/剑指offer28：找出数组中超过一半的数字。0.png" alt="" /><img id="code_img_opened_55d8c937-c772-4dd4-8fa4-acbd703d19ab" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('55d8c937-c772-4dd4-8fa4-acbd703d19ab',event)" src="./images/剑指offer28：找出数组中超过一半的数字。1.png" alt="" />
<div id="cnblogs_code_open_55d8c937-c772-4dd4-8fa4-acbd703d19ab" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;vector&gt;
<span style="color: #008080;"> 3</span>  
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 5</span>  
<span style="color: #008080;"> 6</span> <span style="color: #0000ff;">int</span> MoreThanHalfNum(vector&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> numbers) 
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">if</span> (numbers.size() == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">12</span>  
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">int</span> target = numbers[<span style="color: #800080;">0</span><span style="color: #000000;">];
</span><span style="color: #008080;">14</span>     unsigned <span style="color: #0000ff;">int</span> cnt = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">15</span>     
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">for</span> (unsigned <span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt; numbers.size(); ++<span style="color: #000000;">i)
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">if</span> (target ==<span style="color: #000000;"> numbers[i])
</span><span style="color: #008080;">19</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">20</span>             cnt++<span style="color: #000000;">;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">23</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">24</span>             cnt--<span style="color: #000000;">;
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">26</span>  
<span style="color: #008080;">27</span>         <span style="color: #0000ff;">if</span> (cnt == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">29</span>             cnt = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">30</span>             target =<span style="color: #000000;"> numbers[i];
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">33</span>     cnt = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">for</span> (unsigned <span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; numbers.size(); ++<span style="color: #000000;">i)
</span><span style="color: #008080;">35</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">36</span>         <span style="color: #0000ff;">if</span> (target ==<span style="color: #000000;"> numbers[i])
</span><span style="color: #008080;">37</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">38</span>             cnt++<span style="color: #000000;">;
</span><span style="color: #008080;">39</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">40</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">41</span>  
<span style="color: #008080;">42</span>     <span style="color: #0000ff;">if</span> (cnt * <span style="color: #800080;">2</span> &gt;<span style="color: #000000;"> numbers.size())
</span><span style="color: #008080;">43</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">44</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> target;
</span><span style="color: #008080;">45</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">46</span>  
<span style="color: #008080;">47</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">48</span> <span style="color: #000000;">}
</span><span style="color: #008080;">49</span>  
<span style="color: #008080;">50</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
</span><span style="color: #008080;">51</span> <span style="color: #000000;">{
</span><span style="color: #008080;">52</span>     <span style="color: #0000ff;">int</span> a[] = {<span style="color: #800080;">1</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">4</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">5</span>,<span style="color: #800080;">2</span><span style="color: #000000;">};
</span><span style="color: #008080;">53</span>     vector&lt;<span style="color: #0000ff;">int</span>&gt; v(a, a + <span style="color: #800080;">9</span><span style="color: #000000;">);
</span><span style="color: #008080;">54</span>  
<span style="color: #008080;">55</span>     cout&lt;&lt;MoreThanHalfNum(v)&lt;&lt;<span style="color: #000000;">endl;
</span><span style="color: #008080;">56</span>     
<span style="color: #008080;">57</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">58</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p class="subject-item-title">https://blog.csdn.net/u013575812/article/details/50130307</p>
<p>　　时间复杂度O(n)。初始认为数组第一个数就是目标数(target)。之后遍历数组后面的元素，如果等于目标数，计数++; 否则计数--；如果发现目标数的计数&lt;=0 说明当前目标数并不是最终的输出结果。更新目标数为当前遍历到的元素。遍历完数组所有元素之后 验证一下结果即可。</p>
<h3 class="subject-item-title">参考资料</h3>
<p>https://blog.csdn.net/zjwreal/article/details/88607992</p>
<p>https://blog.csdn.net/u013575812/article/details/50130307</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>