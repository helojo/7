<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修通过using声明改变个别成员的可访问性' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>通过using声明改变个别成员的可访问性</center></div><div class='banquan'>原文出处:本文由博客园博主bu2提供。<br/>
原文连接:https://www.cnblogs.com/nowhszh/p/11194039.html</div><br>
    <p>&nbsp;</p>
<p>C++的语法中通过在派生类中使用using声明可以忽略继承方式 , 而让派生类对于基类的私有和保护成员具有特殊的访问权限 , 甚至可以改变派生类对象对于基类成员的访问权限 .</p>
<p>个人认为这种语法很容易让别人对于自己的代码产生误解 , 应该尽量少用或不用 . 为防止自己忘记 , 下面记录一下个人的理解 .</p>
<p>&nbsp;</p>
<p>引用之C++ Primer5 P546</p>
<blockquote>
<p>&nbsp;</p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">通过在类的内部使用</span><span lang="EN-US">using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句</span><span lang="EN-US"> , </span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">我们可以将该类的直接或间接基类中的任何可访问成员标记出来</span> <span lang="EN-US">(</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">非私有成员</span><span lang="EN-US">) . using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句中名字的访问权限由该</span><span lang="EN-US">using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句之前的访问说明符来决定</span></p>
</blockquote>
<p class="MsoNormal" style="display: inline !important;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">白话文解释 : <strong>在派生类的内部通过using声明语句 , 我们可以忽略继承方式 ,改变派生类中可访问的基类成员在派生类中的访问权限</strong> .&nbsp;</span></p>
<p class="MsoNormal" style="display: inline !important;">&nbsp;</p>
<h1><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">通过using声明改变类的继承方式</span></h1>
<p class="MsoNormal" style="display: inline !important;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">文字可能不好理解 , 看代码实例更容易体会<br /></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Base
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> base_public;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">protected</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> base_protect;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> base_private;
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">};
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">class</span> Derive :<span style="color: #0000ff;">private</span><span style="color: #000000;"> Base
</span><span style="color: #008080;">12</span> <span style="color: #000000;">{
</span><span style="color: #008080;">13</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">using</span><span style="color: #000000;"> Base::base_public;
</span><span style="color: #008080;">15</span> <span style="color: #0000ff;">protected</span><span style="color: #000000;">:
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">using</span><span style="color: #000000;"> Base::base_protect;
</span><span style="color: #008080;">17</span> <span style="color: #0000ff;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;">18</span>     <span style="color: #008000;">//</span><span style="color: #008000;">using Base::base_private; </span><span style="color: #008000;">//</span><span style="color: #008000;"> error , 编译器报错 , 不可访问</span>
<span style="color: #008080;">19</span> };</pre>
</div>
<p>代码示例中 , 派生类Derive通过private的方式继承了基类Base , 然而又通过using声明改变了基类成员的访问权限 ,</p>
<p>也就是说这段代码中 , 虽然表面上派生类是以private的方式继承了基类&nbsp; ,而实际上派生类对于基类的访问权限就是public的方式 !&nbsp;</p>
<p>代码实例中可以看出在派生类中无法通过using声明来标记基类的私有成员 , 也验证了书中的话&nbsp; .</p>
<p>由于继承的特性 , 基类的私有成员仍然会自动成为派生类的私有成员</p>
<p>然而这样的代码 ,&nbsp;很容易让人产生误解 .</p>
<p>&nbsp;</p>
<h1>通过using声明 , 做出一些不合常规的代码</h1>
<blockquote>
<p><span lang="EN-US">&nbsp;using</span><span style="font-family: 宋体;">声明语句中名字的访问权限由该</span><span lang="EN-US">using</span><span style="font-family: 宋体;">声明语句之前的访问说明符来决定</span></p>
</blockquote>
<p>通过这一特性 , 甚至可以改变基类成员在派生类中的访问权限 ! 同样通过一些代码来演示</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">#pragma</span> warning (disable:4996)
<span style="color: #008080;"> 2</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Base
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span> base_public = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">protected</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">int</span> base_protect = <span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">int</span> base_private = <span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">};
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> <span style="color: #0000ff;">class</span> Derive :<span style="color: #0000ff;">private</span><span style="color: #000000;"> Base
</span><span style="color: #008080;">15</span> <span style="color: #000000;">{
</span><span style="color: #008080;">16</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;">17</span>     <span style="color: #008000;">//</span><span style="color: #008000;">在public作用域声明基类中的成员</span>
<span style="color: #008080;">18</span>     <span style="color: #0000ff;">using</span><span style="color: #000000;"> Base::base_public;
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">using</span><span style="color: #000000;"> Base::base_protect;
</span><span style="color: #008080;">20</span>     <span style="color: #008000;">//</span><span style="color: #008000;">using Base::base_private; </span><span style="color: #008000;">//</span><span style="color: #008000;"> error , 编译器报错 , 不可访问</span>
<span style="color: #008080;">21</span> <span style="color: #000000;">};
</span><span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">24</span> <span style="color: #000000;">{
</span><span style="color: #008080;">25</span> <span style="color: #000000;">    Derive test;
</span><span style="color: #008080;">26</span>     std::cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">基类的公有成员: </span><span style="color: #800000;">"</span>&lt;&lt; test.base_public &lt;&lt;<span style="color: #000000;"> std::endl;
</span><span style="color: #008080;">27</span>     std::cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">基类的保护成员: </span><span style="color: #800000;">"</span> &lt;&lt; test.base_protect &lt;&lt;<span style="color: #000000;"> std::endl;
</span><span style="color: #008080;">28</span>     <span style="color: #008000;">//</span><span style="color: #008000;">std::cout &lt;&lt; "基类的私有成员: " &lt;&lt; test.base_private &lt;&lt; std::endl; </span><span style="color: #008000;">//</span><span style="color: #008000;">error , 不可访问</span>
<span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> EXIT_SUCCESS;
</span><span style="color: #008080;">32</span> }</pre>
</div>
<p>代码中通过给基类的成员设定了默认初始值以便访问时显示 , 最终的运行结果如下</p>
<div class="cnblogs_code">
<pre>基类的公有成员: <span style="color: #800080;">1</span><span style="color: #000000;">
基类的保护成员: </span><span style="color: #800080;">2</span><span style="color: #000000;">
请按任意键继续. . .</span></pre>
</div>
<p>代码中派生类继承时同样使用private的方式继承 , 然而我们把using声明放在了public权限下&nbsp; , 由于 "<span style="color: #333333;" lang="EN-US">&nbsp;using</span><span style="color: #333333; font-family: 宋体;">声明语句中名字的访问权限由该</span><span style="color: #333333;" lang="EN-US">using</span><span style="color: #333333; font-family: 宋体;">声明语句之前的访问说明符来决定</span>"&nbsp;</p>
<p>所以此时<strong>基类中的公有成员和保护成员都变成了派生类中的公有成员</strong>&nbsp; , 也就是说通过using声明 , 我们通过私有继承的派生类 比 公有继承的访问权限反而更高&nbsp; !&nbsp;</p>
<p>&nbsp;</p>
<p>在main()函数中 派生类的对象可以访问基类的保护成员也验证了基类的保护成员在派生类中的访问权限已变成公有 .</p>
<p>也就是说<strong>通过这样的方式派生类对象可以访问基类的保护成员 , 而基类自己的对象却无法访问 .</strong></p>
<p>需要注意的是通过派生类访问基类的保护成员时 , 编译器并不会给出智能提示 .&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">通过在类的内部使用</span><span lang="EN-US">using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句</span><span lang="EN-US"> , </span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">我们可以将该类的直接或间接基类中的任何可访问成员标记出来</span> <span lang="EN-US">(</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">只限于非私有成员</span><span lang="EN-US">) . using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句中名字的访问权限由该</span><span lang="EN-US">using</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">声明语句之前的访问说明符来决定</span></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>