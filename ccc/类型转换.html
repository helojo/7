<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修类型转换' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>类型转换</center></div><div class='banquan'>原文出处:本文由博客园博主charons提供。<br/>
原文连接:https://www.cnblogs.com/Charons/p/11241490.html</div><br>
    <p><strong><span style="font-size: 18px;">c++自动执行很多类型转换：</span></strong></p>
<ul>
<li><strong><span style="font-size: 18px;">将一种算术类型的值赋给另一种算术类型的变量时，c++将对值进行转换；</span></strong></li>
<li><strong><span style="font-size: 18px;">表达式中包含不哦那个的类型时，c++将对值进行转换；</span></strong></li>
<li><strong><span style="font-size: 18px;">将参数传递给函数时，c++将对值进行转换。</span></strong></li>
</ul>
<p><strong><span style="font-size: 18px;">如果不知道进行这些自动转换时将发生的情况，将无法理解一些程序的结果，因此下面将介绍这些规则。</span></strong></p>
<p><strong><span style="font-size: 18px;">1，初始化和赋值进行的转换</span></strong></p>
<p><strong><span style="font-size: 18px;">c++允许将一种类型的值赋给另一种类型的变量。这样做时，值将被转换为接收变量的类型。</span></strong></p>
<div class="cnblogs_code">
<pre><strong><span style="font-size: 18px;"><span style="color: #000000;">假设：
</span><span style="font-size: 14px;"><span style="color: #0000ff;">long</span><span style="color: #000000;"> so_long;
</span><span style="color: #0000ff;">short</span><span style="color: #000000;"> thirty;
so_long </span>= thirty;  <span style="color: #008000;">//</span><span style="color: #008000;">assigning a short to a long</span></span></span></strong></pre>
</div>
<p><strong><span style="font-size: 18px;">程序将 thity 的值short（通常是16位）扩展为 long(通常为32位)。扩展后将得到一个新值，被存储在 so_long 中，而 thirty 的值不变。</span></strong></p>
<p><strong><span style="font-size: 18px;">将一个值赋给值，取值范围更大的类型通常不会导致什么问题。如，将 short 值赋给 long 变量并不会改变这个值。</span></strong></p>
<p><strong><span style="font-size: 18px;">然而，将一个很大的 long 值赋给 float 变量将降低精度。因为 float 只有六位有效数字。</span></strong></p>
<p><strong><span style="font-size: 18px;">因此，有些转换是安全的，有些则会带来麻烦。</span></strong></p>
<p><strong><span style="font-size: 18px;"><img src="./images/类型转换0.png" alt="" width="600" height="142" /></span></strong></p>
<p><strong><span style="font-size: 18px;">将 0 赋给 bool&nbsp; 变量时，将被转换为 false;而非零值被转换为 true。</span></strong></p>
<p><strong><span style="font-size: 18px;">2，以 { } 方式初始化时进行的转换（c++11）</span></strong></p>
<p><strong><span style="font-size: 18px;">c++11将使用大括号的初始化称为&ldquo;列表初始化&rdquo;，这种初始化常用于给复杂的数据类型提供值列表。它对类型转换的要求更严格。</span></strong></p>
<p><strong><span style="font-size: 18px;">列表初始化不允许缩窄，即变量的类型可能无法表示赋给它的值。如，不允许将浮点类型转换为整型。在不同的整型之间转换或将整型转换</span></strong></p>
<p><strong><span style="font-size: 18px;">为浮点型可能被允许，条件是编译器知道目标变量能够正确存储赋给它的值。如，long 变量初始化为 int 值，因为 long 总是至少与 int 一样长；</span></strong></p>
<div class="cnblogs_code">
<pre><strong><span style="font-size: 14px;"><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> code = <span style="color: #800080;">66</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span> x = <span style="color: #800080;">66</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">char</span> c1 {<span style="color: #800080;">31325</span>};    <span style="color: #008000;">//</span><span style="color: #008000;">narrowing,not allowed</span>
<span style="color: #0000ff;">char</span> c2 {<span style="color: #800080;">66</span>};          <span style="color: #008000;">//</span><span style="color: #008000;">allowed because char can hold 66</span>
<span style="color: #0000ff;">char</span> c3 {code};      <span style="color: #008000;">//</span><span style="color: #008000;">allowed because char can hold 66</span>
<span style="color: #0000ff;">char</span> c4 {x};            <span style="color: #008000;">//</span><span style="color: #008000;">not allowed,x is not constant</span>
x = <span style="color: #800080;">31325</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">char</span> c5 {x};            <span style="color: #008000;">//</span><span style="color: #008000;">allowed by this form of initialization</span></span></strong></pre>
</div>
<p><strong><span style="font-size: 18px;">3,表达式中的转换</span></strong></p>
<p><strong><span style="font-size: 18px;">当同一个表达式中包含两种不同的算术类型时，c++将执行两种自动转换：</span></strong></p>
<ul>
<li><strong><span style="font-size: 18px;">一些类型在出现时便会自动转换；</span></strong></li>
<li><strong><span style="font-size: 18px;">有些类型在与其他类型同时出现时将被转换。</span></strong></li>
</ul>
<p><strong><span style="font-size: 18px;">在计算表达式时，c++将 bool、char、unsigned char、signed char和short值转换为 int。</span></strong></p>
<p><strong><span style="font-size: 18px;">具体说，ture 被转换为 1，false 被转换为 0.这些转换被称为整型提升。</span></strong></p>
<p><strong><span style="font-size: 18px;">将不同类型进行算术运算时，也会进行一些转换，如，将 int 和 float 相加时，运算涉及两种类型时，</span></strong></p>
<p><strong><span style="font-size: 18px;">较小的类型将被转换为较大的类型。</span></strong></p>
<p><strong><span style="font-size: 18px;">4，传递参数时的转换</span></strong></p>
<p><strong><span style="font-size: 18px;">传递参数时的转换通常由c++函数原型控制。</span></strong></p>
<p><strong><span style="font-size: 18px;">5，强制类型转换</span></strong></p>
<p><strong><span style="font-size: 18px;">c++还允许通过强制类型转换机制显式的进行类型转换。强制类型转换的格式有两种。</span></strong></p>
<p><strong><span style="font-size: 18px;">如，为将存储在变量 thorn 中的 int 值转换为 long 类型可以使用如下表达式中的一种：</span></strong></p>
<div class="cnblogs_code">
<pre><strong><span style="font-size: 14px;">(<span style="color: #0000ff;">long</span>) thorn    <span style="color: #008000;">//</span><span style="color: #008000;">returns a type long convert of thorn</span>
<span style="color: #0000ff;">long</span> (thorn)    <span style="color: #008000;">//</span><span style="color: #008000;">returns a type long convert of thorn</span></span></strong></pre>
</div>
<p><strong><span style="font-size: 18px;">强制类型转换不会修改 thorn 变量本身，而是创建一个新的、指定类型的值，可以在表达式中使用这个值。</span></strong></p>
<p><strong><span style="font-size: 18px;">强制转换的通用格式如下：</span></strong></p>
<div class="cnblogs_code">
<pre><strong><span style="font-size: 14px;">(typeName) value     <span style="color: #008000;">//old c syntax</span>
typeName (value)     <span style="color: #008000;">//new c++ syntax</span></span></strong></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>