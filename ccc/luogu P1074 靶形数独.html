<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修luogu P1074 靶形数独' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>luogu P1074 靶形数独</center></div><div class='banquan'>原文出处:本文由博客园博主yu__xuan提供。<br/>
原文连接:https://www.cnblogs.com/poi-bolg-poi/p/10895511.html</div><br>
    <h1 id="p1074-靶形数独"><a href="https://www.luogu.org/problemnew/show/P1074">P1074 靶形数独</a></h1>
<h2 id="题目描述">题目描述</h2>
<p>小城和小华都是热爱数学的好学生，最近，他们不约而同地迷上了数独游戏，好胜的他们想用数独来一比高低。但普通的数独对他们来说都过于简单了，于是他们向 Z 博士请教，Z 博士拿出了他最近发明的“靶形数独”，作为这两个孩子比试的题目。<br />
靶形数独的方格同普通数独一样，在 9 格宽×9 格高的大九宫格中有 9 个 3 格宽×3 格高的小九宫格（用粗黑色线隔开的）。在这个大九宫格中，有一些数字是已知的，根据这些数字，利用逻辑推理，在其他的空格上填入 11 到 9的数字。每个数字在每个小九宫格内不能重复出现，每个数字在每行、每列也不能重复出现。但靶形数独有一点和普通数独不同，即每一个方格都有一个分值，而且如同一个靶子一样，离中心越近则分值越高。（如图）<br />
上图具体的分值分布是：最里面一格（黄色区域）为 10 分，黄色区域外面的一圈（红色区域）每个格子为 9分，再外面一圈（蓝色区域）每个格子为 8 分，蓝色区域外面一圈（棕色区域）每个格子为 7分，最外面一圈（白色区域）每个格子为 6分，如上图所示。比赛的要求是：每个人必须完成一个给定的数独（每个给定数独可能有不同的填法），而且要争取更高的总分数。而这个总分数即每个方格上的分值和完成这个数独时填在相应格上的数字的乘积的总和<br />
总分数即每个方格上的分值和完成这个数独时填在相应格上的数字的乘积的总和。如图，在以下的这个已经填完数字的靶形数独游戏中，总分数为 2829。游戏规定，将以总分数的高低决出胜负。<br />
由于求胜心切，小城找到了善于编程的你，让你帮他求出，对于给定的靶形数独，能够得到的最高分数。</p>
<h2 id="输入输出格式">输入输出格式</h2>
<h3 id="输入格式">输入格式：</h3>
<p>一共 9 行。每行 9个整数（每个数都在 0−9 的范围内），表示一个尚未填满的数独方格，未填的空格用“0”表示。每两个数字之间用一个空格隔开。</p>
<h3 id="输出格式">输出格式：</h3>
<p>输出共 1 行。输出可以得到的靶形数独的最高分数。如果这个数独无解，则输出整数−1。</p>
<h2 id="输入输出样例">输入输出样例</h2>
<h3 id="输入样例1">输入样例#1：</h3>
<p>7 0 0 9 0 0 0 0 1<br />
1 0 0 0 0 5 9 0 0<br />
0 0 0 2 0 0 0 8 0<br />
0 0 5 0 2 0 0 0 3<br />
0 0 0 0 0 0 6 4 8<br />
4 1 3 0 0 0 0 0 0<br />
0 0 7 0 0 2 0 9 0<br />
2 0 1 0 6 0 8 0 4<br />
0 8 0 5 0 4 0 1 2</p>
<h3 id="输出样例1">输出样例#1：</h3>
<p>2829</p>
<h3 id="输入样例2">输入样例#2：</h3>
<p>0 0 0 7 0 2 4 5 3<br />
9 0 0 0 0 8 0 0 0<br />
7 4 0 0 0 5 0 1 0<br />
1 9 5 0 8 0 0 0 0<br />
0 7 0 0 0 0 0 2 5<br />
0 3 0 5 7 9 1 0 8<br />
0 0 0 6 0 1 0 0 0<br />
0 6 0 9 0 0 0 0 1<br />
0 0 0 0 0 0 0 0 6</p>
<h3 id="输出样例2">输出样例#2：</h3>
<p>2852</p>
<h2 id="说明">说明</h2>
<p>【数据范围】<br />
40%的数据，数独中非 00 数的个数不少于 3030。<br />
80%的数据，数独中非 00 数的个数不少于2626。<br />
100%的数据，数独中非0 0数的个数不少于 2424。<br />
NOIP 2009 提高组 第四题</p>
<p>Code:</p>
<pre><code>#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;cstdlib&gt;
#include&lt;algorithm&gt;
using namespace std;
long long ans=0;
bool f=0;
int jgg[11][11];
bool h[11][11];
bool l[11][11];
bool g[11][11];
struct cnt {
    int num,tot;
} js[11];
int score[11][11]= {
    {0,0,0,0,0,0,0,0,0,0},
    {0,6,6,6,6,6,6,6,6,6},
    {0,6,7,7,7,7,7,7,7,6},
    {0,6,7,8,8,8,8,8,7,6},
    {0,6,7,8,9,9,9,8,7,6},
    {0,6,7,8,9,10,9,8,7,6},
    {0,6,7,8,9,9,9,8,7,6},
    {0,6,7,8,8,8,8,8,7,6},
    {0,6,7,7,7,7,7,7,7,6},
    {0,6,6,6,6,6,6,6,6,6}
};
void calc() {
    f=1;
    long long sum=0;
    for(int i=1; i&lt;=9; ++i) {
        for(int j=1; j&lt;=9; ++j) {
            sum+=jgg[i][j]*score[i][j];
        }
    }
    if(sum&gt;ans) ans=sum;
}
void dfs(int c,int z,int t) {
    if(jgg[c][z]!=0) {
        if(t==9&amp;&amp;z==9) calc();
        else if(z==9) dfs(js[t+1].num,1,t+1);
        else dfs(c,z+1,t);
    } else {
        for(int i=1; i&lt;=9; ++i) {
            if((!h[c][i])&amp;&amp;(!l[z][i])&amp;&amp;(!g[(c-1)/3*3+(z-1)/3+1][i])) {
                jgg[c][z]=i;
                h[c][i]=1,l[z][i]=1,g[(c-1)/3*3+(z-1)/3+1][i]=1;
                if(t==9&amp;&amp;z==9) calc();
                else if(z==9) dfs(js[t+1].num,1,t+1);
                else dfs(c,z+1,t);
                jgg[c][z]=0;
                h[c][i]=0,l[z][i]=0,g[(c-1)/3*3+(z-1)/3+1][i]=0;
            }
        }
    }
}
bool cmp(cnt a,cnt b) {
    return a.tot&lt;b.tot;
}

int main() {
    for(int i=1; i&lt;=9; ++i)
        js[i].num=i,js[i].tot=0;
    for(int i=1; i&lt;=9; ++i) {
        for(int j=1; j&lt;=9; ++j) {
            scanf(&quot;%d&quot;,&amp;jgg[i][j]);
            if(jgg[i][j]!=0) {
                if(h[i][jgg[i][j]]==1) {
                    printf(&quot;-1\n&quot;);
                    return 0;
                }
                if(l[j][jgg[i][j]]==1) {
                    printf(&quot;-1\n&quot;);
                    return 0;
                }
                if(g[(i-1)/3*3+(j-1)/3+1][jgg[i][j]]==1) {
                    printf(&quot;-1\n&quot;);
                    return 0;
                }
                h[i][jgg[i][j]]=1,l[j][jgg[i][j]]=1;
                g[(i-1)/3*3+(j-1)/3+1][jgg[i][j]]=1;
            } else js[i].tot++;
        }
    }
    sort(js+1,js+1+9,cmp);
    dfs(js[1].num,1,1);
    if(!f) printf(&quot;-1&quot;);
    else printf(&quot;%lld\n&quot;,ans);
    return 0;
}</code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>