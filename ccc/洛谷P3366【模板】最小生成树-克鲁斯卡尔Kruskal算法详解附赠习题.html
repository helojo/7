<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题</center></div><div class='banquan'>原文出处:本文由博客园博主嘉德罗斯提供。<br/>
原文连接:https://www.cnblogs.com/BatmanWhoLaughs/p/10864716.html</div><br>
    <p><a title="题目" href="https://www.luogu.org/problemnew/show/P3366" target="_blank">链接</a></p>
<blockquote>
<h2>题目描述</h2>
<p>如题，给出一个无向图，求出最小生成树，如果该图不连通，则输出orz</p>
<h2>输入输出格式</h2>
<p><strong>输入格式：</strong></p>
<p>第一行包含两个整数N、M，表示该图共有N个结点和M条无向边。（N&lt;=5000，M&lt;=200000）</p>
<p>接下来M行每行包含三个整数Xi、Yi、Zi，表示有一条长度为Zi的无向边连接结点Xi、Yi</p>
<p><strong>输出格式：</strong></p>
<p>输出包含一个数，即最小生成树的各边的长度之和；如果该图不连通则输出orz</p>
<h2>输入输出样例</h2>
<div class="am-g">
<div class="am-u-md-6 copy-region"><strong>输入样例#1：</strong>&nbsp;
<pre>4 5
1 2 2
1 3 2
1 4 3
2 3 4
3 4 3</pre>
</div>
<div class="am-u-md-6 copy-region"><strong>输出样例#1：</strong>&nbsp;
<pre>7</pre>
</div>
</div>
<h2>说明</h2>
<p>时空限制：1000ms,128M</p>
<p>数据规模：</p>
<p>对于20%的数据：N&lt;=5，M&lt;=20</p>
<p>对于40%的数据：N&lt;=50，M&lt;=2500</p>
<p>对于70%的数据：N&lt;=500，M&lt;=10000</p>
<p>对于100%的数据：N&lt;=5000，M&lt;=200000</p>
</blockquote>
<p>&nbsp;</p>
<h2><span style="font-family: Microsoft YaHei;">分析</span></h2>
<p><span style="font-family: 幼圆;">这是一道求最小生成树的模板题。</span></p>
<p><span style="font-family: 幼圆;">假设一个拥有n个节点的图，若它是个连通图，则可求其最小生成树。什么是最小生成树？先来解释一下生成树。</span></p>
<blockquote>
<p>如果连通图 G的一个子图是一棵包含G 的所有顶点的树，则该子图称为G的生成树。</p>
</blockquote>
<p><span style="font-family: 幼圆;">简而言之，就是通过连接一些边而使这个图的任意节点之间直接或间接地相连通。<span style="text-decoration: underline;">最小</span>生成树，可以理解为连接的边的边权和最小时的生成树。一般而言，常用的求最小生成树的方法有克鲁斯卡尔Kruskal和普里姆Prim算法，在本篇中仅介绍克鲁斯卡尔算法。它的思想其实非常好理解，我们把每个点看做一个集合。</span></p>
<ol>
<li><span style="font-family: 幼圆;">在一开始，设每个点各成一个集合，也就是运用<span style="color: #ff0000;">并查集<span style="color: #000000;">的思想</span></span>。</span></li>
<li><span style="font-family: 幼圆;">读入边后，将边从小到大排序，运用的是<span style="color: #ff0000;">贪心</span>思想。这样可以保证最终的结果值最小。</span></li>
<li><span style="font-family: 幼圆;">我们从最小的边开始，如果这条边两端的点不在一个集合内，就把这条边连起来，再把两端的点并成一个集合。</span></li>
<li><span style="font-family: 幼圆;">当连接的边的数量是点数-1时，我们就得到我们要求的最小生成树了。</span></li>
</ol>
<p><span style="font-family: 幼圆;">&rdquo;当连接的边的数量是点数-1时&ldquo;，为什么呢？若这个图中有n个点，则我们要做的是把n个集合连成一个集合，边数当然必须是n-1。多一条则会成环，少一条则无法联通。</span></p>
<p><span style="font-family: 幼圆;">以输入样例为例，这个图一开始就是这样的（样例似乎有些不合理，画图水平也实在不行，将就着看）：</span></p>
<p><img src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题0.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="font-family: 幼圆;">我们对边进行排序，得到最小的边是连接1,2和1,3的两条边。这里我们先处理1,2这条边，我们知道它们此刻当然不在一个集合中，于是连接。</span></p>
<p><img src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题1.png" alt="" /></p>
<p><span style="font-family: 幼圆;">如上图，sum表示当前所求出的边权之和。这时该操作的就是1,3之间的连线，它们目前并不属于一个集合，所以我们把它们连起来，点1,2,3就处于一个集合中啦。</span></p>
<p><img src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题2.png" alt="" /></p>
<p><span style="font-family: 幼圆;">再接下来剩下三条边，权值分别为3,3,4，那么我们先处理1，4之间的这条边，很明显点4现在并不与1处于同一个集合。我们把它连起来。</span></p>
<p><img src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题3.png" alt="" /></p>
<p><span style="font-family: 幼圆;">这时我们发现，连接的边数为3，已经等于点数-1了，退出操作，输出结果7.观察此时的图，四个点确实都在连线中，这个图的最小生成树值为7.</span></p>
<p><span style="font-family: 幼圆;">这就是克鲁斯卡尔Kruskal的总体思想，非常易于理解。</span></p>
<h2><span style="font-family: Microsoft YaHei;">代码</span></h2>
<p><span style="font-family: 幼圆;">首先考虑如何存边，由上面的思考过程我们可以想到，我们希望可以快捷简便的获得一条边的序号、起止点和权值。二维数组显然不是理想解法，我们考虑<strong>结构体</strong>。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> bia{
</span><span style="color: #008080;">2</span>     <span style="color: #0000ff;">int</span> s,t;<span style="color: #008000;">//</span><span style="color: #008000;">s表示起点，t表示终点 </span>
<span style="color: #008080;">3</span>     <span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> c;<span style="color: #008000;">//</span><span style="color: #008000;">c表示权值，使用long long或int应依数据范围决定 </span>
<span style="color: #008080;">4</span> <span style="color: #000000;">};
</span><span style="color: #008080;">5</span> bia b[<span style="color: #800080;">200001</span>];</pre>
</div>
<p><span style="font-family: 幼圆;">如果要将结构体表示的边从小到大进行排序，直接使用sort会出问题。我们可以自己编写一个cmp函数，表示排序规则。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> cmp(bia a,bia b){
</span><span style="color: #008080;">2</span>     <span style="color: #0000ff;">if</span>(a.c&lt;<span style="color: #000000;">b.c)
</span><span style="color: #008080;">3</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">5</span> }</pre>
</div>
<p><span style="font-family: 幼圆;">我个人习惯一种更简洁的写法，一会会在完整程序中展现。</span></p>
<p><span style="font-family: 幼圆;">考虑到&rdquo;把每个点看成一个集合&ldquo;的<strong>并查集</strong>思想，我们当然也需要设一个数组fa[]表示每个点所属集合啦。但在这里我们只需要并查集比较常见的查询，合并可以直接用简洁的fa[u]=v来表示。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;">2</span>     <span style="color: #0000ff;">if</span>(fa[x]==<span style="color: #000000;">x)
</span><span style="color: #008080;">3</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> x;
</span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">5</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">6</span>         fa[x]=<span style="color: #000000;">find(fa[x]);
</span><span style="color: #008080;">7</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> fa[x];
</span><span style="color: #008080;">8</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">9</span> }</pre>
</div>
<p><span style="font-family: 幼圆;">这里同样有一种更简洁的写法。</span></p>
<p><span style="font-family: 幼圆;">处理完这些，我们就可以编写克鲁斯卡尔算法的主体程序了。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> kru(){
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++)<span style="color: #008000;">//</span><span style="color: #008000;">按权值从小到大的顺序对边进行操作 </span>
<span style="color: #008080;"> 3</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">int</span> u=find(b[i].s),v=find(b[i].t);<span style="color: #008000;">//</span><span style="color: #008000;">u和v分别表示这条边两端节点所属的集合 </span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;"> 6</span>             <span style="color: #0000ff;">continue</span>;<span style="color: #008000;">//</span><span style="color: #008000;">若该边连接的两点已经处于一个集合中，则不必进行连接，直接进行下一条边 </span>
<span style="color: #008080;"> 7</span>         fa[u]=v;<span style="color: #008000;">//</span><span style="color: #008000;">将该边连接的两点进行合并 </span>
<span style="color: #008080;"> 8</span>         ans+=b[i].c;<span style="color: #008000;">//</span><span style="color: #008000;">ans即上图中的sum，表示所求的最小生成树之值 </span>
<span style="color: #008080;"> 9</span>         s++;<span style="color: #008000;">//</span><span style="color: #008000;">用s统计目前已连接的边数，若已连接n-1条边，则结束程序，输出结果 </span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">if</span>(s==n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">11</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">13</span> }</pre>
</div>
<p><span style="font-family: 幼圆;">这样我们就完成了克鲁斯卡尔算法，建议先通过<span style="text-decoration: underline; font-family: Microsoft YaHei;">洛谷P3366【模板】最小生成树</span>这道题。AC代码如下。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;algorithm&gt;<span style="color: #008000;">//</span><span style="color: #008000;">sort需要的头文件 </span>
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> bia{
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">int</span> s,t;<span style="color: #008000;">//</span><span style="color: #008000;">s表示起点，t表示终点 </span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> c;<span style="color: #008000;">//</span><span style="color: #008000;">c表示权值，使用long long或int应依数据范围决定 </span>
<span style="color: #008080;"> 7</span> <span style="color: #000000;">};
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> cmp(bia a,bia b){
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">return</span> a.c&lt;b.c;<span style="color: #008000;">//</span><span style="color: #008000;">这是一种更简洁的写法 </span>
<span style="color: #008080;">10</span> <span style="color: #000000;">}
</span><span style="color: #008080;">11</span> bia b[<span style="color: #800080;">200001</span>];<span style="color: #008000;">//</span><span style="color: #008000;">用b数组存储边 </span>
<span style="color: #008080;">12</span> <span style="color: #0000ff;">int</span> n,m,ans,s,fa[<span style="color: #800080;">5001</span>];<span style="color: #008000;">//</span><span style="color: #008000;">n为点数，m为边数，ans为答案，s为已连接边数，fa[]表示点所在的集合 </span>
<span style="color: #008080;">13</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">return</span> x==fa[x]?x:fa[x]=find(fa[x]);<span style="color: #008000;">//</span><span style="color: #008000;">也是一种简便写法 </span>
<span style="color: #008080;">15</span> <span style="color: #000000;">}
</span><span style="color: #008080;">16</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> kru(){
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++)<span style="color: #008000;">//</span><span style="color: #008000;">从最小的边开始操作 </span>
<span style="color: #008080;">18</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">int</span> u=find(b[i].s),v=find(b[i].t);<span style="color: #008000;">//</span><span style="color: #008000;">u和v分别表示该条边两端节点所处的集合 </span>
<span style="color: #008080;">20</span>         <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;">21</span>             <span style="color: #0000ff;">continue</span>;<span style="color: #008000;">//</span><span style="color: #008000;">若两点属于同一集合，该边不需要连接，直接操作下一条 </span>
<span style="color: #008080;">22</span>         fa[u]=v;<span style="color: #008000;">//</span><span style="color: #008000;">将两点并入同一集合 </span>
<span style="color: #008080;">23</span>         ans+=b[i].c;<span style="color: #008000;">//</span><span style="color: #008000;">将该边边权加入答案 </span>
<span style="color: #008080;">24</span>         s++;<span style="color: #008000;">//</span><span style="color: #008000;">累计目前已连接边的边数，若为n-1则结束运算并输出答案 </span>
<span style="color: #008080;">25</span>         <span style="color: #0000ff;">if</span>(s==n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">28</span> <span style="color: #000000;">}
</span><span style="color: #008080;">29</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">30</span> <span style="color: #000000;">{
</span><span style="color: #008080;">31</span>     cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">m;
</span><span style="color: #008080;">32</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">33</span>         fa[i]=i;<span style="color: #008000;">//</span><span style="color: #008000;">初始化每个点各成一个集合 </span>
<span style="color: #008080;">34</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">35</span>         cin&gt;&gt;b[i].s&gt;&gt;b[i].t&gt;&gt;<span style="color: #000000;">b[i].c;
</span><span style="color: #008080;">36</span>     sort(b+<span style="color: #800080;">1</span>,b+m+<span style="color: #800080;">1</span><span style="color: #000000;">,cmp);
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    kru();
</span><span style="color: #008080;">38</span>     <span style="color: #0000ff;">if</span>(s==n-<span style="color: #800080;">1</span><span style="color: #000000;">) 
</span><span style="color: #008080;">39</span>            cout&lt;&lt;<span style="color: #000000;">ans;
</span><span style="color: #008080;">40</span>        <span style="color: #0000ff;">else</span>
<span style="color: #008080;">41</span>            cout&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">orz</span><span style="color: #800000;">"</span>;<span style="color: #008000;">//</span><span style="color: #008000;">实际上本题并不需要输出orz，数据中没有无解情况，但我们仍应考虑所有题目条件 </span>
<span style="color: #008080;">42</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">43</span> }</pre>
</div>
<p><span style="font-family: Microsoft YaHei;"><strong>评测结果</strong></span><span style="font-family: 幼圆;">（截图是无注释版的结果，仍可以进行快读快写之类的优化，但这个题显然并不需要）</span></p>
<p><img src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题4.png" alt="" /></p>
<p><strong>附</strong></p>
<p><span style="font-family: 幼圆;">值得一提的是，克鲁斯卡尔算法的时间复杂度为O(mlogn），普里姆算法的复杂度为O(n^2)，优化后可达到O(mlogn)（实际上还可进行优化，但编程复杂度也会相应提高许多）。在面对稀疏图（边数较少的图）时不妨采用克鲁斯卡尔算法，在面对稠密图（边数较多）的图时则可考虑普里姆优化算法。</span></p>
<p><span style="font-family: 幼圆;">完成模板题后，不如再进行几道练习题练手&mdash;&mdash;都是较为简单的题目，对模板稍加改动即可。附上AC代码<span style="text-decoration: line-through;">，复制粘贴可能被kkk制裁哦</span>。</span></p>
<p><a title="洛谷P2820局域网" href="https://www.luogu.org/fe/problem/P2820" target="_blank">洛谷P2820局域网</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('db0c6ee5-7d65-4afa-8a20-3895c6743f62')"><img id="code_img_closed_db0c6ee5-7d65-4afa-8a20-3895c6743f62" class="code_img_closed" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题5.png" alt="" /><img id="code_img_opened_db0c6ee5-7d65-4afa-8a20-3895c6743f62" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('db0c6ee5-7d65-4afa-8a20-3895c6743f62',event)" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题6.png" alt="" />
<div id="cnblogs_code_open_db0c6ee5-7d65-4afa-8a20-3895c6743f62" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;algorithm&gt;
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> bia{
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> s,t;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> c;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">};
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> cmp(bia a,bia b){
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">return</span> a.c&lt;<span style="color: #000000;">b.c;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">}
</span><span style="color: #008080;">11</span> bia a[<span style="color: #800080;">10001</span><span style="color: #000000;">];
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">int</span> n,k,sum,ans,s,fa[<span style="color: #800080;">101</span><span style="color: #000000;">];
</span><span style="color: #008080;">13</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">return</span> x==fa[x]?<span style="color: #000000;">x:find(fa[x]);
</span><span style="color: #008080;">15</span> <span style="color: #000000;">}
</span><span style="color: #008080;">16</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> kru(){
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=k;i++<span style="color: #000000;">)
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">int</span> u=find(a[i].s),v=<span style="color: #000000;">find(a[i].t);
</span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;">21</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span>         fa[u]=<span style="color: #000000;">v;
</span><span style="color: #008080;">23</span>         s++<span style="color: #000000;">;
</span><span style="color: #008080;">24</span>         sum+=<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">if</span>(s==n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">28</span> <span style="color: #000000;">}
</span><span style="color: #008080;">29</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">30</span> <span style="color: #000000;">{
</span><span style="color: #008080;">31</span>     cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">k;
</span><span style="color: #008080;">32</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">33</span>         fa[i]=<span style="color: #000000;">i;
</span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=k;i++<span style="color: #000000;">)
</span><span style="color: #008080;">35</span>         cin&gt;&gt;a[i].s&gt;&gt;a[i].t&gt;&gt;a[i].c,ans+=<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">36</span>     sort(a+<span style="color: #800080;">1</span>,a+k+<span style="color: #800080;">1</span><span style="color: #000000;">,cmp);
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    kru();
</span><span style="color: #008080;">38</span>     ans-=<span style="color: #000000;">sum;
</span><span style="color: #008080;">39</span>     cout&lt;&lt;<span style="color: #000000;">ans;
</span><span style="color: #008080;">40</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">41</span> }</pre>
</div>
<span class="cnblogs_code_collapse">局域网</span></div>
<p>&nbsp;</p>
<p><a title="洛谷P2330[SCOI2005]繁忙的都市" href="https://www.luogu.org/fe/problem/P2330" target="_blank">洛谷P2330[SCOI2005]繁忙的都市</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('b33f2683-8002-4106-af51-d7d63c6a23ef')"><img id="code_img_closed_b33f2683-8002-4106-af51-d7d63c6a23ef" class="code_img_closed" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题5.png" alt="" /><img id="code_img_opened_b33f2683-8002-4106-af51-d7d63c6a23ef" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b33f2683-8002-4106-af51-d7d63c6a23ef',event)" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题6.png" alt="" />
<div id="cnblogs_code_open_b33f2683-8002-4106-af51-d7d63c6a23ef" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;algorithm&gt;
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> bia{
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> s,t;
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> c;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">};
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> cmp(bia a,bia b){
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">return</span> a.c&lt;<span style="color: #000000;">b.c;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">}
</span><span style="color: #008080;">11</span> bia a[<span style="color: #800080;">100001</span><span style="color: #000000;">];
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">int</span> n,m,ans,sum,fa[<span style="color: #800080;">301</span><span style="color: #000000;">];
</span><span style="color: #008080;">13</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">return</span> x==fa[x]?<span style="color: #000000;">x:find(fa[x]);
</span><span style="color: #008080;">15</span> <span style="color: #000000;">}
</span><span style="color: #008080;">16</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> kru(){
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">int</span> u=find(a[i].s),v=<span style="color: #000000;">find(a[i].t);
</span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;">21</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span>         fa[u]=<span style="color: #000000;">v;
</span><span style="color: #008080;">23</span>         sum++<span style="color: #000000;">;
</span><span style="color: #008080;">24</span>         ans=<span style="color: #000000;">max(ans,a[i].c);
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">if</span>(sum==n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">28</span> <span style="color: #000000;">}
</span><span style="color: #008080;">29</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">30</span> <span style="color: #000000;">{
</span><span style="color: #008080;">31</span>     cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">m;
</span><span style="color: #008080;">32</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">33</span>         fa[i]=<span style="color: #000000;">i;
</span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">35</span>         cin&gt;&gt;a[i].s&gt;&gt;a[i].t&gt;&gt;<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">36</span>     sort(a+<span style="color: #800080;">1</span>,a+m+<span style="color: #800080;">1</span><span style="color: #000000;">,cmp);
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    kru();
</span><span style="color: #008080;">38</span>     cout&lt;&lt;sum&lt;&lt;<span style="color: #800000;">"</span> <span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">ans;
</span><span style="color: #008080;">39</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> }</pre>
</div>
<span class="cnblogs_code_collapse">繁忙的都市</span></div>
<p>&nbsp;</p>
<p><a title="一本通1393联络员(liaison)" href="http://ybt.ssoier.cn:8088/problem_show.php?pid=1393" target="_blank">一本通1393联络员(liaison)</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('64bb5034-0510-489e-afc7-b8e180c6265e')"><img id="code_img_closed_64bb5034-0510-489e-afc7-b8e180c6265e" class="code_img_closed" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题5.png" alt="" /><img id="code_img_opened_64bb5034-0510-489e-afc7-b8e180c6265e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('64bb5034-0510-489e-afc7-b8e180c6265e',event)" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题6.png" alt="" />
<div id="cnblogs_code_open_64bb5034-0510-489e-afc7-b8e180c6265e" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;algorithm&gt;
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> bia{
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> s,t,c,y;
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">};
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> cmp(bia a,bia b){
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">if</span>(a.y!=<span style="color: #000000;">b.y)
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">return</span> a.y&lt;<span style="color: #000000;">b.y;
</span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">return</span> a.c&lt;<span style="color: #000000;">b.c;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">}
</span><span style="color: #008080;">13</span> bia a[<span style="color: #800080;">10001</span><span style="color: #000000;">];
</span><span style="color: #008080;">14</span> <span style="color: #0000ff;">int</span> n,m,sum,ans,fa[<span style="color: #800080;">10001</span><span style="color: #000000;">],j;
</span><span style="color: #008080;">15</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">return</span> x==fa[x]?<span style="color: #000000;">x:find(fa[x]);
</span><span style="color: #008080;">17</span> <span style="color: #000000;">}
</span><span style="color: #008080;">18</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> kru(){
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">int</span> u=find(a[i].s),v=<span style="color: #000000;">find(a[i].t);
</span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">if</span>(a[i].y==<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">23</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">24</span>             <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;">25</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">26</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">27</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">28</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">29</span>             <span style="color: #0000ff;">if</span>(u==<span style="color: #000000;">v)
</span><span style="color: #008080;">30</span>                 sum--<span style="color: #000000;">;
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span>         fa[u]=<span style="color: #000000;">v;
</span><span style="color: #008080;">33</span>         sum++<span style="color: #000000;">;
</span><span style="color: #008080;">34</span>         ans+=<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">35</span>         <span style="color: #0000ff;">if</span>(sum==n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">36</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">37</span>             j=<span style="color: #000000;">i;
</span><span style="color: #008080;">38</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">39</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">40</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">41</span> <span style="color: #000000;">}
</span><span style="color: #008080;">42</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">43</span> <span style="color: #000000;">{
</span><span style="color: #008080;">44</span>     cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">m;
</span><span style="color: #008080;">45</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">46</span>         fa[i]=<span style="color: #000000;">i;
</span><span style="color: #008080;">47</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">48</span>         cin&gt;&gt;a[i].y&gt;&gt;a[i].s&gt;&gt;a[i].t&gt;&gt;<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">49</span>     sort(a+<span style="color: #800080;">1</span>,a+m+<span style="color: #800080;">1</span><span style="color: #000000;">,cmp);
</span><span style="color: #008080;">50</span> <span style="color: #000000;">    kru();
</span><span style="color: #008080;">51</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=j;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">52</span>         <span style="color: #0000ff;">if</span>(a[i].y==<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">53</span>             ans+=<span style="color: #000000;">a[i].c;
</span><span style="color: #008080;">54</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">55</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">56</span>     cout&lt;&lt;<span style="color: #000000;">ans;
</span><span style="color: #008080;">57</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">58</span> }</pre>
</div>
<span class="cnblogs_code_collapse">联络员</span></div>
<p>&nbsp;</p>
<p><a title="一本通1394连接格点(grid)" href="http://ybt.ssoier.cn:8088/problem_show.php?pid=1394" target="_blank">一本通1394连接格点(grid)</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('156aba9f-fddf-4897-95c3-c0e1ac40190f')"><img id="code_img_closed_156aba9f-fddf-4897-95c3-c0e1ac40190f" class="code_img_closed" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题5.png" alt="" /><img id="code_img_opened_156aba9f-fddf-4897-95c3-c0e1ac40190f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('156aba9f-fddf-4897-95c3-c0e1ac40190f',event)" src="./images/洛谷P3366【模板】最小生成树-克鲁斯卡尔Kruskal算法详解附赠习题6.png" alt="" />
<div id="cnblogs_code_open_156aba9f-fddf-4897-95c3-c0e1ac40190f" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">int</span> fa[<span style="color: #800080;">1000001</span><span style="color: #000000;">],n,m,x1,y1,x2,y2,sum;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">int</span> find(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x){
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">return</span> x==fa[x]?x:fa[x]=<span style="color: #000000;">find(fa[x]);
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">bool</span> unionn(<span style="color: #0000ff;">int</span> a,<span style="color: #0000ff;">int</span><span style="color: #000000;"> b){
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">int</span> u=find(a),v=<span style="color: #000000;">find(b);
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">if</span>(u!=<span style="color: #000000;">v)
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">11</span>         fa[v]=<span style="color: #000000;">u;
</span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">}
</span><span style="color: #008080;">17</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">18</span> <span style="color: #000000;">{
</span><span style="color: #008080;">19</span>     cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">m;
</span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n*m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">21</span>         fa[i]=<span style="color: #000000;">i;
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">while</span>(cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;<span style="color: #000000;">y2)
</span><span style="color: #008080;">23</span>         unionn((x1-<span style="color: #800080;">1</span>)*m+y1,(x2-<span style="color: #800080;">1</span>)*m+<span style="color: #000000;">y2);
</span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;n;j++<span style="color: #000000;">)
</span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">if</span>(unionn((j-<span style="color: #800080;">1</span>)*m+i,j*m+<span style="color: #000000;">i))
</span><span style="color: #008080;">27</span>                 sum++<span style="color: #000000;">;
</span><span style="color: #008080;">28</span>     <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;m;j++<span style="color: #000000;">)
</span><span style="color: #008080;">30</span>             <span style="color: #0000ff;">if</span>(unionn((i-<span style="color: #800080;">1</span>)*m+j,(i-<span style="color: #800080;">1</span>)*m+j+<span style="color: #800080;">1</span><span style="color: #000000;">))
</span><span style="color: #008080;">31</span>                 sum+=<span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">32</span>     cout&lt;&lt;<span style="color: #000000;">sum;
</span><span style="color: #008080;">33</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">34</span> }</pre>
</div>
<span class="cnblogs_code_collapse">连接格点</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>