<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修P1491 集合位置' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>P1491 集合位置</center></div><div class='banquan'>原文出处:本文由博客园博主DriverBen提供。<br/>
原文连接:https://www.cnblogs.com/DriverBen/p/10842512.html</div><br>
    <div class="lg-article am-g">
<h2>题目描述</h2>
<p>每次有大的活动，大家都要在一起&ldquo;聚一聚&rdquo;，不管是去好乐迪，还是避风塘，或者汤姆熊，大家都要玩的痛快。还记得心语和花儿在跳舞机上的激情与释放，还记得草草的投篮技艺是如此的高超，还记得狗狗的枪法永远是'S'&hellip;&hellip;还有不能忘了，胖子的歌声永远是让我们惊叫的！！</p>
<p>今天是野猫的生日，所以想到这些也正常，只是因为是上学日，没法一起去玩了。但回忆一下那时的甜蜜总是一种幸福嘛。。。</p>
<p>但是每次集合的时候都会出现问题！野猫是公认的&ldquo;路盲&rdquo;，野猫自己心里也很清楚，每次都提前出门，但还是经常迟到，这点让大家很是无奈。后来，野猫在每次出门前，都会向花儿咨询一下路径，根据已知的路径中，总算能按时到了。</p>
<p>现在提出这样的一个问题：给出n个点的坐标，其中第一个为野猫的出发位置，最后一个为大家的集合位置，并给出哪些位置点是相连的。野猫从出发点到达集合点，总会挑一条最近的路走，如果野猫没找到最近的路，他就会走第二近的路。请帮野猫求一下这条第二最短路径长度。</p>
<h2>输入输出格式</h2>
<strong>输入格式：</strong><br />
<p>第一行是两个整数n(1&lt;=n&lt;=200)和m，表示一共有n个点和m条路，以下n行每行两个数xi，yi，(-500&lt;=xi,yi&lt;=500),代表第i个点的坐标，再往下的m行每行两个整数pj，qj,(1&lt;=pj,qj&lt;=n)，表示两个点相通。</p>


<strong>输出格式：</strong><br />
<p>只有一行包含一个数，为第二最短路线的距离（保留两位小数），如果存在多条第一短路径，则答案就是第一最短路径的长度；如果不存在第二最短路径，输出－1。</p>
<h2>输入输出样例</h2>
<div class="am-g">
<div class="am-u-md-6 copy-region"><strong>输入样例#1：</strong>
<pre>3 3
0 0
1 1
0 2
1 2
1 3
2 3
</pre>
</div>
<div class="am-u-md-6 copy-region"><strong>输出样例#1：</strong>
<pre>2.83</pre>
</div>
</div>
<h2>说明</h2>
<p>各个测试点1s</p>
<h2>代码</h2>
<p>经典题</p>
<p>考虑到1&lt;=n&lt;=200，每次暴力删去最短路上的边，</p>
<p>类似费用流记录边点，然后枚举即可</p>
<p>当然<strong>A*</strong>也是可行的</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('6d7be990-bb33-4c47-a881-7a76b1153e16')"><img id="code_img_closed_6d7be990-bb33-4c47-a881-7a76b1153e16" class="code_img_closed" src="./images/P1491 集合位置0.png" alt="" /><img id="code_img_opened_6d7be990-bb33-4c47-a881-7a76b1153e16" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6d7be990-bb33-4c47-a881-7a76b1153e16',event)" src="./images/P1491 集合位置1.png" alt="" />
<div id="cnblogs_code_open_6d7be990-bb33-4c47-a881-7a76b1153e16" class="cnblogs_code_hide">
<pre>#include&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">#define</span> inf 0x3f3f3f3f
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn=<span style="color: #800080;">200</span>+<span style="color: #800080;">10</span>,maxm=<span style="color: #800080;">80000</span>+<span style="color: #800080;">10</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> head[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> inq[maxn];
</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> dis[maxn];
</span><span style="color: #0000ff;">int</span> pre[maxn],<span style="color: #0000ff;">from</span><span style="color: #000000;">[maxn],cut;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> p[maxn],q[maxn];
</span><span style="color: #0000ff;">double</span> ans=<span style="color: #000000;">inf;
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> edge
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> to,next;
    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> val;
}e[maxm];
</span><span style="color: #0000ff;">int</span> size=<span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> x=<span style="color: #800080;">0</span>,f=<span style="color: #800080;">1</span>;<span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span>){<span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>)f=-<span style="color: #800080;">1</span>;ch=<span style="color: #000000;">getchar();}
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span>){x=(x&lt;&lt;<span style="color: #800080;">3</span>)+(x&lt;&lt;<span style="color: #800080;">1</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>;ch=<span style="color: #000000;">getchar();}
    </span><span style="color: #0000ff;">return</span> x*<span style="color: #000000;">f;
}
</span><span style="color: #0000ff;">double</span> dist(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">return</span> sqrt(x*x+y*<span style="color: #000000;">y);
}
</span><span style="color: #0000ff;">void</span> addedge(<span style="color: #0000ff;">int</span> u,<span style="color: #0000ff;">int</span> v,<span style="color: #0000ff;">double</span><span style="color: #000000;"> w)
{
    e[</span>++size].to=v;e[size].next=head[u];e[size].val=w;head[u]=<span style="color: #000000;">size;
}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> init()
{
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    dis[i]</span>=<span style="color: #000000;">inf;
    memset(inq,</span><span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(inq));
    dis[</span><span style="color: #800080;">1</span>]=<span style="color: #800080;">0</span><span style="color: #000000;">;
}
</span><span style="color: #0000ff;">bool</span> spfa(<span style="color: #0000ff;">int</span> s,<span style="color: #0000ff;">int</span><span style="color: #000000;"> tag)
{
    init();
    deque</span>&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;">q;
    q.push_back(s);
    inq[s]</span>=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span>(!<span style="color: #000000;">q.empty())
    {
        </span><span style="color: #0000ff;">int</span> u=<span style="color: #000000;">q.front();
        q.pop_front();
        inq[u]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=head[u];i;i=<span style="color: #000000;">e[i].next)
        {
            </span><span style="color: #0000ff;">if</span>(cut==i)<span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">int</span> to=<span style="color: #000000;">e[i].to;
            </span><span style="color: #0000ff;">if</span>(dis[to]&gt;dis[u]+<span style="color: #000000;">e[i].val)
            {
                dis[to]</span>=dis[u]+<span style="color: #000000;">e[i].val;
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(tag)
                pre[to]</span>=u,<span style="color: #0000ff;">from</span>[to]=<span style="color: #000000;">i;
                </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">inq[to])
                {
                    </span><span style="color: #0000ff;">if</span>(q.empty()||dis[to]&gt;<span style="color: #000000;">dis[q.front()])
                    q.push_back(to);
                    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> q.push_front(to);
                    inq[to]</span>=<span style="color: #800080;">1</span><span style="color: #000000;">;
                }
            }
        }
    }
    </span><span style="color: #0000ff;">return</span> dis[n]!=<span style="color: #000000;">inf;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    n</span>=read();m=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        p[i]</span>=read();q[i]=<span style="color: #000000;">read();
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=m;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> u=read(),v=<span style="color: #000000;">read();
        </span><span style="color: #0000ff;">double</span> w=dist(p[u]-p[v],q[u]-<span style="color: #000000;">q[v]);
        addedge(u,v,w);
        addedge(v,u,w);
    }
    spfa(</span><span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> u=n;u!=<span style="color: #800080;">1</span>;u=<span style="color: #000000;">pre[u])
    {
        cut</span>=<span style="color: #0000ff;">from</span><span style="color: #000000;">[u];
        </span><span style="color: #0000ff;">if</span>(spfa(<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span>))ans=<span style="color: #000000;">min(ans,dis[n]);
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%.2lf</span><span style="color: #800000;">"</span>,ans!=inf?ans:-<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>貌似浮点数不可memset（inf）</p>
<p>&nbsp;</p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>