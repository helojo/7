<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®2019 ICPC é“¶å·ç«™' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>2019 ICPC é“¶å·ç«™</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»Herloæä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/Herlo/p/12020565.html</div><br>
    <h2>I. Base62ï¼ˆé«˜ç²¾åº¦è¿›åˆ¶è½¬æ¢ï¼‰</h2>
<div>æ¯”èµ›å½“æ—¶é›·èŠè‹£å’Œé˜Ÿé•¿ä¿©äººæ‹¿ç€å¤§æ•°æ¿å­æ‘¸äº†ä¸€ç™¾å¤šè¡Œï¼ˆç„¶ååœ¨ç¼ºå°‘å¤§æ•°æ¿å­çš„æƒ…å†µä¸‹é›·èŠè‹£ä¸€å‘è¿‡äº†orzï¼‰</div>
<div>ä»Šå¤©è¡¥é¢˜éšä¾¿æ‘¸äº†ä¸ªé«˜ç²¾åº¦è¿›åˆ¶è½¬æ¢çš„æ¿å­äº¤ä¸Šå»å°±è¿‡äº†è¿˜è´¼çŸ­ï¼Œï¼Œ</div>
<div>æˆ‘å¥½èœï¼Œä½¬ä»¬å¥½å‰å®³</div>
<div>
<div class="cnblogs_code" onclick="cnblogs_code_show('a4f439fa-5839-44cc-8bc6-3057fc40c11f')"><img id="code_img_closed_a4f439fa-5839-44cc-8bc6-3057fc40c11f" class="code_img_closed" src="./images/2019 ICPC é“¶å·ç«™0.png" alt="" /><img id="code_img_opened_a4f439fa-5839-44cc-8bc6-3057fc40c11f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a4f439fa-5839-44cc-8bc6-3057fc40c11f',event)" src="./images/2019 ICPC é“¶å·ç«™1.png" alt="" />
<div id="cnblogs_code_open_a4f439fa-5839-44cc-8bc6-3057fc40c11f" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> maxn = <span style="color: #800080;">1000</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;">  t[maxn], A[maxn];
</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> str1[maxn], str2[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, m;
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> solve()
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, len, k;
    len </span>=<span style="color: #000000;"> strlen(str1);
    </span><span style="color: #0000ff;">for</span>(i=len; i&gt;=<span style="color: #800080;">0</span>; --i) t[len-<span style="color: #800080;">1</span>-i] = str1[i] -(str1[i]&lt;<span style="color: #800080;">58</span> ? <span style="color: #800080;">48</span>: str1[i]&lt;<span style="color: #800080;">97</span> ? <span style="color: #800080;">55</span>: <span style="color: #800080;">61</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span>(k=<span style="color: #800080;">0</span><span style="color: #000000;">; len;) {
        </span><span style="color: #0000ff;">for</span>(i=len; i&gt;=<span style="color: #800080;">1</span>; --<span style="color: #000000;">i) {
            t[i</span>-<span style="color: #800080;">1</span>] +=t[i]%m*<span style="color: #000000;">n;
            t[i] </span>/=<span style="color: #000000;"> m;
        }
        A[k</span>++] = t[<span style="color: #800080;">0</span>] %<span style="color: #000000;"> m;
        t[</span><span style="color: #800080;">0</span>] /=<span style="color: #000000;">m;
        </span><span style="color: #0000ff;">while</span>(len&gt;<span style="color: #800080;">0</span>&amp;&amp;!t[len-<span style="color: #800080;">1</span>])  len--<span style="color: #000000;">;
    }
    str2[k] </span>=<span style="color: #000000;">NULL;
    </span><span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">0</span>; i&lt;k; i++<span style="color: #000000;">)
        str2[k</span>-<span style="color: #800080;">1</span>-i] = A[i]+(A[i]&lt;<span style="color: #800080;">10</span> ? <span style="color: #800080;">48</span>: A[i]&lt;<span style="color: #800080;">36</span> ? <span style="color: #800080;">55</span>:<span style="color: #800080;">61</span><span style="color: #000000;">);
} 
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%s</span><span style="color: #800000;">"</span>,&amp;n, &amp;<span style="color: #000000;">m, str1);
    solve();
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,str2);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">ğŸ™‚</span></div>
</div>
<div>
<h2>Largest Common Submatrixï¼ˆå•è°ƒæ ˆï¼‰</h2>
</div>
<div>æ±‚ä¸¤ä¸ªçŸ©é˜µçš„æœ€å¤§ç›¸åŒå­çŸ©é˜µï¼Œä¸¤ä¸ªçŸ©é˜µä½ç½®å¯ä»¥ä¸åŒ</div>
<div><strong>é‡ç‚¹åœ¨ä¸¤ä¸ªçŸ©é˜µéƒ½æ˜¯å…¨æ’åˆ—</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åšåˆ°Oï¼ˆ1ï¼‰æ‰¾åˆ°æŸæ•°å­—åœ¨å¦å¤–ä¸€ä¸ªçŸ©é˜µçš„ä½ç½®ï¼Œ</div>
<div><strong>å­˜ä¸‹bæ•°ç»„ä¸­æ¯ä¸ªæ•°å­—å‡ºç°çš„ä½ç½®</strong>ï¼Œç„¶åå°±æ™®é€šæœ€å¤§01å­çŸ©é˜µå†™ï¼Œï¼Œï¼Œç„¶åæŒ‚æ‰äº†QAQï¼Œé¦–å…ˆæ˜¯è¶…æ—¶ï¼ŒåŠ äº†å¿«è¯»æœç„¶å¾ˆå¿«å°±WAäº†ï¼ˆWA12ï¼Œä¸€å¼€å§‹å†™é”™ä¸€ç»„åˆ¤æ–­æ¡ä»¶è¿˜è·‘è¿‡10ä¸ªæ ·ä¾‹ã€‚ã€‚ç¥äº†ï¼‰</div>
<div>èŠè‹£è¯´æ˜¯å› ä¸ºæ²¡æœ‰åˆ¤æ–­åˆæ³•æ€§ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ²¡æƒ³é€šQAQ</div>
<div>åªå¥½åˆå»æ‹¿å•è°ƒæ ˆå†™QAQ</div>
<div>å…¥æ ˆçš„æ˜¯è¯¥ç‚¹ä¸ºå³è¾¹ç•Œæ—¶çŸ©é˜µçš„é«˜åº¦å’ŒçŸ©é˜µæ‰€èƒ½åˆ°è¾¾çš„å·¦è¾¹ç•Œï¼Œæœ€åç•™åœ¨æ ˆå†…æ²¡å¼¹å‡ºæ¥çš„å°±ä»¥mä¸ºå³è¾¹ç•Œï¼Œå¦åˆ™ä»¥j-1ä¸ºå³è¾¹ç•Œ</div>
<div>å†å¤ä¹ ä¸€ä¸‹å•è°ƒæ ˆï¼Œä»¥å•è°ƒé€’å¢æ ˆä¸ºä¾‹ï¼Œ<strong><br /> </strong> </div>
<div><strong>å…¥æ ˆæ—¶ï¼Œå¼¹å‡ºçš„æœ€åä¸€ä¸ªç»“ç‚¹å°±æ˜¯å½“å‰ç»“ç‚¹çš„å·¦è¾¹ç•Œï¼ˆä»£è¡¨ç€æœ€åä¸€ä¸ªå¤§äºå½“å‰ç‚¹çš„å€¼ï¼‰</strong> </div>
<div><strong>å¯¹äºè¯¥ç»“ç‚¹å¼¹å‡ºçš„é‚£äº›ç»“ç‚¹ï¼Œå½“å‰ç»“ç‚¹çš„å·¦è¾¹ç¬¬ä¸€ä¸ªä½ç½®å°±æ˜¯ä»–ä»¬çš„å³è¾¹ç•Œï¼ˆå› ä¸ºéå†åˆ° j - 1 çš„æ—¶å€™ä»–ä»¬è¿˜æ²¡æœ‰è¢«å¼¹å‡ºæ¥ï¼Œåˆ° j å°±è¦è¢«å¼¹å‡ºæ¥äº†ï¼ˆ</strong><em><strong>ä½ è¯´æ°”ä¸æ°”</strong></em><strong>è¯¯ï¼‰ï¼‰</strong><br />
<div class="cnblogs_code" onclick="cnblogs_code_show('20c23f4f-20c5-4112-a27c-cbc817faaf84')"><img id="code_img_closed_20c23f4f-20c5-4112-a27c-cbc817faaf84" class="code_img_closed" src="./images/2019 ICPC é“¶å·ç«™0.png" alt="" /><img id="code_img_opened_20c23f4f-20c5-4112-a27c-cbc817faaf84" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('20c23f4f-20c5-4112-a27c-cbc817faaf84',event)" src="./images/2019 ICPC é“¶å·ç«™1.png" alt="" />
<div id="cnblogs_code_open_20c23f4f-20c5-4112-a27c-cbc817faaf84" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,m;
pii pos[MAXN];
pii q[MAXN];</span><span style="color: #008000;">//</span><span style="color: #008000;">å•è°ƒé€’å¢æ ˆ</span>
<span style="color: #0000ff;">int</span> high[<span style="color: #800080;">1111</span>][<span style="color: #800080;">1111</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span> a[<span style="color: #800080;">1111</span>][<span style="color: #800080;">1111</span>],b[<span style="color: #800080;">1111</span>][<span style="color: #800080;">1111</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    rd(n),rd(m);
    rpp(i,n) rpp(j,m) rd(a[i][j]);
    rpp(i,n) rpp(j,m) rd(b[i][j]),pos[b[i][j]]</span>=<span style="color: #000000;">make_pair(i,j);
    </span><span style="color: #008000;">//
</span>    <span style="color: #0000ff;">int</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
    rpp(i,n) rpp(j,m) 
    {
        </span><span style="color: #0000ff;">int</span> x=pos[a[i][j]].first,y=<span style="color: #000000;">pos[a[i][j]].second;
        </span><span style="color: #0000ff;">if</span>(a[i-<span style="color: #800080;">1</span>][j]==b[x-<span style="color: #800080;">1</span>][y]) high[i][j]=high[i-<span style="color: #800080;">1</span>][j]+<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span> high[i][j]=<span style="color: #800080;">1</span><span style="color: #000000;">; 
        ans</span>=<span style="color: #000000;">max(ans,high[i][j]);       
    }
    rpp(i,n)
    {
        </span><span style="color: #0000ff;">int</span> t=<span style="color: #800080;">0</span><span style="color: #000000;">;
        rpp(j,m)
        {
            </span><span style="color: #0000ff;">if</span>(j==<span style="color: #800080;">1</span>) q[++t]=make_pair(high[i][j],<span style="color: #800080;">1</span>);<span style="color: #008000;">//</span><span style="color: #008000;">é˜Ÿåˆ—ä¸­firstå­˜è¯¥ä½ç½®çš„é«˜åº¦ï¼Œseä½ç½®å­˜è¯¥ä½ç½®å‘å·¦æœ€è¿œèƒ½å»¶ä¼¸åˆ°å“ª</span>
            <span style="color: #0000ff;">else</span><span style="color: #000000;">
            {
                </span><span style="color: #0000ff;">int</span> x=pos[a[i][j]].first,y=<span style="color: #000000;">pos[a[i][j]].second;
                </span><span style="color: #0000ff;">if</span>(a[i][j-<span style="color: #800080;">1</span>]!=b[x][y-<span style="color: #800080;">1</span>])<span style="color: #008000;">//</span><span style="color: #008000;">è¿™æ—¶å€™é˜Ÿåˆ—é‡Œé¢çš„å…ƒç´ å·²ç»ç»“æŸäº†ï¼å†å¾€åå°±æ–­äº†ï¼Œæ‰€ä»¥å…¨éƒ¨å¼¹å‡º</span>
<span style="color: #000000;">                {
                    </span><span style="color: #0000ff;">while</span>(t&gt;<span style="color: #800080;">0</span>) ans=max(ans,(j-q[t].second)*q[t].first),--<span style="color: #000000;">t;
                    q[</span>++t]=<span style="color: #000000;">make_pair(high[i][j],j);
                }
                </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
                {
                    </span><span style="color: #0000ff;">int</span> p=<span style="color: #000000;">j;
                    </span><span style="color: #0000ff;">while</span>(t&gt;<span style="color: #800080;">0</span>&amp;&amp;q[t].first&gt;<span style="color: #000000;">high[i][j])
                        ans</span>=max(ans,(j-q[t].second)*q[t].first),p=q[t].second,--<span style="color: #000000;">t;
                    q[</span>++t]=<span style="color: #000000;">make_pair(high[i][j],p);
                }
            }
        }
        </span><span style="color: #0000ff;">while</span>(t&gt;<span style="color: #800080;">0</span>) ans=max(ans,(m-q[t].second+<span style="color: #800080;">1</span>)*q[t].first),--<span style="color: #000000;">t;
    }
    cout</span>&lt;&lt;ans&lt;&lt;<span style="color: #000000;">endl;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">stop;</span>
    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">ğŸ˜³</span></div>
<h2>B. So Easy</h2>
<div>å“‡è¿™ä¸ªé¢˜ï¼Œï¼Œç°åœºå†™äº†å¥½ä¹…è¿˜WAäº†å¥½å¤šå‘ï¼Œç°åœ¨å†™å°±æ„Ÿè§‰ï¼Œï¼Œï¼Œå—¯ï¼Ÿï¼Ÿï¼Ÿå½“æ—¶æˆ‘æ˜¯è„‘æ®‹å—ï¼Œ1Aï¼Œå°±æƒ³æ¸…æ¥šè®¡ç®—è¡Œåˆ—çš„è´¡çŒ®å€¼å°±è¡Œäº†ã€‚</div>
<div>
<div class="cnblogs_code" onclick="cnblogs_code_show('b3bcc58b-18a5-46ae-9199-c8389e5c36f0')"><img id="code_img_closed_b3bcc58b-18a5-46ae-9199-c8389e5c36f0" class="code_img_closed" src="./images/2019 ICPC é“¶å·ç«™0.png" alt="" /><img id="code_img_opened_b3bcc58b-18a5-46ae-9199-c8389e5c36f0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b3bcc58b-18a5-46ae-9199-c8389e5c36f0',event)" src="./images/2019 ICPC é“¶å·ç«™1.png" alt="" />
<div id="cnblogs_code_open_b3bcc58b-18a5-46ae-9199-c8389e5c36f0" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">int</span> mn[MAXN];<span style="color: #008000;">//</span><span style="color: #008000;">æ¯ä¸€è¡Œçš„æœ€å°å€¼</span>
<span style="color: #0000ff;">int</span> v[<span style="color: #800080;">1111</span>][<span style="color: #800080;">1111</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span> n,x,y;cin&gt;&gt;<span style="color: #000000;">n;
    rep(i,n) mn[i]</span>=<span style="color: #800080;">1</span>&lt;&lt;<span style="color: #800080;">30</span><span style="color: #000000;">;
    rep(i,n) rep(j,n) 
    {
        cin</span>&gt;&gt;v[i][j],mn[i]=<span style="color: #000000;">min(mn[i],v[i][j]);
        </span><span style="color: #0000ff;">if</span>(v[i][j]==-<span style="color: #800080;">1</span>) x=i,y=<span style="color: #000000;">j;
    }
    </span><span style="color: #0000ff;">int</span> ans=v[(x+<span style="color: #800080;">1</span>)%n][y]-mn[(x+<span style="color: #800080;">1</span>)%n];<span style="color: #008000;">//</span><span style="color: #008000;">åˆ—çš„è´¡çŒ®</span>
    ans+=v[x][(y+<span style="color: #800080;">1</span>)%n]-v[(x+<span style="color: #800080;">1</span>)%n][(y+<span style="color: #800080;">1</span>)%n]+mn[(x+<span style="color: #800080;">1</span>)%n];<span style="color: #008000;">//</span><span style="color: #008000;">è¡Œå¯¹ä»–ä¸‹ä¸€åˆ—çš„è´¡çŒ®å°±ç­‰åŒäºå¯¹ä»–çš„è´¡çŒ®</span>
    cout&lt;&lt;ans&lt;&lt;<span style="color: #000000;">endl;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">stop;</span>
    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">ğŸ˜•</span></div>
<p>&nbsp;</p>
 </div>
<div>
<h2>G. Pot!!ï¼ˆçº¿æ®µæ ‘ï¼‰ </h2>

</div>

</div>
<div><br /> </div>
<div>åˆæ˜¯ä¸€é“åœ¨ç°åœºç–¯ç‹‚WAçš„é¢˜ã€‚ã€‚ã€‚ç°åœ¨æƒ³æƒ³æ„Ÿè§‰å¥½æ°”ã€‚ã€‚ã€‚æ˜æ˜å¾ˆå¥½å†™ï¼Œæˆ‘æ˜¯è„‘æ®‹QAQ<br /> </div>
<div>ä¸€ä¸ªæ•™è®­å°±æ˜¯<strong>çº¿æ®µæ ‘</strong><strong>æ•°ç»„å¼€å¤§ç‚¹</strong> [MAXN&lt;&lt;2]è¿™æ ·å­QAQï¼Œè¿˜æœ‰å°±æ˜¯ä¸å…³æµå±…ç„¶ç¬¬äº”ä¸ªæ ·ä¾‹å°±æ‰‘è¡—äº†ï¼Œï¼Œï¼Œæäº¤å‰è®°å¾—å…³æµ<br /> </div>
<div>è¿˜æœ‰ä¸€ä¸ªæ•™è®­å°±æ˜¯<strong>çœ‹æ¸…æ•°æ®èŒƒå›´</strong>å•Šå•Šå•Šå•Šï¼Œç°åœºæƒ³äº†å¥½ä¹…é˜Ÿå‹çªç„¶ä¸€å¥xå¤§äº2å°äº10ç‚¹é†’æ¢¦ä¸­äºº<br /> </div>
<div>
<div class="cnblogs_code" onclick="cnblogs_code_show('af818152-1e76-4c47-9346-ae221459cf16')"><img id="code_img_closed_af818152-1e76-4c47-9346-ae221459cf16" class="code_img_closed" src="./images/2019 ICPC é“¶å·ç«™0.png" alt="" /><img id="code_img_opened_af818152-1e76-4c47-9346-ae221459cf16" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('af818152-1e76-4c47-9346-ae221459cf16',event)" src="./images/2019 ICPC é“¶å·ç«™1.png" alt="" />
<div id="cnblogs_code_open_af818152-1e76-4c47-9346-ae221459cf16" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">#define</span> lc root&lt;&lt;1
<span style="color: #0000ff;">#define</span> rc root&lt;&lt;1|1
<span style="color: #0000ff;">#define</span> ls root&lt;&lt;1,l,mid
<span style="color: #0000ff;">#define</span> rs root&lt;&lt;1|1,mid+1,r
<span style="color: #0000ff;">struct</span><span style="color: #000000;"> IN
{
    </span><span style="color: #0000ff;">int</span> t[MAXN&lt;&lt;<span style="color: #800080;">2</span>],lazy[MAXN&lt;&lt;<span style="color: #800080;">2</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">void</span> build(<span style="color: #0000ff;">int</span> root,<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span><span style="color: #000000;"> r)
    {
        </span><span style="color: #0000ff;">if</span>(l==r) {t[root]=<span style="color: #800080;">0</span>;<span style="color: #0000ff;">return</span><span style="color: #000000;">;}
        lazy[root]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
        build(ls);build(rs);
        t[root]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">void</span> push_down(<span style="color: #0000ff;">int</span><span style="color: #000000;"> root)
    {
        t[lc]</span>+=lazy[root],t[rc]+=<span style="color: #000000;">lazy[root];
        lazy[lc]</span>+=lazy[root],lazy[rc]+=<span style="color: #000000;">lazy[root];
        lazy[root]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">void</span> update(<span style="color: #0000ff;">int</span> root,<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span> r,<span style="color: #0000ff;">int</span> ql,<span style="color: #0000ff;">int</span> qr,<span style="color: #0000ff;">int</span><span style="color: #000000;"> v)
    {
        </span><span style="color: #0000ff;">if</span>(ql&lt;=l&amp;&amp;qr&gt;=<span style="color: #000000;">r)
        {
            t[root]</span>+=v,lazy[root]+=<span style="color: #000000;">v;
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ;
        }
        </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(lazy[root]) push_down(root);
        </span><span style="color: #0000ff;">if</span>(ql&lt;=<span style="color: #000000;">mid) update(ls,ql,qr,v);
        </span><span style="color: #0000ff;">if</span>(qr&gt;<span style="color: #000000;">mid) update(rs,ql,qr,v);
        t[root]</span>=<span style="color: #000000;">max(t[lc],t[rc]);
    }
    </span><span style="color: #0000ff;">int</span> query(<span style="color: #0000ff;">int</span> root,<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span> r,<span style="color: #0000ff;">int</span> ql,<span style="color: #0000ff;">int</span><span style="color: #000000;"> qr)
    {
        </span><span style="color: #0000ff;">if</span>(ql&lt;=l&amp;&amp;qr&gt;=r) <span style="color: #0000ff;">return</span><span style="color: #000000;"> t[root];
        </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(lazy[root]) push_down(root);
        </span><span style="color: #0000ff;">int</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(ql&lt;=mid) ans=<span style="color: #000000;">max(ans,query(ls,ql,qr));
        </span><span style="color: #0000ff;">if</span>(qr&gt;mid) ans=<span style="color: #000000;">max(ans,query(rs,ql,qr));
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ans;
    }
}t2,t3,t5,t7;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    fast;
    </span><span style="color: #0000ff;">int</span> n,q;cin&gt;&gt;n&gt;&gt;<span style="color: #000000;">q;
    t2.build(</span><span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n);t3.build(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n);t5.build(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n);t7.build(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,n);
    </span><span style="color: #0000ff;">while</span>(q--<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">string</span> s;<span style="color: #0000ff;">int</span><span style="color: #000000;"> l,r;
        cin</span>&gt;&gt;s&gt;&gt;l&gt;&gt;<span style="color: #000000;">r;
        </span><span style="color: #0000ff;">if</span>(s[<span style="color: #800080;">1</span>]==<span style="color: #800000;">'</span><span style="color: #800000;">U</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> v;cin&gt;&gt;<span style="color: #000000;">v;
            </span><span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">2</span>) t2.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">3</span>) t3.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">4</span>) t2.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">2</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">5</span>) t5.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">6</span>) t2.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span>),t3.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">7</span>) t7.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">8</span>) t2.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">3</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">9</span>) t3.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">2</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(v==<span style="color: #800080;">10</span>) t2.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span>),t5.update(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>,n,l,r,<span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            </span><span style="color: #0000ff;">int</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
            ans</span>=max(ans,t2.query(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,n,l,r));
            ans</span>=max(ans,t3.query(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,n,l,r));
            ans</span>=max(ans,t5.query(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,n,l,r));
            ans</span>=max(ans,t7.query(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span><span style="color: #000000;">,n,l,r));
            cout</span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">ANSWER </span><span style="color: #800000;">"</span>&lt;&lt;ans&lt;&lt;<span style="color: #000000;">endl;
        }
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">stop;</span>
    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">ğŸ˜¶</span></div>
</div>
<div><br /> </div>
<div>è¿˜æœ‰ä¸€é“æ²¡è¾“è¾“å…¥çš„çœŸ&middot;ç­¾åˆ°é¢˜å°±ä¸è¡¥äº†ï¼Œover</div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
<div>ï¼ˆæˆ‘æ„Ÿè§‰æˆ‘ä¹Ÿoveräº†QAQèœçš„çœŸå®ï¼‰<br /> </div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
<div><br /> </div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>