<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修工作碰上的技术问题及处理经验（三）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>工作碰上的技术问题及处理经验（三）</center></div><div class='banquan'>原文出处:本文由博客园博主皇家救星提供。<br/>
原文连接:https://www.cnblogs.com/kingstarer/p/11355612.html</div><br>
    <p>续上一篇随笔： https://www.cnblogs.com/kingstarer/p/8469016.html 《工作碰上的技术问题及处理经验》（二）</p>
<p>&nbsp;</p>
<p>我这人记忆力比较差，经常出现有些知识学了不久后就忘了，或者有些问题花了很多时间百度解决后，再过一段时间碰上时只有模糊印象，却忘了具体解决方法。</p>
<p>最近几年工作时我开始有意识地把登记每天工作碰上的技术问题做个简单笔记。</p>
<p>一般上班时间比较忙，只能草草记了一两句话。等过一段时间，我会把这个笔记整理一下，把问题和处理经验整理通顺，以加深自己的印象。</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">20180425</span><span style="color: #000000;">:
    source insight 4里面高亮某个单词可以按F8，UE里面高亮可以用shitf</span>+<span style="color: #000000;">双击单词，vs里面默认没法高亮某个单词。
不过网上有很多扩展插件可以实现这个功能，我就装了一个：</span><span style="color: #800000;">"</span><span style="color: #800000;"> Highlight all occurrences of selected word</span><span style="color: #800000;">"</span><span style="color: #000000;">
    今天用filezilla上传一个文件，总是上传不成功，但提示为什么不成功，让我有点摸不着头脑。后来偶然发现原来是因为服务器硬盘满了。filezilla这点做得不太好，出错提示太不清楚了。
    make </span>-n 可以用来调试makefile，它能显示makefile实际执行的编译命令（只打印，不执行）。今天一个同事说他修改的代码编译后没生效，我就让他用make -<span style="color: #000000;">n看一下是不是实际执行了编译。他看了一下编译命令，才发现他.h文件，然而对应的.c文件并没有依赖于该.h，导致执行make后没有重新编译对应的.c，所以代码没生效。make clean后重新编译就好。
    修改了.h后记得make clean，因为很多makefile写的时候都只依赖.c</span>/<span style="color: #000000;">.cpp，不依赖.h
            
</span><span style="color: #800080;">20180502</span><span style="color: #000000;">:
    今天学了一个查看IO使用状态的命令：iostat </span>-<span style="color: #000000;">dmx2

</span><span style="color: #800080;">20180504</span><span style="color: #000000;">:
    shell的变量与环境变量的区别：都可以使用${变量名}获取变量值，但有 export的变量是环境变量，环境变量会被子进程继承，但普通shell变量不会。

</span><span style="color: #800080;">20180508</span><span style="color: #000000;">:
    今天在调试程序时发现程序行为飘忽不定，修改的一个bug有时生效，有时不生效。后来才发现由于我系统里面把.放在PATH环境变量第一位，导致启动程序时默认先启动当前目录下的程序。
    而我的测试环境，有好几个目录都放了一个同名的程序。如果不幸在非最新版本的程序目录下启动程序测试，则会出错。
    一般来说，最好不要把.做为PATH第一位


</span><span style="color: #800080;">20180510</span><span style="color: #000000;">:
    今天用vs编译代码时报这个错:
    </span><span style="color: #800000;">"</span><span style="color: #800000;">&gt;dbstbl.h : warning C4819: 该文件包含不能在当前代码页(936)中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失</span><span style="color: #800000;">"</span><span style="color: #000000;">。
    网上查了一下，是因为代码格式是UTF</span>-<span style="color: #800080;">8</span><span style="color: #000000;">，并且里面有中文。而vs是不支持这种格式的代码的，需要在文件高级保存选项，把文件格式改为&ldquo;UTF8带签名&rdquo;



</span><span style="color: #800080;">20180517</span><span style="color: #000000;">:
    </span><span style="color: #008000;">/*</span><span style="color: #008000;">宏里面写死了使用变量stMyInf 现在想调用这个宏，但变量名不一样</span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">#define</span> stMyInf (*pStMyInf)<span style="color: #000000;">
        GET_AR_INF();
    </span><span style="color: #0000ff;">#undef</span> stMyInf


<span style="color: #800080;">20180520</span><span style="color: #000000;">:
    secureCRT设置屏幕显示黑底绿字模式方法:
    options</span>-&gt;sessionoptions-&gt;emulation-&gt;<span style="color: #000000;">terminal 选择vt100
    options</span>-&gt;sessionoptions-&gt;appearance-&gt;<span style="color: #000000;">Current color scheme 选择traditional

    secureCRT设置屏幕显示linux彩色方法:
    options</span>-&gt;sessionoptions-&gt;emulation-&gt;<span style="color: #000000;">terminal
    把终端类型 从vt100改为xterm 并且钩选ansi color复选框

</span><span style="color: #800080;">20180521</span><span style="color: #000000;">:
    今天发现程序从数据库取出来的数据，结尾总是会多出很多空格。原来以为是因为字段是char类型缘故，
但后来发现不是，字段类型是varchar2。后来发现由于取数时，用char类型数组，其实应该用varchar才对(我们的数据库操作是用pro</span>*<span style="color: #000000;">c)。
或者在程序开头使用EXEC SQL VAR强制转换，如下例子:
EXEC SQL BEGIN DECLARE SECTION; 
</span><span style="color: #0000ff;">char</span> ename[<span style="color: #800080;">11</span><span style="color: #000000;">]; 
EXEC SQL VAR ac_ename IS STRING(</span><span style="color: #800080;">11</span><span style="color: #000000;">); 
EXEC SQL END DECLARE SECTION; 
    这个用法在oracle官方的proc开发文档里面有详细介绍，建议大家开发proc程序前先浏览一遍。（全英的，看起来比较痛苦，但值得）

</span><span style="color: #800080;">20180604</span><span style="color: #000000;">:
    今天出现了一个substr截取字符串时出现半个中文的问题：utf8中文一般是3个字节，gbk中文是2个字节，但substr截取时是按字节截断，所以很可能出现截断了中文字符的问题。
    这个问题可以通过自己写一个substr解决了，之前的开发人员写代码时没考虑到这点。


</span><span style="color: #800080;">20180620</span><span style="color: #000000;">:
    我个人比较熟悉awk，所以经常需要在windows上使用awk处理一些数据。
之前一直使用unxutils工具包里面的gawk.exe，但最近发现它有两个问题：</span><span style="color: #800080;">1</span><span style="color: #000000;"> 处理的文件行数超过651132时容易出现bug
</span><span style="color: #800080;">2</span><span style="color: #000000;"> 输出中文时只能重定向到文件，不然会报错。
    我尝试过直接下载gnuwin里面的gawk，发现也有这个问题。这个问题我暂时没有找到解决方法。

    今天被oracle的lengthb函数坑了一把：我一直以为lengthb返回的应该是数字，如果传入空字符串，返回的应该是0。实际上，如果字符串是NULL，lengthb返回的是NULL。

</span><span style="color: #800080;">20180626</span><span style="color: #000000;">:
    sed命令使用正则时需要转义，如:sed </span><span style="color: #800000;">'</span><span style="color: #800000;">s/abc\|def/xxx/g</span><span style="color: #800000;">'</span><span style="color: #000000;"> 


    如果ftp连接服务器失败，可以在服务患儿使用</span>/sbin/<span style="color: #000000;">service vsftpd status看看ftp服务是否有启动。如果启动了还是连接失败，可以看看是不是使用了非标准的ftp端口
    netstat </span>-anp|grep -<span style="color: #000000;">w LISTEN

</span><span style="color: #800080;">20180628</span><span style="color: #000000;">:
    今天碰上一个bug是由于snprintf函数引起的。原因是snprintf返回可能超过输入在缓冲区的长度（当缓冲区能完整容纳输出的字符串，snprintf函数返回往缓冲区写入的字符数，否则返回缓冲区应该有多长才能容纳输出字符串），而代码没有对这种情况做判断，导致越界。


        
</span><span style="color: #800080;">20180701</span><span style="color: #000000;">:
    gdb单步跟踪时，如果碰上比较长的循环，一步步跟很累人。可以试试使用until命令，让程序运行到指定代码行时停下来。
    gdb调试过程中，可以使用call命令执行函数。例如运行过程中想退出程序，可以用call exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">)。

    今天又碰上strncpy没有以\0结尾导致出现bug的情况。

</span><span style="color: #800080;">20180702</span><span style="color: #000000;">:
    字符集和字符集编码区别:
    Unicode是字符集，UTF8编码是对表示字符集里面字符的一种编码规则，GB18030也是一种编码

</span><span style="color: #800080;">20180705</span><span style="color: #000000;">:
    今天碰上一个问题，程序core后在当前目录找不到corefile。用ulimit </span>-a和ulimit -<span style="color: #000000;">c看都没有限制corefile文件大小。
后来偶然间发现corefile生成在了另一个目录下面，原来是在</span>/proc/sys/kernel/<span style="color: #000000;">core_pattern里面配置的corefile命名规则里面把路径写死了，所以不会在当前目录生成。
    gdb调试多进程时可以用set follow</span>-fork-mode parent/<span style="color: #000000;">child 来确定fork后跟踪父进程还是子进程。


</span><span style="color: #800080;">20180709</span><span style="color: #000000;">:
    今天碰上信号处理函数里面打印日志，导致进程死锁的问题。之前一直以为多线程才会有重入问题，没想到单进程也会出现这种问题。

</span><span style="color: #800080;">20180710</span><span style="color: #000000;">:
    \t默认是补齐8位，但它跟用空格补齐不一样，虽然光标会后移到满8位为止，但

</span><span style="color: #800080;">20180711</span><span style="color: #000000;">:
    今天才知道oracle有insert all的语法，作用是把同一批数据插入到不同的表中。
insert all
into t1(object_name,object_id)
into t2(object_name,object_id)
</span><span style="color: #0000ff;">select</span> * <span style="color: #0000ff;">from</span><span style="color: #000000;"> t;

insert first
when object_id </span>= <span style="color: #800080;">1</span><span style="color: #000000;"> then
into t1(object_name,object_id)
when object_id </span>&lt;=<span style="color: #800080;">5</span><span style="color: #000000;"> then                      
into t2(object_name,object_id)
</span><span style="color: #0000ff;">select</span> * <span style="color: #0000ff;">from</span><span style="color: #000000;"> t;

</span><span style="color: #800080;">20180713</span><span style="color: #000000;">:
    ue搜索替换时可以使用特殊字符 </span>^p（换行） ^<span style="color: #000000;">t（tab）

</span><span style="color: #800080;">20180715</span><span style="color: #000000;">:
    今天注意到项目里面的接入进程实现跟我以前做的项目不大一样。以前做的多进程接入功能是先打开一个socket并且在主进程进程bind之后linsten，然后fork多个子进程同时accept等待连接进来并处理。
现在项目的多进程接入实现是使用SO_REUSEPORT选项，该选项使用多个socket可以同时绑定同一个监听端口。这样就不需要先启动主进程再fork子进程了，直接同时启动多个接入进程就行。每个进程都会新开一个socket完整执行bind</span>-&gt;linsten-&gt;accept。百度查了一下，说这个特性实现的多socket共享端口接入服务器性能比传统的父子进程共享同个socket的效率高一点。</pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>