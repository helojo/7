<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修长乐国庆集训Day5-2' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>长乐国庆集训Day5-2</center></div><div class='banquan'>原文出处:本文由博客园博主Ra煞提供。<br/>
原文连接:https://www.cnblogs.com/I-Love-You-520/p/11626621.html</div><br>
    <h2>T1 彩虹</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>Mr.Raju和他的一个大家庭外出度假，他们想要乘着彩虹欣赏周围的景色，但是这样最会有一些问题。</p>
<p>在他们家族中，如果一个人想要骑上彩虹，那么他喜欢的所有人和喜欢他的所有人都必须一同骑上彩虹。如果一个人没有喜欢的人，也没有人喜欢他，那么他也可以乘上彩虹。</p>
<p>你被请来解决这个难题，我们会提供给你家族所有成员的体重，以及每个人喜欢的人的列表，同样给出的还有彩虹能承受的总重量，你需要计算出在以上条件下彩虹所能承载的最多人数。</p>
<p>为了方便描述，所有的家庭成员都被标号，从1到n。</p>
<p>【输入格式】</p>
<p>有多组数据，每组数据之间有一空行。</p>
<p>对于每一组数据，第一行为整数n(1&le;n&le;1000)和c(0&le;c&le;1000),n表示家庭成员的总人数，c表示彩虹的承载量。</p>
<p>第二行为n个数为1到n个家庭成员的体重（体重是1000以内的正整数）。</p>
<p>接下来n行，每行第一个数k[i]表示第i个人有多少喜欢的人，接下来k[i]个整数为他喜欢的人的编号。</p>
<p>当n=0，c=0是表示数据结束。保证数据组数不超过3。</p>
<p>【输出格式】</p>
<p>对于每一组数据，输出可以同时骑彩虹的最大人数。（输出的每个答案之间不要空行）。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">5</span> <span style="color: #800080;">200</span>
<span style="color: #800080;">50</span> <span style="color: #800080;">50</span> <span style="color: #800080;">50</span> <span style="color: #800080;">50</span> <span style="color: #800080;">50</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">0</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">5</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">4</span>

<span style="color: #800080;">3</span> <span style="color: #800080;">200</span>
<span style="color: #800080;">100</span> <span style="color: #800080;">100</span> <span style="color: #800080;">100</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">1</span>

<span style="color: #800080;">0</span> <span style="color: #800080;">0</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span>
<span style="color: #800080;">0</span></pre>
</div>
<p>【数据规模】</p>
<p>对于20%的数据：n&le;8；</p>
<p>对于100%的数据：n,c&le;1000。</p>
<h3>解析</h3>
<p>先用并查集将每个人与其喜欢的人合并起来，计算他们的总重量与总人数。</p>
<p>再跑一遍01背包即可。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('6a75269d-afdf-48a1-a783-7deeebb7e6f0')"><img id="code_img_closed_6a75269d-afdf-48a1-a783-7deeebb7e6f0" class="code_img_closed" src="./images/长乐国庆集训Day5-20.png" alt="" /><img id="code_img_opened_6a75269d-afdf-48a1-a783-7deeebb7e6f0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6a75269d-afdf-48a1-a783-7deeebb7e6f0',event)" src="./images/长乐国庆集训Day5-21.png" alt="" />
<div id="cnblogs_code_open_6a75269d-afdf-48a1-a783-7deeebb7e6f0" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=<span style="color: #800080;">1010</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,C,a[N],b[N],c[N],fa[N],f[N],maxn;
</span><span style="color: #0000ff;">int</span> <span style="color: #0000ff;">get</span>(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x)
{
    </span><span style="color: #0000ff;">if</span>(fa[x]==x) <span style="color: #0000ff;">return</span><span style="color: #000000;"> x;
    </span><span style="color: #0000ff;">return</span> fa[x]=<span style="color: #0000ff;">get</span><span style="color: #000000;">(fa[x]);
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rainbow.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rainbow.out","w",stdout);</span>
    <span style="color: #0000ff;">while</span>(<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        n</span>=read(),C=read(),maxn=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(n==<span style="color: #800080;">0</span>&amp;&amp;C==<span style="color: #800080;">0</span>) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        memset(f,</span><span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(f));
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++) a[i]=read(),b[i]=<span style="color: #800080;">0</span>,c[i]=<span style="color: #800080;">0</span>,fa[i]=<span style="color: #000000;">i;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> k=<span style="color: #000000;">read();
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=k;j++<span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">int</span> x=<span style="color: #000000;">read();
                fa[</span><span style="color: #0000ff;">get</span>(i)]=<span style="color: #0000ff;">get</span><span style="color: #000000;">(x);
            }
        }
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> temp=<span style="color: #0000ff;">get</span><span style="color: #000000;">(i);
            b[temp]</span>+=a[i],c[temp]++<span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">if</span>(b[i]!=<span style="color: #800080;">0</span><span style="color: #000000;">)
                </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=C;j&gt;=b[i];j--) f[j]=max(f[j],f[j-b[i]]+<span style="color: #000000;">c[i]);
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;=C;i++) maxn=<span style="color: #000000;">max(maxn,f[i]);
        cout</span>&lt;&lt;maxn&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T2 红十字</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>通往藏宝库的通道打开了，走下一段长长的楼梯，钻过一条矮矮的地道，你和小可可终于来到了藏宝库的门前。随之而来的就是最后一个挑战，只要能打开宝库的门，里面的宝藏就是你们的了。</p>
<p>宝库的门依然是通过机关打开，这个门很奇怪，是一个正方形，被划分成许多大小一致的正方形的小方格，这些方格不是红色就是白色，猛看上去这些方格组成了许多红十字状的标志。根据藏宝图记载，只要找到门上最大的红十字，按下它中心的方格，宝库的门就能打开了。</p>
<p>红十字标志也是一个正方形，边长为(2k+1)*(2k+1)，其中k为非负整数。它的四条边与门的边平行，而且恰由门上的(2k+1)*(2k+1)个小方格组成。这里，红十字标志是以白色为底色，红色为十字的颜色。假设用1表示红色，用0表示白色。对应到计算机处理的数据中，就是除了正中列与正中行全为1外，其余方格均为0。</p>
<p>以下是几种不同大小的标志：</p>
<p>1*1:</p>
<p>1</p>
<p>&nbsp;</p>
<p>3*3</p>
<p>010</p>
<p>111</p>
<p>010</p>
<p>&nbsp;</p>
<p>5*5</p>
<p>00100</p>
<p>00100</p>
<p>11111</p>
<p>00100</p>
<p>00100</p>
<p>小可可被这个机关难到了，现在只有靠你了，请你帮助他在这个门上找到一个最大的红十字标志，输出它的边长即可。</p>
<p>【输入格式】</p>
<p>本题输入量巨大，推荐使用以下输入方法：</p>
<p>scanf("%d\n", &amp;n);</p>
<p>for (i = 1; i&lt;= n; i++) scanf("%s", s[i] + 1);</p>
<p>for (i = 1; i&lt;= n; i++)</p>
<p>for (j = 1; j &lt;= n; j++)</p>
<p>a[i][j] = s[i][j] - '0';</p>
<p>其中n是宝库的门的边长，s是字符数组，a[i][j]是第i行第j列的数值。</p>
<p>【输出格式】</p>
<p>对于每个询问输出一行表示答案。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">5</span>
<span style="color: #800080;">00011</span>
<span style="color: #800080;">01011</span>
<span style="color: #800080;">11100</span>
<span style="color: #800080;">01001</span>
<span style="color: #800080;">00010</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span> </pre>
</div>
<p>【数据规模】</p>
<p>对于30%的数据，n&le;100。</p>
<p>对于50%的数据，n&le;500。</p>
<p>对于100%的数据，n&le;2000。</p>
<h3>解析</h3>
<p>用sum纪录子矩阵的值。</p>
<p>对于以(x,y)为中心且长度为k的矩阵，如果是红十字，那么以(x,y)为中心且长度为k-2(k&gt;=3)的矩阵必然也是红十字。</p>
<p>所以可以枚举红十字的中心，求出以(x,y)为中心的最大红十字的边长，具体可以用二分实现。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('ed36f05a-5c8f-4a2a-8d5d-94237a5265e2')"><img id="code_img_closed_ed36f05a-5c8f-4a2a-8d5d-94237a5265e2" class="code_img_closed" src="./images/长乐国庆集训Day5-20.png" alt="" /><img id="code_img_opened_ed36f05a-5c8f-4a2a-8d5d-94237a5265e2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ed36f05a-5c8f-4a2a-8d5d-94237a5265e2',event)" src="./images/长乐国庆集训Day5-21.png" alt="" />
<div id="cnblogs_code_open_ed36f05a-5c8f-4a2a-8d5d-94237a5265e2" class="cnblogs_code_hide">
<pre>#include&lt;bits/stdc++.h&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=<span style="color: #800080;">2005</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,a[N][N],sum[N][N],ans;
</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> s[N][N];
</span><span style="color: #0000ff;">int</span> dfs(<span style="color: #0000ff;">int</span> lx,<span style="color: #0000ff;">int</span> ly,<span style="color: #0000ff;">int</span> rx,<span style="color: #0000ff;">int</span><span style="color: #000000;"> ry)
{
    </span><span style="color: #0000ff;">return</span> sum[rx][ry]+sum[lx-<span style="color: #800080;">1</span>][ly-<span style="color: #800080;">1</span>]-sum[lx-<span style="color: #800080;">1</span>][ry]-sum[rx][ly-<span style="color: #800080;">1</span><span style="color: #000000;">];
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span>,&amp;<span style="color: #000000;">n);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++)  scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%s</span><span style="color: #800000;">"</span>,s[i]+<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=n;j++) a[i][j]=s[i][j]-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>,sum[i][j]=sum[i-<span style="color: #800080;">1</span>][j]+sum[i][j-<span style="color: #800080;">1</span>]-sum[i-<span style="color: #800080;">1</span>][j-<span style="color: #800080;">1</span>]+<span style="color: #000000;">a[i][j];
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=n;j++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(a[i][j])
            {
                </span><span style="color: #0000ff;">int</span> l=<span style="color: #800080;">1</span>,r=min(min(i,j),min(n-i+<span style="color: #800080;">1</span>,n-j+<span style="color: #800080;">1</span>)),cnt=<span style="color: #800080;">1</span><span style="color: #000000;">;
                </span><span style="color: #0000ff;">while</span>(l&lt;=<span style="color: #000000;">r)
                {
                    </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span>(dfs(i-mid+<span style="color: #800080;">1</span>,j,i+mid-<span style="color: #800080;">1</span>,j)==mid*<span style="color: #800080;">2</span>-<span style="color: #800080;">1</span>&amp;&amp;dfs(i,j-mid+<span style="color: #800080;">1</span>,i,j+mid-<span style="color: #800080;">1</span>)==mid*<span style="color: #800080;">2</span>-<span style="color: #800080;">1</span>&amp;&amp;dfs(i-mid+<span style="color: #800080;">1</span>,j-mid+<span style="color: #800080;">1</span>,i+mid-<span style="color: #800080;">1</span>,j+mid-<span style="color: #800080;">1</span>)==mid*<span style="color: #800080;">4</span>-<span style="color: #800080;">3</span>) l=mid+<span style="color: #800080;">1</span>,cnt=<span style="color: #000000;">mid;
                    </span><span style="color: #0000ff;">else</span> r=mid-<span style="color: #800080;">1</span><span style="color: #000000;">;
                }
                ans</span>=max(ans,cnt*<span style="color: #800080;">2</span>-<span style="color: #800080;">1</span><span style="color: #000000;">);
            }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,ans);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T3 柱状图</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>在统计学中，柱状图是用来描述事件发生频率的一种图形语言，它是一种锯齿形的多边形，可以看做是一些长方形排列而成的。这些长方形的底边同为一个单位长度，但它们有不同的高度。对于给定的长方形，某些排列会使组成的多边形达到周长最长。你的任务是找出最长的周长以及构成最长周长的可能排列总数。</p>
<p><img src="./images/长乐国庆集训Day5-24.png" alt="" width="203" height="245" /></p>
<p>在图（a）中，组成多边形的长方形高度分别为{1，2，3，4}，它的周长为16个单位长度。在图（b）中，组成多边形的长方形高度分别为{3，1，2，4}，它的周长为20个单位长度。</p>
<p>【输入格式】</p>
<p>输入文件包含多组数据。</p>
<p>每组数据第一行为一个整数n (2&le;n&le;15)，描述有一共有多少个长方形。第二行为n个整数，表示n个长方形的高。</p>
<p>当n=0 时，表示输入数据结束。保证数据组数不超过16。</p>
<p>【输出格式】</p>
<p>对于每组数据，输出一个整数表示答案。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">4</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> <span style="color: #800080;">4</span>
<span style="color: #800080;">3</span>
<span style="color: #800080;">2</span> <span style="color: #800080;">6</span> <span style="color: #800080;">5</span>
<span style="color: #800080;">0</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">20</span> <span style="color: #800080;">8</span>
<span style="color: #800080;">24</span> <span style="color: #800080;">2</span></pre>
</div>
<p>【数据规模】</p>
<p><img src="./images/长乐国庆集训Day5-25.png" alt="" width="288" height="150" /></p>
<h3>解析</h3>
<p>不难发现，这题其实是全排列。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('6752fe52-3314-40c4-ad7e-7c7409081f3b')"><img id="code_img_closed_6752fe52-3314-40c4-ad7e-7c7409081f3b" class="code_img_closed" src="./images/长乐国庆集训Day5-20.png" alt="" /><img id="code_img_opened_6752fe52-3314-40c4-ad7e-7c7409081f3b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6752fe52-3314-40c4-ad7e-7c7409081f3b',event)" src="./images/长乐国庆集训Day5-21.png" alt="" />
<div id="cnblogs_code_open_6752fe52-3314-40c4-ad7e-7c7409081f3b" class="cnblogs_code_hide">
<pre>#include&lt;iostream&gt;<span style="color: #000000;">
#include</span>&lt;cstring&gt;<span style="color: #000000;">
#include</span>&lt;cstdio&gt;<span style="color: #000000;">
#include</span>&lt;algorithm&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span> n,a[<span style="color: #800080;">100</span>],ans=<span style="color: #800080;">0</span>,tot,f[<span style="color: #800080;">100</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span><span style="color: #000000;"> sum;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    n</span>=read(),f[<span style="color: #800080;">0</span>]=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=<span style="color: #800080;">10</span>;i++) f[i]=f[i-<span style="color: #800080;">1</span>]*<span style="color: #000000;">i;
    </span><span style="color: #0000ff;">while</span><span style="color: #000000;">(n)
    {
        tot</span>=n*<span style="color: #800080;">2</span>,ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++) a[i]=read(),tot+=a[i]*<span style="color: #800080;">2</span><span style="color: #000000;">;
        sort(a</span>+<span style="color: #800080;">1</span>,a+<span style="color: #800080;">1</span>+<span style="color: #000000;">n);
        </span><span style="color: #0000ff;">if</span>(n%<span style="color: #800080;">2</span>==<span style="color: #800080;">1</span><span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=(n-<span style="color: #800080;">1</span>)/<span style="color: #800080;">2</span>;i++) ans+=a[i]*<span style="color: #800080;">4</span><span style="color: #000000;">;
            sum</span>=f[n/<span style="color: #800080;">2</span>+<span style="color: #800080;">1</span>]*f[n/<span style="color: #800080;">2</span><span style="color: #000000;">];
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n/<span style="color: #800080;">2</span>-<span style="color: #800080;">1</span>;i++) ans+=a[i]*<span style="color: #800080;">4</span><span style="color: #000000;">;
            ans</span>+=a[n/<span style="color: #800080;">2</span>]*<span style="color: #800080;">2</span>,sum=f[n/<span style="color: #800080;">2</span>-<span style="color: #800080;">1</span>]*f[n/<span style="color: #800080;">2</span>]*<span style="color: #000000;">n;
        }
        cout</span>&lt;&lt;tot-ans&lt;&lt;<span style="color: #800000;">"</span> <span style="color: #800000;">"</span>&lt;&lt;sum&lt;&lt;<span style="color: #000000;">endl;
        n</span>=<span style="color: #000000;">read();
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T4 最长公共子序列</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p>给定两个长度为5n的序列A,B。保证1~n这n个数在A,B中分别出现5次。求A,B最长公共子序列。</p>
<p>【输入格式】</p>
<p>第一行一个正整数n。</p>
<p>接下来两行，每行5n个正整数，表示序列A,B。</p>
<p>【输出格式】</p>
<p>输出一个整数，最长公共子序列的长度。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">1</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">7</span> </pre>
</div>
<p>【数据规模】</p>
<p>对于30%的数据，n&le;10。</p>
<p>对于60%的数据，n&le;1000。</p>
<p>对于100%的数据，n&le;20000。</p>
<h3>解析</h3>
<p>一下来自于出题人的题解。</p>
<p>注意1~n这n个数分别在A与B中出现5次。</p>
<p>枚举i，并维护f[j]表示A[1...i]和B[1...j]的最长公共子序列，且以B[j]为结尾。</p>
<p>对于每个x，用二维数组存下x在B中的所有位置，再枚举A[i]在B中的所有位置k。</p>
<p>此时，所有f[j]都是A[1...i-1]和B[1...j]的最长公共子序列。</p>
<p>令g[k]=max(f[1]~f[k-1])+1，即g[k]为A[1...i]和B[1...k]的最长公共子序列。</p>
<p>若B[j]!=A[i]，则g[j]=f[j]，即f[j]不改动。</p>
<p>所以只需做单点修改，并求前缀最大值，具体可以用树状数组维护f[j]的前缀最大值。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('cb7f711d-0825-4f04-9700-a7b9e36aa3a6')"><img id="code_img_closed_cb7f711d-0825-4f04-9700-a7b9e36aa3a6" class="code_img_closed" src="./images/长乐国庆集训Day5-20.png" alt="" /><img id="code_img_opened_cb7f711d-0825-4f04-9700-a7b9e36aa3a6" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('cb7f711d-0825-4f04-9700-a7b9e36aa3a6',event)" src="./images/长乐国庆集训Day5-21.png" alt="" />
<div id="cnblogs_code_open_cb7f711d-0825-4f04-9700-a7b9e36aa3a6" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;vector&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
inline </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span>) ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> num;
}
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=2e4+<span style="color: #800080;">5</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span> n,a[N*<span style="color: #800080;">5</span>],b[N*<span style="color: #800080;">5</span>],c[N*<span style="color: #800080;">5</span>],d[<span style="color: #800080;">9</span><span style="color: #000000;">];
vector</span>&lt;<span style="color: #0000ff;">int</span>&gt; g[N*<span style="color: #800080;">5</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">void</span> change(<span style="color: #0000ff;">int</span> x,<span style="color: #0000ff;">int</span><span style="color: #000000;"> y)
{
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=x;i&lt;=n*<span style="color: #800080;">5</span>;i+=i&amp;-i) c[i]=<span style="color: #000000;">max(c[i],y);
}
</span><span style="color: #0000ff;">int</span> ask(<span style="color: #0000ff;">int</span><span style="color: #000000;"> x)
{
    </span><span style="color: #0000ff;">int</span> ans=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=x;i;i-=i&amp;-i) ans=<span style="color: #000000;">max(ans,c[i]);
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ans;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    n</span>=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n*<span style="color: #800080;">5</span>;i++) a[i]=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n*<span style="color: #800080;">5</span>;i++) b[i]=<span style="color: #000000;">read(),g[b[i]].push_back(i);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n*<span style="color: #800080;">5</span>;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=<span style="color: #800080;">4</span>;j++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> x=<span style="color: #000000;">g[a[i]][j];
            d[j]</span>=ask(x-<span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=<span style="color: #800080;">4</span>;j++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">int</span> x=<span style="color: #000000;">g[a[i]][j];
            change(x,d[j]</span>+<span style="color: #800080;">1</span><span style="color: #000000;">);
        }
    }
    cout</span>&lt;&lt;ask(n*<span style="color: #800080;">5</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>