<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修长乐国庆集训Day5' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>长乐国庆集训Day5</center></div><div class='banquan'>原文出处:本文由博客园博主Ra煞提供。<br/>
原文连接:https://www.cnblogs.com/I-Love-You-520/p/11624936.html</div><br>
    <h2>T1 方阵</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p align="left">小澳最近迷上了考古，他发现秦始皇的兵马俑布局十分有特点，热爱钻研的小澳打算在电脑上还原这个伟大的布局。</p>
<p align="left">他努力钻研，发现秦始皇布置兵马俑是有一定规律的。兵马俑阵总共有n行m列，秦始皇在布置的时候每次会指定一行或一列，然后指定一个兵种，使得这一行或者这一列上全部放上这一个兵种。如果这一行上以前放过其它的兵种，那么他会拔掉以前的兵种改成现在他命令的兵种。</p>
<p>小澳从秦朝的文献中找到了布置这个方阵的操作顺序，他希望你能告诉他布局完成后整个兵马俑阵是什么样子的。</p>
<p>【输入格式】</p>
<p align="left">输入文件共q+1行。 &nbsp;</p>
<p align="left">输入文件第1行包括三个正整数n,m,q，分别表示兵马俑阵的行数和列数以及秦始皇总的操作数。</p>
<p>接下来q行，每行三个正整数x,y,z，x表示操作种类，若x=1表示给第y行(y&le;n)全部放上z这个兵种，若x=2，则表示给第y列(y&le;m)全部放上z这个兵种，数据保证z&le;2<sup>31</sup>-1。</p>
<p>【输出格式】</p>
<p>n行，每行m个整数，分别用空格隔开。表示最后方阵上每个位置放的兵种，如果某个位置没有被操作过输出0。</p>
<p>【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span> <span style="color: #800080;">3</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">1</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span>
<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span> <span style="color: #800080;">1</span> <span style="color: #800080;">3</span>
<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">0</span> <span style="color: #800080;">1</span> <span style="color: #800080;">0</span></pre>
</div>
<p>【数据规模】</p>
<p align="left">对于前20%的数据，n&times;m&le;25。</p>
<p align="left">对于前30%的数据，q&le;2000。</p>
<p>对于100%的数据，n,m&le;1000，n&times;m&le;10<sup>5</sup>，q&le;10<sup>6</sup>。</p>
<h3>解析</h3>
<p>惊！原题<a title="长乐培训Dayt1" href="https://www.cnblogs.com/I-Love-You-520/p/11247188.html" target="_blank">长乐培训Day4t1</a>！</p>
<p>送分题，直接模拟即可，不过得从后往前来，不然会超时。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('f13126bb-9ed3-4329-aa36-ca21c250b979')"><img id="code_img_closed_f13126bb-9ed3-4329-aa36-ca21c250b979" class="code_img_closed" src="./images/长乐国庆集训Day50.png" alt="" /><img id="code_img_opened_f13126bb-9ed3-4329-aa36-ca21c250b979" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f13126bb-9ed3-4329-aa36-ca21c250b979',event)" src="./images/长乐国庆集训Day51.png" alt="" />
<div id="cnblogs_code_open_f13126bb-9ed3-4329-aa36-ca21c250b979" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> rec{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> p,x,y;
}s[</span><span style="color: #800080;">1000010</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span> n,m,q,map[<span style="color: #800080;">1010</span>][<span style="color: #800080;">1010</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("matrix.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("matrix.out","w",stdout);</span>
    <span style="color: #0000ff;">int</span><span style="color: #000000;"> t;
    n</span>=read(),m=read(),q=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=q;i++) s[i].p=read(),s[i].x=read(),s[i].y=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=q;i&gt;=<span style="color: #800080;">1</span>;i--<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(s[i].p==<span style="color: #800080;">1</span><span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=m;j++<span style="color: #000000;">)
                </span><span style="color: #0000ff;">if</span>(!map[s[i].x][j]) map[s[i].x][j]=<span style="color: #000000;">s[i].y;
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=n;j++<span style="color: #000000;">)
                </span><span style="color: #0000ff;">if</span>(!map[j][s[i].x]) map[j][s[i].x]=<span style="color: #000000;">s[i].y;
        }
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">1</span>;j&lt;=m;j++) cout&lt;&lt;map[i][j]&lt;&lt;<span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #000000;">;
        cout</span>&lt;&lt;<span style="color: #000000;">endl;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T2 排名</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p align="left">小明班里一共N名同学，小明这次考试考的不错，他知道他考了多少分，以及班级里的同学一共考了多少分，小明还知道这次考试满分为100，问小明最高可以排第几，最低可以排第几。</p>
<p align="left">（相同分数算并列的排名，比如总共4个人7,6,6,5，那么他们的排名分别就是1,2,2,4）</p>
<p align="left">【输入格式】</p>
<p align="left">第一行包括三个整数N,A,S，分别表示班里同学的人数，小明的分数，以及班里同学的总分。</p>
<p align="left">【输出格式】</p>
<p align="left">包括两个用空格隔开的正整数，分别表示小明在最优情况下的排名，以及在最坏情况下的排名。</p>
<p align="left">【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">5</span> <span style="color: #800080;">90</span> <span style="color: #800080;">450</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">1</span> <span style="color: #800080;">4</span></pre>
</div>
<p>【数据规模】</p>
<p align="left">对于40%的数据，1&le;N&le;10；</p>
<p>对于100%的数据，1&le;N&le;10<sup>5</sup>，0&le;A&le;100，0&le;S&le;100N。</p>
<h3>解析</h3>
<p>贪心：</p>
<p>计算最高排名时，先将所有人分数定为a，如果总分不够或总分刚好够，则第1；如果够，则逐渐增加满分人数，直到总分不够或刚好够，则排名为满分人数+1。</p>
<p>计算最低排名时，先将所有人分数定为a+1，如果总分不够，则排名为当前分数为a+1的总人数+1；如果够，则排名为n。</p>
<p>注意a=100分的情况(此时a+1=101，超出满分)，特判一下直接输出即可。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('0521e787-24ae-457c-bc5b-a7cba2031af9')"><img id="code_img_closed_0521e787-24ae-457c-bc5b-a7cba2031af9" class="code_img_closed" src="./images/长乐国庆集训Day50.png" alt="" /><img id="code_img_opened_0521e787-24ae-457c-bc5b-a7cba2031af9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0521e787-24ae-457c-bc5b-a7cba2031af9',event)" src="./images/长乐国庆集训Day51.png" alt="" />
<div id="cnblogs_code_open_0521e787-24ae-457c-bc5b-a7cba2031af9" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n,a,s,num;
</span><span style="color: #0000ff;">int</span> high(<span style="color: #0000ff;">int</span><span style="color: #000000;"> ans)
{
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">2</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ans&gt;=a) ans-=<span style="color: #000000;">a;
        </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">if</span>(ans==<span style="color: #800080;">0</span>) <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">2</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ans&gt;=<span style="color: #800080;">100</span>-a) ans-=<span style="color: #800080;">100</span>-<span style="color: #000000;">a;
        </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">return</span><span style="color: #000000;"> i;
        </span><span style="color: #0000ff;">if</span>(ans==<span style="color: #800080;">0</span>) <span style="color: #0000ff;">return</span><span style="color: #000000;"> i;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n;
}
</span><span style="color: #0000ff;">int</span> low(<span style="color: #0000ff;">int</span><span style="color: #000000;"> ans)
{
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;n;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ans&gt;=a+<span style="color: #800080;">1</span>) ans-=a+<span style="color: #800080;">1</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">return</span><span style="color: #000000;"> i;
    } 
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n;
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rank.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("rank.out","w",stdout);</span>
    n=read(),a=read(),s=read(),s-=<span style="color: #000000;">a;
    </span><span style="color: #0000ff;">if</span>(a==<span style="color: #800080;">100</span>) cout&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">1 1</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">else</span> cout&lt;&lt;high(s)&lt;&lt;<span style="color: #800000;">"</span> <span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">low(s);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T3 最长不下降子序列</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p align="left">给你一个正整数N，请你统计出所有的长度恰好为n的01序列的最长不下降子序列之和。</p>
<p align="left">【输入格式】</p>
<p align="left">第一行包括一个正整数N。</p>
<p align="left">【输出格式】</p>
<p align="left">一行包括一个整数表示所统计的答案，由于答案可能会很大，所以我们把答案对10<sup>9</sup>+7取模。</p>
<p align="left">【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">3</span> </pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">20</span></pre>
</div>
<p>【数据规模】</p>
<p>对于30%的数据，n&le;20；</p>
<p>对于100%的数据，n&le;200。</p>
<h3>解析</h3>
<p>DP题，令f[i][j][k]表示长度为i，以0结尾的最长不下降子序列长度为j,以1结尾的最长不下降子序列长度为k的方案数，初值均为0，边界f[1][1][0]=f[1][0][1]=1。</p>
<p>&nbsp;状态转移方程：考虑给第i+1位上填0或1。</p>
<ol>
<li>若第i+1位上填0，则f[i+1][j+1][k]+=f[i][j][k]，第i+1位为0，只能由第i位为0时得到。</li>
<li>若第i+1位上填1，则f[i+1][j][max(j,k)+1]+=f[i][j][k]，第i+1位为1，无论第i位是0还是1，其以1结尾的最长不下降子序列长度必然增加，因为1是最大的，故k取max(j,k)+1。</li>
</ol>
<p>最终答案为max(j,k)*f[n][j][k]之和。</p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('4de9b00e-5158-407e-80fa-44379536ef87')"><img id="code_img_closed_4de9b00e-5158-407e-80fa-44379536ef87" class="code_img_closed" src="./images/长乐国庆集训Day50.png" alt="" /><img id="code_img_opened_4de9b00e-5158-407e-80fa-44379536ef87" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4de9b00e-5158-407e-80fa-44379536ef87',event)" src="./images/长乐国庆集训Day51.png" alt="" />
<div id="cnblogs_code_open_4de9b00e-5158-407e-80fa-44379536ef87" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> mod=<span style="color: #800080;">1000000007</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;
</span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> ans,f[<span style="color: #800080;">210</span>][<span style="color: #800080;">210</span>][<span style="color: #800080;">210</span>];<span style="color: #008000;">//</span><span style="color: #008000;">f[i][j][k]表示长度为i,以0结尾最长不降子序列长度为j,以1结尾为k </span>
<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("lis.in","r",stdin);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("lis.out","w",stdout);</span>
    f[<span style="color: #800080;">1</span>][<span style="color: #800080;">1</span>][<span style="color: #800080;">0</span>]=<span style="color: #800080;">1</span>,f[<span style="color: #800080;">1</span>][<span style="color: #800080;">0</span>][<span style="color: #800080;">1</span>]=<span style="color: #800080;">1</span><span style="color: #000000;">;
    cin</span>&gt;&gt;<span style="color: #000000;">n;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=i;j++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=<span style="color: #800080;">0</span>;k&lt;=i;k++<span style="color: #000000;">)
            {
                f[i</span>+<span style="color: #800080;">1</span>][j+<span style="color: #800080;">1</span>][k]=(f[i+<span style="color: #800080;">1</span>][j+<span style="color: #800080;">1</span>][k]+f[i][j][k])%<span style="color: #000000;">mod;
                f[i</span>+<span style="color: #800080;">1</span>][j][max(j,k)+<span style="color: #800080;">1</span>]=(f[i+<span style="color: #800080;">1</span>][j][max(j,k)+<span style="color: #800080;">1</span>]+f[i][j][k])%<span style="color: #000000;">mod;
            }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=n;j++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=<span style="color: #800080;">0</span>;k&lt;=n;k++) ans=(ans+(<span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span>)max(j,k)*f[n][j][k])%<span style="color: #000000;">mod;
    cout</span>&lt;&lt;<span style="color: #000000;">ans;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>T4 奇袭</h2>
<h3>题目</h3>
<p>【题目描述】</p>
<p align="left">给出一张N&times;N的网格图，一共有N支军队驻扎在一些网格中（不会有两只军队驻扎在一起）。</p>
<p align="left">每有一个k&times;k(1&le;k&le;N)的子网格图包含恰好k支军队，袭击的难度就会增加1点，请你计算出袭击的难度。</p>
<p align="left">【输入格式】</p>
<p align="left">第一行，一个正整数N，表示网格图的大小以及军队数量。</p>
<p align="left">接下来N行，每行两个整数X<sub>i</sub>,Y<sub>i</sub>，表示第i支军队的坐标。</p>
<p align="left">保证每一行和每一列都恰有一只军队，即每一个X<sub>i</sub>和每一个Y<sub>i</sub>都是不一样的。</p>
<p align="left">【输出格式】</p>
<p align="left">一行，一个整数表示袭击的难度。</p>
<p align="left">【输入样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">5</span>    
<span style="color: #800080;">1</span> <span style="color: #800080;">1</span>
<span style="color: #800080;">3</span> <span style="color: #800080;">2</span>
<span style="color: #800080;">2</span> <span style="color: #800080;">4</span>
<span style="color: #800080;">5</span> <span style="color: #800080;">5</span>
<span style="color: #800080;">4</span> <span style="color: #800080;">3</span></pre>
</div>
<p>【输出样例】</p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">10</span></pre>
</div>
<p>【数据规模】</p>
<p>对于前<span lang="EN-US">10%</span>的数据，<span lang="EN-US">N&le;100</span>；</p>
<p>对于前<span lang="EN-US">40%</span>的数据，<span lang="EN-US">N&le;5000</span>；</p>
<p>对于<span lang="EN-US">100%</span>的数据，<span lang="EN-US">N&le;50000</span>。</p>
<h3>解析</h3>
<p>以下来源于出题人的题解。</p>
<p>对于每一个坐标(x,y)，记b[x]=y，故所求为序列b满足下列条件的区间[l,r]的数量：</p>
<p><img src="./images/长乐国庆集训Day56.png" alt="" width="264" height="36" /></p>
<p><img src="./images/长乐国庆集训Day57.png" alt="" width="557" height="180" /></p>
<h3>Code</h3>
<div class="cnblogs_code" onclick="cnblogs_code_show('d41b4b9d-14ea-476b-99c3-2884a47f5045')"><img id="code_img_closed_d41b4b9d-14ea-476b-99c3-2884a47f5045" class="code_img_closed" src="./images/长乐国庆集训Day50.png" alt="" /><img id="code_img_opened_d41b4b9d-14ea-476b-99c3-2884a47f5045" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d41b4b9d-14ea-476b-99c3-2884a47f5045',event)" src="./images/长乐国庆集训Day51.png" alt="" />
<div id="cnblogs_code_open_d41b4b9d-14ea-476b-99c3-2884a47f5045" class="cnblogs_code_hide">
<pre>#include &lt;algorithm&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> read()
{
    </span><span style="color: #0000ff;">int</span> num=<span style="color: #800080;">0</span>,w=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> ch=<span style="color: #000000;">getchar();
    </span><span style="color: #0000ff;">while</span>(ch&lt;<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>||ch&gt;<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span>(ch==<span style="color: #800000;">'</span><span style="color: #800000;">-</span><span style="color: #800000;">'</span>) w=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">while</span>(ch&gt;=<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span>&amp;&amp;ch&lt;=<span style="color: #800000;">'</span><span style="color: #800000;">9</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    {
        num</span>=(num&lt;&lt;<span style="color: #800080;">1</span>)+(num&lt;&lt;<span style="color: #800080;">3</span>)+ch-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
        ch</span>=<span style="color: #000000;">getchar();
    }
    </span><span style="color: #0000ff;">return</span> num*<span style="color: #000000;">w;
}
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> N=<span style="color: #800080;">50100</span>,M=<span style="color: #800080;">100100</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span> n,a[N],maxl[N],maxr[N],minl[N],minr[N],bz[M*<span style="color: #800080;">2</span><span style="color: #000000;">];
</span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> work(<span style="color: #0000ff;">int</span> l,<span style="color: #0000ff;">int</span><span style="color: #000000;"> r)
{
    </span><span style="color: #0000ff;">if</span>(l==r) <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span> mid=(l+r)&gt;&gt;<span style="color: #800080;">1</span><span style="color: #000000;">;
    maxl[mid]</span>=minl[mid]=a[mid],maxr[mid+<span style="color: #800080;">1</span>]=minr[mid+<span style="color: #800080;">1</span>]=a[mid+<span style="color: #800080;">1</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid-<span style="color: #800080;">1</span>;i&gt;=l;i--) maxl[i]=max(maxl[i+<span style="color: #800080;">1</span>],a[i]),minl[i]=min(minl[i+<span style="color: #800080;">1</span><span style="color: #000000;">],a[i]);
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid+<span style="color: #800080;">2</span>;i&lt;=r;i++) maxr[i]=max(maxr[i-<span style="color: #800080;">1</span>],a[i]),minr[i]=min(minr[i-<span style="color: #800080;">1</span><span style="color: #000000;">],a[i]);
    </span><span style="color: #0000ff;">long</span> <span style="color: #0000ff;">long</span> t=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid;i&gt;=l;i--<span style="color: #000000;">) 
    {
        </span><span style="color: #0000ff;">int</span> p=i+maxl[i]-<span style="color: #000000;">minl[i];
        </span><span style="color: #0000ff;">if</span>(p&lt;=mid||p&gt;r) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(minr[p]&gt;minl[i]&amp;&amp;maxr[p]&lt;maxl[i]) t++<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid+<span style="color: #800080;">1</span>;i&lt;=r;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> p=i-maxr[i]+<span style="color: #000000;">minr[i];
        </span><span style="color: #0000ff;">if</span>(p&gt;mid||p&lt;l) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(minl[p]&gt;minr[i]&amp;&amp;maxl[p]&lt;maxr[i]) t++<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">int</span> z1=mid+<span style="color: #800080;">1</span>,z2=<span style="color: #000000;">mid;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid;i&gt;=l;i--<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">while</span>(minr[z2+<span style="color: #800080;">1</span>]&gt;minl[i]&amp;&amp;z2&lt;r) z2++,bz[maxr[z2]-z2+M]++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>(maxl[i]&gt;<span style="color: #000000;">maxr[z1])
        {
            bz[maxr[z1]</span>-z1+M]--,z1++<span style="color: #000000;">;
            </span><span style="color: #0000ff;">if</span>(z1&gt;r) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">if</span>(z1&gt;r) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(z1&lt;=z2) t+=bz[minl[i]-i+<span style="color: #000000;">M];
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid;i&gt;=l;i--) bz[minl[i]-i+M]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid+<span style="color: #800080;">1</span>;i&lt;=r;i++) bz[maxr[i]-i+M]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    z1</span>=mid,z2=mid+<span style="color: #800080;">1</span><span style="color: #000000;">; 
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid+<span style="color: #800080;">1</span>;i&lt;=r;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">while</span>(minl[z2-<span style="color: #800080;">1</span>]&gt;minr[i]&amp;&amp;z2&gt;l) z2--,bz[maxl[z2]+z2+M]++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>(maxr[i]&gt;<span style="color: #000000;">maxl[z1])
        {
            bz[maxl[z1]</span>+z1+M]--,z1--<span style="color: #000000;">;
            </span><span style="color: #0000ff;">if</span>(z1&lt;l) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">if</span>(z1&lt;l) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span>(z2&lt;=z1) t+=bz[minr[i]+i+<span style="color: #000000;">M];
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid+<span style="color: #800080;">1</span>;i&lt;=r;i++) bz[minr[i]+i+M]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=mid;i&gt;=l;i--) bz[maxl[i]+i+M]=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">return</span> t+work(l,mid)+work(mid+<span style="color: #800080;">1</span><span style="color: #000000;">,r);
}
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    n</span>=<span style="color: #000000;">read();
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> x=read(),y=<span style="color: #000000;">read();
        a[x]</span>=<span style="color: #000000;">y;
    }
    cout</span>&lt;&lt;work(<span style="color: #800080;">1</span><span style="color: #000000;">,n);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>