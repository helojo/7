<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Qt5——从零开始的学生管理系统' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Qt5——从零开始的学生管理系统</center></div><div class='banquan'>原文出处:本文由博客园博主suvvm提供。<br/>
原文连接:https://www.cnblogs.com/suvvm/p/10723449.html</div><br>
    <h1 align="center"><strong>Qt教程&mdash;&mdash;从零开始的学生管理系统（文件）</strong></h1>
<h2 align="left">一、项目设计</h2>
<h3 align="left">　　1、需求分析</h3>
<p align="left">　　记录并处理学生成绩信息。</p>
<p align="left">　　1）添加新的学生数据；</p>
<p align="left">　　2）根据学号对已有的学生数据进行修改；</p>
<p align="left">　　3）根据学号删除已存在的学生信息；</p>
<p align="left">　　4）根据学号查询学生信息；</p>
<p align="left">　　5）根据各门成绩与平均成绩进行排序。</p>
<h3 align="left">　　2、窗口设计</h3>
<p align="left">　　1）菜单窗口；</p>
<p align="left">　　2）添加学生窗口；</p>
<p align="left">　　3）修改信息窗口（包括删除信息）；</p>
<p align="left">　　4）查询学生窗口</p>
<p align="left">　　5）排序窗口；</p>
<h3 align="left">　　3、数据结构设计</h3>
<p align="left">　　以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p align="left">　　姓名（字符串）</p>
<p align="left">　　学号（整型）</p>
<p align="left">　　数学成绩（整型）</p>
<p align="left">　　英语成绩（整型）</p>
<p align="left">　　C语言程序设计成绩（整型）</p>
<p align="left">　　平均成绩（双浮点数）</p>
<h2 align="left">二、项目制作</h2>
<h3 align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、建立项目</h3>
<p align="left">　　打开Qt Creator 文件-&gt;新建文件或项目（Ctrl+N）-&gt;其他项目-&gt;空的Qt项目（Empty qmacke Project）</p>
<p align="left">　　<img src="./images/Qt5——从零开始的学生管理系统0.png" alt="" width="301" height="228" /></p>
<h3 align="left">&nbsp; &nbsp; &nbsp; &nbsp;2、添加窗口</h3>
<p align="left">　　将其命名为StudentManagementSystem_Qt一路下一步到结束。</p>
<p align="left">　　右击项目名称-&gt;Add New-&gt;Qt -&gt; Qt设计师界面模板选择Widget下一步，我们当前建立的是菜单窗口，所以将其类名命名为MenuWidget一路下一步到结束。</p>
<p align="left">　　以同样的方式建立添加学生窗口：AddStudentWidget、修改信息窗口：ModifyWidget、查询窗口：SelectWidget、排序窗口：SortWidget。</p>
<p align="left">　　完成后的项目资源管理器页面中应该有如下文件</p>
<p align="left">　　&nbsp;<img src="./images/Qt5——从零开始的学生管理系统1.png" alt="" width="179" height="262" /></p>
<p align="left">　　我们可以看到Qt中建立模板为widget的设计师界面就是建立了一个c++类（继承自QWidget）与其对应的ui文件 ，这个ui文件便是Qt Designer设计文件，它会在编译时生成一个ui_*.h文件，这样我们便可以用c++的方式对其进行调用。</p>
<p align="left">　　Qt Designer的详细使用方法可以看官方的手册：<a href="https://doc.qt.io/archives/qt-4.8/designer-manual.html">https://doc.qt.io/archives/qt-4.8/designer-manual.html</a></p>
<p align="left">　　之后打开我们的menuwidget.h，会发现其中存在错误。</p>
<p align="left">　　<img src="./images/Qt5——从零开始的学生管理系统2.png" alt="" width="335" height="229" /></p>
<p align="left">　　这是因为我们的项目中没有连接Qt Widgets库，在StudentManagementSystem_Qt.pro中添加</p>
<div class="cnblogs_code">
<pre>QT += widgets</pre>
</div>
<p align="left">可解决问题。</p>
<h3 align="left">　　3、实现窗口之间的切换</h3>
<p align="left">　　现在，就是实现我们新建立的几个窗口之间的窗口切换问题的时候了，这里我打算使用QStackedLayout实现窗口切换。</p>
<p align="left">　　QStackedLayout继承自QLayout，提供了多页面切换的布局，一次只能看到一个界面，在我的Qt5&mdash;&mdash;从零开始的Hello World教程(Qt Creator) 中提到过，大部分控件都继承自QFrame，而QFrame又继承自QWidget，所以QStackedLayout完全可以实现窗口之间的切换。</p>
<p align="left">　　现在我们用与上一步相同的方法建立一个窗口MainWidget。并添加一个main.cpp来写main函数</p>
<p align="left">　　&nbsp;<img src="./images/Qt5——从零开始的学生管理系统3.png" alt="" width="326" height="150" /></p>
<p align="left">　　<img src="./images/Qt5——从零开始的学生管理系统4.png" alt="" width="214" height="106" /></p>
<p align="left">　　在mainwidget.h中修改MainWidget的定义，为其添加成员</p>
<div class="cnblogs_code">
<pre>MenuWidget *menuwidget;        <span style="color: #008000;">//</span><span style="color: #008000;">菜单窗口</span>
AddStudentWidget *addstudentwidget;   <span style="color: #008000;">//</span><span style="color: #008000;">添加学生窗口</span>
SelectWidget *selectwidget;    <span style="color: #008000;">//</span><span style="color: #008000;">查询窗口</span>
ModifyWidget *modifywidget;    <span style="color: #008000;">//</span><span style="color: #008000;">修改窗口</span>
SortWidget *sortwidget;        <span style="color: #008000;">//</span><span style="color: #008000;">排序窗口</span>
QStackedLayout *stackLayout;   <span style="color: #008000;">//</span><span style="color: #008000;">QStackedLayout布局</span></pre>
</div>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当然，也需要引用其对应的头文件。</p>
<div class="cnblogs_code">
<pre>#include &lt;QStackedLayout&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">menuwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">addstudentwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">selectwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">modifywidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">sortwidget.h</span><span style="color: #800000;">"</span></pre>
</div>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在MainWidget.cpp中将MainWidget设为stackLayout布局，声明我们需要的窗口，并将其加入stackLayout布局中去。</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在MainWidget.cpp中显示调用MainWidget构造函数。</p>
<div class="cnblogs_code">
<pre>MainWidget::MainWidget(QWidget *<span style="color: #000000;">parent) :
    QWidget(parent),
    ui(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Ui::MainWidget)
{
    ui</span>-&gt;setupUi(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
}</span></pre>
</div>
<p align="left">　　处添加。</p>
<div class="cnblogs_code">
<pre>menuwidget = <span style="color: #0000ff;">new</span><span style="color: #000000;"> MenuWidget;
addstudentwidget </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> AddStudentWidget;
selectwidget </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> SelectWidget;
modifywidget </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> ModifyWidget;
sortwidget </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> SortWidget;
stackLayout </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> QStackedLayout;

stackLayout</span>-&gt;<span style="color: #000000;">addWidget(menuwidget);
stackLayout</span>-&gt;<span style="color: #000000;">addWidget(addstudentwidget);
stackLayout</span>-&gt;<span style="color: #000000;">addWidget(selectwidget);
stackLayout</span>-&gt;<span style="color: #000000;">addWidget(modifywidget);
stackLayout</span>-&gt;<span style="color: #000000;">addWidget(sortwidget);

setLayout(stackLayout);</span></pre>
</div>
<p align="left">&nbsp;&nbsp;&nbsp; 之后就需要使用Qt designer 设计页面了（当然在对应类中手动添加成员控件也没有任何问题）。</p>
<p align="left">&nbsp; &nbsp; &nbsp; &nbsp;双击mainwidget.ui就打开了设计页面</p>
<p align="left">&nbsp; &nbsp; &nbsp; &nbsp;在menuwidget中添加如下按钮（push button）</p>
<p align="left">　　<img src="./images/Qt5——从零开始的学生管理系统5.png" alt="" width="256" height="181" /></p>
<p align="left">　　以同样的方法在addstudentwidget,selectwidget,modifywidget,sortwidget中都添加一个返回按钮returnButton。</p>
<p align="left">　<img src="./images/Qt5——从零开始的学生管理系统6.png" alt="" width="288" height="178" /></p>
<p align="left">　　为这些按钮设计点击槽函数。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">menuwidget.h:
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_addButton_clicked();
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_selectButton_clicked();
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_modifyButton_clicked();
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_sortButton_clicked();
    </span><span style="color: #0000ff;">void</span> on_exitButton_clicked();</pre>
</div>
<p align="left">&nbsp;&nbsp;&nbsp; 还需要一个方法作为stackLayout切换页面的信号</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span> number);</pre>
</div>
<p align="left">&nbsp;&nbsp;&nbsp; 在menuwidget.cpp中给出函数定义</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">void</span><span style="color: #000000;"> MenuWidget::on_addButton_clicked(){
    emit display(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> MenuWidget::on_selectButton_clicked(){
    emit display(</span><span style="color: #800080;">2</span><span style="color: #000000;">);
}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> MenuWidget::on_modifyButton_clicked(){
    emit display(</span><span style="color: #800080;">3</span><span style="color: #000000;">);
}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> MenuWidget::on_sortButton_clicked(){
    emit display(</span><span style="color: #800080;">4</span><span style="color: #000000;">);
}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> MenuWidget::on_exitButton_clicked(){
    QApplication::exit();
}</span></pre>
</div>
<p align="left">emit&nbsp; 把connect把信号和槽进行关联，emit某个信号，就相当于调用这个信号connect时所关联的槽函数。至于更多关于 emit信息诸位可以搜索或者看帮助文档。</p>
<p align="left">之后为addstudentwidget,selectwidget,modifywidget,sortwidget窗口中的按钮设计信号与槽函数</p>
<p align="left">在（类名）.h中添加</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span><span style="color: #000000;"> number);
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span> on_returnButton_clicked();</pre>
</div>
<p align="left">在（类名）.cpp中添加</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">void</span><span style="color: #000000;"> （类名）::on_returnButton_clicked(){
    emit display(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
}</span></pre>
</div>
<p align="left">　　现在可以使用的只有退出按钮，跳转按钮还需要在mainwidget.cpp中用connect函数连接。</p>
<p align="left">　　到此为止便完成了页面切换功能。</p>
<p align="left">　　到次为止的源码：</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt</a></p>
<h3 align="left">　　4、完善窗口设计</h3>
<h4 align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1：AddStudentWidget</h4>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们需要提示标签来指明输入的数据，也需要输入框来接收用户的输入，QLabel与QLineEdit可以满足我们的要求。</p>
<p align="left">　　QLabel，QLineEdit有方法setText(&ldquo;内容&rdquo;)来改变其显示的文字，有方法setGeometry (起始横坐标，起始纵坐标，宽， 高)来设置左上角起始位置与大小。</p>
<p align="left">　　当然这些都可以在Qt Designer中直接设置。打开addstudentwidget.ui。</p>
<p align="left">　　根据之前设计的数据结构，需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要addButton 一个QPushButton来添加学生。</p>
<p align="left">　　最终将addstudentwidget页面设计为。</p>
<p align="left"><img src="./images/Qt5——从零开始的学生管理系统7.png" alt="" width="323" height="198" /></p>
<h4 align="left">　　2：modifyWidget</h4>
<p align="left">　　我们需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要deleteButton、modifyButton 两个QPushButton来根据学号删除学生，和根据学号修改学生信息。</p>
<p align="left"><img src="./images/Qt5——从零开始的学生管理系统8.png" alt="" width="312" height="174" /></p>
<h4 align="left">　　3：selectwidget</h4>
<p align="left">　　我们需要idLabel一个QLabel提醒用户输入数据，需要idLineEdit一个QLineEdit接收学生的学号，之后需要nameLabel、avgLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户显示的数据，需要showNameLabel、showMathLabel、showEnLabel、showCLabel、showAvgLabel五个QLabel来接收查询到的数据，需要selectButton一个QPushButton来提交查询。&nbsp;</p>
<p align="left"><img src="./images/Qt5——从零开始的学生管理系统9.png" alt="" width="340" height="211" /></p>
<h4 align="left">　　4：sortwidget</h4>
<p align="left">　　QRadioButton单选框可以解决我们的排序根据选择问题</p>
<p align="left">　　（当然，许多方法都可以，这里只演示QRadioButton）</p>
<p align="left">　　QTableWidget表格可以用来显示排序后的信息。</p>
<p align="left">　　我们需要mathRadioButton、enRadioButton、cRadioButton、avgRadioButton四个QRadioButton来选择排序的根据，需要sortButton一个QPushButton来提交排序，需要tableWidget一个 QTableWidget来显示排序结果。</p>
<p align="left">&nbsp;　　<img src="./images/Qt5——从零开始的学生管理系统10.png" alt="" width="457" height="199" /></p>
<p align="left">到此为止的源码：</p>
<p align="left"><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly)">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly)</a></p>
<h3 align="left">　　5、完成学生类的设计</h3>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 之前在数据结构设计中我们已经设计好了，以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p align="left">&nbsp;&nbsp; 姓名（字符串）</p>
<p align="left">&nbsp;&nbsp; 学号（整型）</p>
<p align="left">&nbsp;&nbsp; 数学成绩（整型）</p>
<p align="left">&nbsp;&nbsp; 英语成绩（整型）</p>
<p align="left">&nbsp;&nbsp; C语言程序设计成绩（整型）</p>
<p align="left">&nbsp;&nbsp; 平均成绩（双浮点数）</p>
<p align="left">现在着手去实现它</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 右击项目Add New选择C++ C++Class 为它起名叫StudentInfo之后下一步到完成，在studentinfo.h中为其创建对应的私有变量，及其对应的get与set函数。</p>
<h4 align="left">　　studentinfo.h</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> StudentInfo
{
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    QString name;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> id, math, english, languageC;
    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> avg;
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    StudentInfo();
    StudentInfo(QString tname, </span><span style="color: #0000ff;">int</span> tid, <span style="color: #0000ff;">int</span> tmath, <span style="color: #0000ff;">int</span> tenglish, <span style="color: #0000ff;">int</span><span style="color: #000000;"> tlanguageC){
        name </span>=<span style="color: #000000;"> tname;
        id </span>=<span style="color: #000000;"> tid;
        math </span>=<span style="color: #000000;"> tmath;
        english </span>=<span style="color: #000000;"> tenglish;
        languageC </span>=<span style="color: #000000;"> tlanguageC;
        avg </span>= (tmath + tenglish + tlanguageC) / <span style="color: #800080;">3.0</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getId(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> id;
    }
    QString getName(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> name;
    }
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getMath(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> math;
    }
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getEnglish(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> english;
    }
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getLanguageC(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> languageC;
    }
    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> getAvg(){
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> avg;
    }
    </span><span style="color: #0000ff;">void</span> setId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> tid){
        id </span>=<span style="color: #000000;"> tid;
    }
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setName(QString tname){
        name </span>=<span style="color: #000000;"> tname;
    }
    </span><span style="color: #0000ff;">void</span> setMath(<span style="color: #0000ff;">int</span><span style="color: #000000;"> tmath){
        math </span>=<span style="color: #000000;"> tmath;
        avg </span>= (math + english + languageC) / <span style="color: #800080;">3.0</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">void</span> setEnglish(<span style="color: #0000ff;">int</span><span style="color: #000000;"> tenglish){
        english </span>=<span style="color: #000000;"> tenglish;
        avg </span>= (math + english + languageC) / <span style="color: #800080;">3.0</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">void</span> setLanguageC(<span style="color: #0000ff;">int</span><span style="color: #000000;"> tlanguageC){
        languageC </span>=<span style="color: #000000;"> tlanguageC;
        avg </span>= (math + english + languageC) / <span style="color: #800080;">3.0</span><span style="color: #000000;">;
    }
};</span></pre>
</div>
<h3 align="left">　　6、完善添加学生信息</h3>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 打开addstudentwidget.h为&rdquo;添加&rdquo;按钮设计点击槽函数，由于我们设计用文件对学生信息进行储存，所以需要引用QFile，这里我使用对话框来提示用户操作中的各种问题，所以需要引入QMessageBox。</p>
<p align="left">　　QMessageBox中有很多类型的对话框，各对话框的用法这里就不详细介绍了，这里我们只介绍我们即将用到的QMessageBox::about</p>
<p align="left">　　QMessageBox::about(NULL, "About", "About this application");</p>
<p align="left">　　其中三个参数分别对应，父窗口对象， 对话框标题， 对话框内容。</p>
<p align="left">　　在addstudentwidget.cpp中给出函数定义：</p>
<p align="left">　　在lineEdit中取出用户输入的数据，lineEdit拥有text()方法，会返回一个QString，而QString中又拥有入toInt() toDouble()等各种类型转换函数，可以适应我们的大多数要求。</p>
<p align="left">　　打开数据文件将我们刚刚获取的数据追加在文件结尾。</p>
<h4 align="left">　　addstudentwidget.h</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#ifndef ADDSTUDENTWIDGET_H
</span><span style="color: #0000ff;">#define</span> ADDSTUDENTWIDGET_H<span style="color: #000000;">
#include </span>&lt;QWidget&gt;<span style="color: #000000;">
#include </span>&lt;QFile&gt;<span style="color: #000000;">
#include </span>&lt;QMessageBox&gt;<span style="color: #000000;">
#include </span>&lt;QDebug&gt;

<span style="color: #0000ff;">namespace</span><span style="color: #000000;"> Ui {
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> AddStudentWidget;
}
</span><span style="color: #0000ff;">class</span> AddStudentWidget : <span style="color: #0000ff;">public</span><span style="color: #000000;"> QWidget
{
    Q_OBJECT
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">explicit</span> AddStudentWidget(QWidget *parent =<span style="color: #000000;"> nullptr);
    </span>~<span style="color: #000000;">AddStudentWidget();
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    Ui::AddStudentWidget </span>*<span style="color: #000000;">ui;
signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span><span style="color: #000000;"> number);
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_returnButton_clicked();
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_addButton_clicked();
};
</span><span style="color: #0000ff;">#endif</span> <span style="color: #008000;">//</span><span style="color: #008000;"> ADDSTUDENTWIDGET_H</span></pre>
</div>
<h4 align="left">　　addstudentwidget.cpp</h4>
<div class="cnblogs_code">
<pre>#include <span style="color: #800000;">"</span><span style="color: #800000;">addstudentwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">ui_addstudentwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
AddStudentWidget::AddStudentWidget(QWidget </span>*<span style="color: #000000;">parent) :
    QWidget(parent),
    ui(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Ui::AddStudentWidget)
{
    ui</span>-&gt;setupUi(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
}
AddStudentWidget::</span>~<span style="color: #000000;">AddStudentWidget()
{
    </span><span style="color: #0000ff;">delete</span><span style="color: #000000;"> ui;
}
</span><span style="color: #0000ff;">void</span> AddStudentWidget::on_returnButton_clicked(){   <span style="color: #008000;">//</span><span style="color: #008000;">"主菜单"按钮点击</span>
    emit display(<span style="color: #800080;">0</span><span style="color: #000000;">);
}
</span><span style="color: #0000ff;">void</span> AddStudentWidget::on_addButton_clicked(){  <span style="color: #008000;">//</span><span style="color: #008000;">"添加"按钮点击</span>
    QString name = ui-&gt;nameLineEdit-&gt;<span style="color: #000000;">text();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的姓名由nameLineEdit取出</span>
    <span style="color: #0000ff;">int</span> id = ui-&gt;idLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的学号由idLineEdit取出，并转换为整型</span>
    <span style="color: #0000ff;">int</span> math = ui-&gt;mathLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的学号由mathLineEdit取出，并转换为整型</span>
    <span style="color: #0000ff;">int</span> english = ui-&gt;enLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的学号由enLineEdit取出，并转化为整型</span>
    <span style="color: #0000ff;">int</span> languageC = ui-&gt;cLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的学号由cLineEdit取出，并转化为整型</span>
    <span style="color: #0000ff;">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;idLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;enLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;cLineEdit-&gt;text() == <span style="color: #800000;">""</span><span style="color: #000000;">){
        </span><span style="color: #008000;">//</span><span style="color: #008000;">插入的五项数据都不能为空，否则在读取文件时会出现问题。</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">存在空项</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    QFile file(</span><span style="color: #800000;">"</span><span style="color: #800000;">student.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">实例化一个QFile file为我们的数据文件student.txt</span>
    file.open(QIODevice::WriteOnly|QIODevice::Text|<span style="color: #000000;">QIODevice::Append);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">open()可以用来打开文件这里QIODevice::WriteOnly代表将文件以只写的方式打开
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QIODevice::Text代表我们打开的是文本文件，QIODevice::Text会对end-of-line结束符进行转译
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QIODevice::Append以追加的方式打开，新增加的内容将被追加到文件末尾</span>
    <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">如果数据文件没有打开，弹出对话框提示用户</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    QTextStream </span><span style="color: #0000ff;">out</span>(&amp;<span style="color: #000000;">file);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QTextStream可以进行一些基本的文本读写，比如QString int char之类的数据QDataStream可以进行一个如QMap QPoint之类数据的读写。</span>
    <span style="color: #0000ff;">out</span> &lt;&lt; name &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt;  id &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; math &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; english &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> languageC;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将我们刚刚获取的数据写入文件</span>
<span style="color: #000000;">    file.close();
    QMessageBox::about(NULL, </span><span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">插入成功</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    ui</span>-&gt;nameLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;idLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;mathLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;enLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;cLineEdit-&gt;<span style="color: #000000;">clear();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将用户输入的数据清空</span>
}</pre>
</div>
<p align="left">运行一下</p>
<p align="left">&nbsp;<img src="./images/Qt5——从零开始的学生管理系统11.png" alt="" width="296" height="240" /></p>
<p align="left"><img src="./images/Qt5——从零开始的学生管理系统12.png" alt="" width="299" height="244" /></p>
<p align="left"><img src="./images/Qt5——从零开始的学生管理系统13.png" alt="" /></p>
<p align="left">　　显示插入成功，打开项目文件夹所在目录build-StudentManagementSystem开头的文件夹，我们的数据文件student就会出现在此处</p>
<p align="left">&nbsp;<img src="./images/Qt5——从零开始的学生管理系统14.png" alt="" width="187" height="231" /></p>
<p align="left">打开看一看</p>
<p align="left">&nbsp;<img src="./images/Qt5——从零开始的学生管理系统15.png" alt="" /></p>
<p>&nbsp;</p>
<p align="left">这样，我们的添加信息模块就完成了。</p>
<p align="left">以上源代码：</p>
<p align="left"><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add)">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add)</a></p>
<h3 align="left">　　7、完善修改信息</h3>
<p align="left">　　打开modifywidget.h为&rdquo;删除&rdquo;与&rdquo;修改&rdquo;按钮设计点击槽函数,在modifywidget.cpp中给出函数定义。</p>
<p align="left">　　对于删除和修改操作这里我打算以文件中的数据建立一个数据类型为StudentInfo的QVector容器，容器中盛放全体学生信息。对容器进行删改操作，最后以容器内的数据覆盖原有的数据即可。</p>
<h4 align="left">　　modifywidget.h</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#ifndef MODIFYWIDGET_H
</span><span style="color: #0000ff;">#define</span> MODIFYWIDGET_H<span style="color: #000000;">

#include </span>&lt;QWidget&gt;<span style="color: #000000;">
#include </span>&lt;QFile&gt;<span style="color: #000000;">
#include </span>&lt;QMessageBox&gt;<span style="color: #000000;">
#include </span>&lt;QtDebug&gt;<span style="color: #000000;">
#include </span>&lt;QVector&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">studentinfo.h</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">namespace</span><span style="color: #000000;"> Ui {
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> ModifyWidget;
}
</span><span style="color: #0000ff;">class</span> ModifyWidget : <span style="color: #0000ff;">public</span><span style="color: #000000;"> QWidget
{
    Q_OBJECT
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">explicit</span> ModifyWidget(QWidget *parent =<span style="color: #000000;"> nullptr);
    </span>~<span style="color: #000000;">ModifyWidget();
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    Ui::ModifyWidget </span>*<span style="color: #000000;">ui;
signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span><span style="color: #000000;"> number);
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span> on_returnButton_clicked(); <span style="color: #008000;">//</span><span style="color: #008000;">点击主菜单按钮</span>
    <span style="color: #0000ff;">void</span> on_deleteButton_clicked(); <span style="color: #008000;">//</span><span style="color: #008000;">点击删除按钮</span>
    <span style="color: #0000ff;">void</span> on_modifyButton_clicked(); <span style="color: #008000;">//</span><span style="color: #008000;">点击修改按钮</span>
<span style="color: #000000;">};

</span><span style="color: #0000ff;">#endif</span> <span style="color: #008000;">//</span><span style="color: #008000;"> MODIFYWIDGET_H</span></pre>
</div>
<h4 align="left">　　modifywidget.cpp</h4>
<div class="cnblogs_code">
<pre>#include <span style="color: #800000;">"</span><span style="color: #800000;">modifywidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">ui_modifywidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">

ModifyWidget::ModifyWidget(QWidget </span>*<span style="color: #000000;">parent) :
    QWidget(parent),
    ui(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Ui::ModifyWidget)
{
    ui</span>-&gt;setupUi(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
}

ModifyWidget::</span>~<span style="color: #000000;">ModifyWidget()
{
    </span><span style="color: #0000ff;">delete</span><span style="color: #000000;"> ui;
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> ModifyWidget::on_returnButton_clicked(){
    emit display(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> ModifyWidget::on_deleteButton_clicked(){
    QVector</span>&lt;StudentInfo&gt; allStudentInfo;    <span style="color: #008000;">//</span><span style="color: #008000;">数据类型为StudentInfo的QVector容器</span>
    <span style="color: #0000ff;">if</span>(ui-&gt;idLineEdit-&gt;text() == <span style="color: #800000;">""</span>){   <span style="color: #008000;">//</span><span style="color: #008000;">如果id输入栏为空则输出错误提示并返回</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">id不得为空!</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    QFile file(</span><span style="color: #800000;">"</span><span style="color: #800000;">student.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    file.open(QIODevice::ReadOnly</span>|<span style="color: #000000;">QIODevice::Text);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以只读 的方式打开文本文件</span>
    <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">如果数据文件没有打开，弹出对话框提示用户</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span>
    QTextStream inp(&amp;<span style="color: #000000;">file);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以file建立一个QT的文本流</span>
    <span style="color: #0000ff;">while</span>(!<span style="color: #000000;">inp.atEnd()){
        QString name;
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> id, math, english, languageC;
        inp </span>&gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt;<span style="color: #000000;"> languageC;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">读入姓名 学号 数学成绩 英语成绩 C语言成绩</span>
<span style="color: #000000;">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));
        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span>
<span style="color: #000000;">    }
    allStudentInfo.pop_back();  </span><span style="color: #008000;">//</span><span style="color: #008000;">文件最后会多读一个无用数据，将其拿出</span>
<span style="color: #000000;">    file.close();
    </span><span style="color: #0000ff;">int</span> id = ui-&gt;idLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">获取用户输入的id</span>
    <span style="color: #0000ff;">bool</span> flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">记录是否进行过删除</span>
    <span style="color: #0000ff;">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++<span style="color: #000000;">){
        </span><span style="color: #008000;">//</span><span style="color: #008000;">用迭代器遍历allStudentInfo</span>
        <span style="color: #0000ff;">if</span>(it-&gt;getId() == id){  <span style="color: #008000;">//</span><span style="color: #008000;">如果找到有id与该id相同的学生，就进行删除</span>
<span style="color: #000000;">            allStudentInfo.erase(it);
            flag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        }
    }
    </span><span style="color: #0000ff;">if</span>(flag){   <span style="color: #008000;">//</span><span style="color: #008000;">如果进行过删除，弹出对话框并更新文件</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">删除成功</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        file.open(QIODevice::WriteOnly</span>|QIODevice::Text|<span style="color: #000000;">QIODevice::Truncate);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">以只写覆盖的方式打开文本文件</span>
        <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">如果数据文件没有打开，弹出对话框提示用户</span>
            QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
        }
        QTextStream </span><span style="color: #0000ff;">out</span>(&amp;<span style="color: #000000;">file);
        </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(auto i : allStudentInfo){
            </span><span style="color: #0000ff;">out</span> &lt;&lt; i.getName() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getId() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getMath() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getEnglish() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getLanguageC() &lt;&lt;<span style="color: #000000;"> endl;
        }
        file.close();
    }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果没有进行删除，弹出不存在对话框</span>
         QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">id不存在！</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">关闭文件</span>
    ui-&gt;idLineEdit-&gt;<span style="color: #000000;">clear();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">清空id输入框</span>
<span style="color: #000000;">}
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> ModifyWidget::on_modifyButton_clicked(){
    </span><span style="color: #0000ff;">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;idLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;enLineEdit-&gt;text() == <span style="color: #800000;">""</span> || ui-&gt;cLineEdit-&gt;text() == <span style="color: #800000;">""</span><span style="color: #000000;">){
        QMessageBox::about(NULL, </span><span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">存在空项</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    QVector</span>&lt;StudentInfo&gt; allStudentInfo;    <span style="color: #008000;">//</span><span style="color: #008000;">数据类型为StudentInfo的QVector容器</span>
    QFile file(<span style="color: #800000;">"</span><span style="color: #800000;">student.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    file.open(QIODevice::ReadOnly</span>|<span style="color: #000000;">QIODevice::Text);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以只读 的方式打开文本文件</span>
    <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">如果数据文件没有打开，弹出对话框提示用户</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span>
    QTextStream inp(&amp;<span style="color: #000000;">file);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以file建立一个QT的文本流</span>
    <span style="color: #0000ff;">while</span>(!<span style="color: #000000;">inp.atEnd()){
        QString name;
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> id, math, english, languageC;
        inp </span>&gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt;<span style="color: #000000;"> languageC;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">读入姓名 学号 数学成绩 英语成绩 C语言成绩</span>
<span style="color: #000000;">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));
        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span>
<span style="color: #000000;">    }
    allStudentInfo.pop_back();  </span><span style="color: #008000;">//</span><span style="color: #008000;">文件最后会多读一个无用数据，将其拿出</span>
<span style="color: #000000;">    file.close();
    </span><span style="color: #0000ff;">int</span> id = ui-&gt;idLineEdit-&gt;<span style="color: #000000;">text().toInt();
    QString name </span>= ui-&gt;nameLineEdit-&gt;<span style="color: #000000;">text();
    </span><span style="color: #0000ff;">int</span> math = ui-&gt;mathLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #0000ff;">int</span> english = ui-&gt;enLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #0000ff;">int</span> languageC = ui-&gt;cLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #0000ff;">bool</span> flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++<span style="color: #000000;">){
        </span><span style="color: #0000ff;">if</span>(it-&gt;getId() ==<span style="color: #000000;"> id){
            it</span>-&gt;<span style="color: #000000;">setName(name);
            it</span>-&gt;<span style="color: #000000;">setMath(math);
            it</span>-&gt;<span style="color: #000000;">setEnglish(english);
            it</span>-&gt;<span style="color: #000000;">setLanguageC(languageC);
            flag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        }
    }
    </span><span style="color: #0000ff;">if</span>(flag){   <span style="color: #008000;">//</span><span style="color: #008000;">如果进行过修改，弹出对话框并更新文件</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">修改成功</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        file.open(QIODevice::WriteOnly</span>|QIODevice::Text|<span style="color: #000000;">QIODevice::Truncate);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">以只写覆盖的方式打开文本文件</span>
        <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">如果数据文件没有打开，弹出对话框提示用户</span>
            QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
        }
        QTextStream </span><span style="color: #0000ff;">out</span>(&amp;<span style="color: #000000;">file);
        </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(auto i : allStudentInfo){
            </span><span style="color: #0000ff;">out</span> &lt;&lt; i.getName() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getId() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getMath() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getEnglish() &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; i.getLanguageC() &lt;&lt;<span style="color: #000000;"> endl;
        }
        file.close();
    }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{
        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果没有进行修改，弹出不存在对话框</span>
         QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">id不存在！</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">关闭文件</span>
    ui-&gt;idLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;nameLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;mathLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;enLineEdit-&gt;<span style="color: #000000;">clear();
    ui</span>-&gt;cLineEdit-&gt;<span style="color: #000000;">clear();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">清空所有输入框</span>
}</pre>
</div>
<p align="left">这样，修改模块就完成了</p>
<p align="left">以上源代码：</p>
<p align="left">&nbsp;<a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt%20_3(add%2Cmodify)">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt%20_3(add%2Cmodify)</a></p>
<h3 align="left">8、查询模块</h3>
<p align="left">　　打开selectwidget.h为&rdquo;删除&rdquo;与&rdquo;修改&rdquo;按钮设计点击槽函数,在selectwidget.cpp中给出函数定义。</p>
<p align="left">　　查询可以在从文件读取时判断是否会读取到id为输入id的学生，也可以向修改一样江所有学生信息先读入到数据类型为StudentInfo的QVector容器中，在从容器中查询数据，这里我选择读入到容器的方法。</p>
<h4 align="left">selectwidget.h</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#ifndef SELECTWIDGET_H
</span><span style="color: #0000ff;">#define</span> SELECTWIDGET_H<span style="color: #000000;">
#include </span>&lt;QWidget&gt;<span style="color: #000000;">
#include </span>&lt;QtDebug&gt;<span style="color: #000000;">
#include </span>&lt;QFile&gt;<span style="color: #000000;">
#include </span>&lt;QVector&gt;<span style="color: #000000;">
#include </span>&lt;QMessageBox&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">studentinfo.h</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">namespace</span><span style="color: #000000;"> Ui {
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> SelectWidget;
}
</span><span style="color: #0000ff;">class</span> SelectWidget : <span style="color: #0000ff;">public</span><span style="color: #000000;"> QWidget
{
    Q_OBJECT
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">explicit</span> SelectWidget(QWidget *parent =<span style="color: #000000;"> nullptr);
    </span>~<span style="color: #000000;">SelectWidget();

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    Ui::SelectWidget </span>*<span style="color: #000000;">ui;
 
signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span><span style="color: #000000;"> number);
 
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_returnButton_clicked();
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> on_selectButton_clicked();
};

</span><span style="color: #0000ff;">#endif</span> <span style="color: #008000;">//</span><span style="color: #008000;"> SELECTWIDGET_H</span>&nbsp;</pre>
</div>
<h4 align="left">selectwidget.cpp</h4>
<div class="cnblogs_code">
<pre>#include <span style="color: #800000;">"</span><span style="color: #800000;">selectwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">ui_selectwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">

SelectWidget::SelectWidget(QWidget </span>*<span style="color: #000000;">parent) :
    QWidget(parent),
    ui(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Ui::SelectWidget)
{
    ui</span>-&gt;setupUi(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
}

SelectWidget::</span>~<span style="color: #000000;">SelectWidget()
{
    </span><span style="color: #0000ff;">delete</span><span style="color: #000000;"> ui;
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SelectWidget::on_returnButton_clicked(){
    emit display(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SelectWidget::on_selectButton_clicked(){
    </span><span style="color: #0000ff;">if</span>(ui-&gt;idLineEdit-&gt;text() == <span style="color: #800000;">""</span><span style="color: #000000;">){
        QMessageBox::about(NULL, </span><span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">id不能为空</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    QFile file(</span><span style="color: #800000;">"</span><span style="color: #800000;">student.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    file.open(QIODevice::ReadOnly</span>|<span style="color: #000000;">QIODevice::Text);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以只读的方式打开文本文件</span>
    <span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">文件打开失败</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    QTextStream inp(</span>&amp;<span style="color: #000000;">file);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以file作为Qt文本流</span>
    QVector&lt;StudentInfo&gt;<span style="color: #000000;"> allStudentInfo;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">数据类型为StudentInfo的QVector容器</span>
    <span style="color: #0000ff;">while</span>(!inp.atEnd()){ <span style="color: #008000;">//</span><span style="color: #008000;">读到文件结尾</span>
<span style="color: #000000;">        QString name;
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> id, math, english, languageC;
        inp </span>&gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt;<span style="color: #000000;"> languageC;
        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));
        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span>
<span style="color: #000000;">    }
    allStudentInfo.pop_back();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">扔掉最后的无用数据</span>
<span style="color: #000000;">    file.close();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">关闭文件</span>
    <span style="color: #0000ff;">int</span> id = ui-&gt;idLineEdit-&gt;<span style="color: #000000;">text().toInt();
    </span><span style="color: #0000ff;">bool</span> flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(auto i : allStudentInfo){
        </span><span style="color: #0000ff;">if</span>(i.getId() ==<span style="color: #000000;"> id){
            ui</span>-&gt;showNameLabel-&gt;<span style="color: #000000;">setText(i.getName());
            ui</span>-&gt;showMathLabel-&gt;<span style="color: #000000;">setText(QString::number(i.getMath()));
            ui</span>-&gt;showEnLabel-&gt;<span style="color: #000000;">setText(QString::number(i.getEnglish()));
            ui</span>-&gt;showCLabel-&gt;<span style="color: #000000;">setText(QString::number(i.getLanguageC()));
            ui</span>-&gt;showAvgLabel-&gt;<span style="color: #000000;">setText(QString::number(i.getAvg()));
            flag </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
        }
    }
    </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">flag){
       QMessageBox::about(NULL, </span><span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">id不存在！</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    ui</span>-&gt;idLineEdit-&gt;<span style="color: #000000;">clear();
}</span></pre>
</div>
<p align="left">以上源代码</p>
<p align="left">&nbsp;<a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect)">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect)</a></p>
<h3 align="left">9、排序模块</h3>
<p align="left">　　老样子，将数据从文件中读入数据类型为StudentInfo的QVector容器后进行排序就容易很多了。</p>
<p align="left">　　我们需要排序时只能根据数学、英语、C语言、平均成绩中的一种进行排序，所以我们要做到代表这四种排序方式的QRedioButton有且只有一个能被选中，我们可以将其加入一个QButtonGroup，这样便可以实现这个需求，至于显示排序后的数据我们可以显示在表格控件QTableWidget中。</p>
<p align="left">　　QButtonGroup直接继承自QObject，他有一个属性exclusive当这个属性为真时，所有在QButtonGroup内的按钮同一时间只有一个可以被选择。</p>
<p align="left">　　QButtonGroup我们用到了addButton添加按钮 与checkedId获取选中按钮的id两个方法，其他方法诸位可以自己去搜索。</p>
<p align="left">　　QTableWidget继承自QTableView，QTableView可以自定义的数据模型显示内容(setModel)但是QTableWidget不行，QTableWidget有固定的数据模型，在像其中填入数据时只需要一个单元格一个单元格的填好就可以了（setItem）</p>
<p align="left">　　QTableWidget我们用到了setHorizontalHeaderLabels设置水平表头标签horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch); 设置根据总宽度调整列宽；setRowCount设置行数；setItem设置单元格，其他方法诸位可以自己去搜索。</p>
<h3 align="left">sortwidget.h</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#ifndef SORTWIDGET_H
</span><span style="color: #0000ff;">#define</span> SORTWIDGET_H<span style="color: #000000;">
 
#include </span>&lt;QWidget&gt;<span style="color: #000000;">
#include </span>&lt;QButtonGroup&gt;<span style="color: #000000;">
#include </span>&lt;QVector&gt;<span style="color: #000000;">
#include </span>&lt;QFile&gt;<span style="color: #000000;">
#include </span>&lt;QDebug&gt;<span style="color: #000000;">
#include </span>&lt;QMessageBox&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">studentinfo.h</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">namespace</span><span style="color: #000000;"> Ui {
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> SortWidget;
}

</span><span style="color: #0000ff;">class</span> SortWidget : <span style="color: #0000ff;">public</span><span style="color: #000000;"> QWidget
{
    Q_OBJECT
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">explicit</span> SortWidget(QWidget *parent =<span style="color: #000000;"> nullptr);
    </span>~<span style="color: #000000;">SortWidget();
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    Ui::SortWidget </span>*<span style="color: #000000;">ui;
    QButtonGroup </span>*<span style="color: #000000;">sortButtonGroup;
signals:
    </span><span style="color: #0000ff;">void</span> display(<span style="color: #0000ff;">int</span><span style="color: #000000;"> number);
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> slots:
    </span><span style="color: #0000ff;">void</span> on_returnButton_clicked(); <span style="color: #008000;">//</span><span style="color: #008000;">返回菜单</span>
    <span style="color: #0000ff;">void</span> on_sortButton_clicked();   <span style="color: #008000;">//</span><span style="color: #008000;">排序</span>
<span style="color: #000000;">};

</span><span style="color: #0000ff;">#endif</span> <span style="color: #008000;">//</span><span style="color: #008000;"> SORTWIDGET_H</span></pre>
</div>
<h4 align="left">sortwidget.cpp</h4>
<div class="cnblogs_code">
<pre>#include <span style="color: #800000;">"</span><span style="color: #800000;">sortwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">ui_sortwidget.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span>&lt;algorithm&gt;<span style="color: #000000;">

SortWidget::SortWidget(QWidget </span>*<span style="color: #000000;">parent) :
    QWidget(parent),
    ui(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Ui::SortWidget)
{
    ui</span>-&gt;setupUi(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
    sortButtonGroup </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> QButtonGroup();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">实例化sortButtonGroup</span>
    sortButtonGroup-&gt;addButton(ui-&gt;mathRadioButton, <span style="color: #800080;">0</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将代表数学的单选框加入sortButtonGroup并将其id设为0
    </span><span style="color: #008000;">//</span><span style="color: #008000;">不建议使用默认id，默认id是由-2开始依次递减的</span>
    sortButtonGroup-&gt;addButton(ui-&gt;enRadioButton, <span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将代表英语的单选框加入sortButtonGroup并将其id设为1</span>
    sortButtonGroup-&gt;addButton(ui-&gt;cRadioButton, <span style="color: #800080;">2</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将代表C语言的单选框加入sortButtonGroup并将其id设为2</span>
    sortButtonGroup-&gt;addButton(ui-&gt;avgRadioButton, <span style="color: #800080;">3</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将代表平均的单选框加入sortButtonGroup并将其id设为3</span>
    ui-&gt;avgRadioButton-&gt;setChecked(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">平均成绩默认选中</span>
    ui-&gt;tableWidget-&gt;setColumnCount(<span style="color: #800080;">6</span><span style="color: #000000;">);
    QStringList headerLabels;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">QStringList headerLabels用来记录表格表头数据</span>
    headerLabels &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">姓名</span><span style="color: #800000;">"</span>) &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">学号</span><span style="color: #800000;">"</span>) &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">数学</span><span style="color: #800000;">"</span>) &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">英语</span><span style="color: #800000;">"</span>) &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">C语言</span><span style="color: #800000;">"</span>) &lt;&lt; tr(<span style="color: #800000;">"</span><span style="color: #800000;">平均</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    ui</span>-&gt;tableWidget-&gt;<span style="color: #000000;">setHorizontalHeaderLabels(headerLabels);
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> void setHorizontalHeaderLabels(const QStringList &amp;labels);设置水平表头标签</span>
    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;<span style="color: #000000;">setSectionResizeMode(QHeaderView::Stretch);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">设置根据总宽度调整列宽</span>
    ui-&gt;tableWidget-&gt;setRowCount(<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">初始行数设为一行</span>
<span style="color: #000000;">}

SortWidget::</span>~<span style="color: #000000;">SortWidget()
{
    </span><span style="color: #0000ff;">delete</span><span style="color: #000000;"> ui;
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SortWidget::on_returnButton_clicked(){
    emit display(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
}
 
</span><span style="color: #0000ff;">bool</span> getStudentInfo(QVector&lt;StudentInfo&gt; &amp;allStudentInfo){  <span style="color: #008000;">//</span><span style="color: #008000;">读取信息成功返回true 否则返回false</span>
    QFile file(<span style="color: #800000;">"</span><span style="color: #800000;">student.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    file.open(QIODevice::ReadOnly</span>|<span style="color: #000000;">QIODevice::Text);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">以只读方式打开文本文件student.txt</span>
    QTextStream inp(&amp;<span style="color: #000000;">file);
    </span><span style="color: #0000ff;">if</span>(!file.isOpen()){ <span style="color: #008000;">//</span><span style="color: #008000;">文件打开失败</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">数据文件打开失败</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">while</span>(!inp.atEnd()){    <span style="color: #008000;">//</span><span style="color: #008000;">读到文件结尾</span>
<span style="color: #000000;">        QString name;
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> id, math, english, languageC;
        inp </span>&gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt;<span style="color: #000000;"> languageC;
        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));
        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用之前声明的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span>
<span style="color: #000000;">    }
    allStudentInfo.pop_back();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">扔掉最后的无用数据</span>
<span style="color: #000000;">    file.close();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">关闭文件</span>
    <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
}

</span><span style="color: #0000ff;">bool</span> cmp_math(StudentInfo a, StudentInfo b){    <span style="color: #008000;">//</span><span style="color: #008000;">数学排序</span>
    <span style="color: #0000ff;">return</span> a.getMath() &gt;<span style="color: #000000;"> b.getMath();
}
 
</span><span style="color: #0000ff;">bool</span> cmp_English(StudentInfo a, StudentInfo b){ <span style="color: #008000;">//</span><span style="color: #008000;">英语排序</span>
    <span style="color: #0000ff;">return</span> a.getEnglish() &gt;<span style="color: #000000;"> b.getEnglish();
}

</span><span style="color: #0000ff;">bool</span> cmp_languageC(StudentInfo a, StudentInfo b){   <span style="color: #008000;">//</span><span style="color: #008000;">C语言排序</span>
    <span style="color: #0000ff;">return</span> a.getLanguageC() &gt;<span style="color: #000000;"> b.getLanguageC();
}

</span><span style="color: #0000ff;">bool</span> cmp_avg(StudentInfo a, StudentInfo b){ <span style="color: #008000;">//</span><span style="color: #008000;">平均成绩排序</span>
    <span style="color: #0000ff;">return</span> a.getAvg() &gt;<span style="color: #000000;"> b.getAvg();
}
 
</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SortWidget::on_sortButton_clicked(){
    ui</span>-&gt;tableWidget-&gt;<span style="color: #000000;">clearContents();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">清空除表头外的所有数据
    </span><span style="color: #008000;">//</span><span style="color: #008000;">若想清除表头可使用clear()</span>
    <span style="color: #0000ff;">int</span> sortTag = sortButtonGroup-&gt;<span style="color: #000000;">checkedId();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">取得当前选中的单选框的id</span>
    QVector&lt;StudentInfo&gt;<span style="color: #000000;"> allStudentInfo;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">数据类型为StudentInfo的QVector容器</span>
    <span style="color: #0000ff;">if</span>(!getStudentInfo(allStudentInfo)) <span style="color: #008000;">//</span><span style="color: #008000;">从文件读取数据到allStudentInfo</span>
        <span style="color: #0000ff;">return</span>; <span style="color: #008000;">//</span><span style="color: #008000;">读取失败直接返回</span>
    <span style="color: #0000ff;">if</span>(allStudentInfo.empty()){ <span style="color: #008000;">//</span><span style="color: #008000;">allStudentInfo中没有数据</span>
        QMessageBox::about(NULL, <span style="color: #800000;">"</span><span style="color: #800000;">反馈</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">没有学生信息</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (sortTag) {
        </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">0</span>: <span style="color: #008000;">//</span><span style="color: #008000;">sortTag==0根据数学进行排序</span>
<span style="color: #000000;">            std::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_math);
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">1</span>: <span style="color: #008000;">//</span><span style="color: #008000;">sortTag==1根据英语进行排序</span>
<span style="color: #000000;">            std::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_English);
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">2</span>: <span style="color: #008000;">//</span><span style="color: #008000;">sortTag==2根据C语言进行排序</span>
<span style="color: #000000;">            std::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_languageC);
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">3</span>: <span style="color: #008000;">//</span><span style="color: #008000;">sortTag==3根据平均成绩进行排序</span>
<span style="color: #000000;">            std::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_avg);
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
    }
    ui</span>-&gt;tableWidget-&gt;<span style="color: #000000;">setRowCount(allStudentInfo.size());
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将表格的行数设为与学生数量相同
    </span><span style="color: #008000;">//</span><span style="color: #008000;">否则setItem添加单元格不会生效</span>
    <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; allStudentInfo.size(); i++<span style="color: #000000;">){
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">0</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(allStudentInfo[i].getName()));
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">1</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(QString::number(allStudentInfo[i].getId())));
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">2</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(QString::number(allStudentInfo[i].getMath())));
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">3</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(QString::number(allStudentInfo[i].getEnglish())));
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">4</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(QString::number(allStudentInfo[i].getLanguageC())));
        ui</span>-&gt;tableWidget-&gt;setItem(i, <span style="color: #800080;">5</span>, <span style="color: #0000ff;">new</span><span style="color: #000000;"> QTableWidgetItem(QString::number(allStudentInfo[i].getAvg())));
        </span><span style="color: #008000;">//</span><span style="color: #008000;">设置各单元格的数据，非QString类型的数据需要转换为QString</span>
<span style="color: #000000;">    }
}</span></pre>
</div>
<p align="left">到此为止我们整个项目便完成了，以后可能还会继续完善。</p>
<p align="left">源代码</p>
<p align="left"><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all)">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all)</a></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>