<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修【CSP-S膜你考】即时战略（模拟）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>【CSP-S膜你考】即时战略（模拟）</center></div><div class='banquan'>原文出处:本文由博客园博主yu__xuan提供。<br/>
原文连接:https://www.cnblogs.com/poi-bolg-poi/p/11668445.html</div><br>
    <h2 id="problem-b.-即时战略-rts.ccpppas">Problem B. 即时战略 (rts.c/cpp/pas)</h2>
<h3 id="注意">注意</h3>
<p>Input file: rts.in<br />
Output file: rts.out<br />
Time Limit : 2 seconds<br />
Memory Limit: 512 megabytes</p>
<h3 id="题面">题面</h3>
<p><span class="math inline">\(\text{HLY}\)</span>在玩一个即时战略<span class="math inline">\(\text{(Real Time Strategy)}\)</span>游戏。与大多数同类游戏类似，这个游戏的地图是平面的，并且玩家都有一个基地。</p>
<p><span class="math inline">\(\text{HLY}\)</span>的对手杰哥的基地是一个<span class="math inline">\(w \times h\)</span>的矩形。其中矩形的每个格子都有一个建筑，每个建筑都有一个重要度。其中第<span class="math inline">\(i\)</span>行第<span class="math inline">\(j\)</span>列的格子中的建筑的重要度为<span class="math inline">\(w_{ij}\)</span>。</p>
<p><span class="math inline">\(\text{HLY}\)</span>决定轰炸杰哥的基地。他可以选择杰哥基地的任何一个格子释放一个能量为<span class="math inline">\(p\)</span>的炸弹。释放以后，这个格子的建筑会受到<span class="math inline">\(p\)</span>的摧毁度。炸弹产生的冲击波可以向四个方向扩散，每扩散一格能量值会减少<span class="math inline">\(1\)</span>。即释放位置相邻的<span class="math inline">\(4\)</span>个格子会受到<span class="math inline">\(p − 1\)</span>的摧毁度，再向外的<span class="math inline">\(8\)</span>个格子会受到<span class="math inline">\(p − 2\)</span>的摧毁度 ... 直到能量值减为 <span class="math inline">\(0\)</span> ，形式化的讲，如果在第 <span class="math inline">\(x\)</span> 行第 <span class="math inline">\(y\)</span> 列释放炸弹，那么第 <span class="math inline">\(i\)</span> 行第$ j$ 列的格子受到的摧毁度 $d_{ij} = max(0,p − (| x − i | + | y − j |)) $。</p>
<p>对于每个的格子，杰哥受到的损失即为这个格子的重要度与受到的摧毁度的乘积，即<span class="math inline">\(w_{ij} \times d_{ij}\)</span>。</p>
<p><span class="math inline">\(\text{HLY}\)</span>想知道，对于每一种投放炸弹的方案，杰哥受到的最小总损失和最大总损失各为多少，形式化的讲，即为<br />
<span class="math display">\[\large \sum_{i=1}^{w}\sum_{j=1}^{h} w_{ij} \times d_{ij}\]</span><br />
的最小值与最大值。</p>
<h3 id="输入格式">输入格式</h3>
<p>第<span class="math inline">\(1\)</span>行三个整数<span class="math inline">\(w,h,p\)</span>。<br />
接下来<span class="math inline">\(w\)</span>行，每行<span class="math inline">\(h\)</span>个整数。从第<span class="math inline">\(2\)</span>行开始第<span class="math inline">\(i\)</span>行第<span class="math inline">\(j\)</span>个整数表示<span class="math inline">\(w_{ij}\)</span>。</p>
<h3 id="输出格式">输出格式</h3>
<p>一行两个数，表示杰哥受到的最小总损失和最大总损失，用空格隔开。</p>
<h3 id="样例">样例</h3>
<p><span class="math inline">\(\texttt{input\#1}\)</span><br />
3 4 3<br />
9 9 9 1<br />
9 9 1 1<br />
9 1 1 1</p>
<p><span class="math inline">\(\texttt{output\#1}\)</span><br />
10 96</p>
<h3 id="数据范围与提示">数据范围与提示</h3>
<p>样例解释：<br />
<span class="math inline">\(\text{HLY}\)</span>在第<span class="math inline">\(2\)</span>行第<span class="math inline">\(2\)</span>列释放炸弹杰哥所受损失最大，为<br />
<span class="math inline">\(9 \times 1 + 9 \times 2 + 9 \times 1 + 9 \times 2 + 9 \times 3 + 1 \times 2 + 1 \times 1 + 9 \times 1 + 1 \times 2 + 1 \times 1 = 96\)</span>。<br />
<span class="math inline">\(\text{HLY}\)</span>在第<span class="math inline">\(3\)</span>行第<span class="math inline">\(4\)</span>列释放炸弹杰哥所受损失最小， 为<br />
<span class="math inline">\(1\times1+1\times1+1\times2+1\times1+1\times2+1\times3 = 10\)</span>。<br />
对于<span class="math inline">\(100%\)</span>的数据，<span class="math inline">\(1 \le n,m \le 400,1 \le p \le 200,0 \le w ij \le 10^5\)</span>。<br />
子任务<span class="math inline">\(1\)</span>（<span class="math inline">\(10\)</span>分） ：满足<span class="math inline">\(p= 1\)</span>。<br />
子任务<span class="math inline">\(2\)</span>（<span class="math inline">\(30\)</span>分） ：满足<span class="math inline">\(1 \le n,m \le 40\)</span>。<br />
子任务<span class="math inline">\(3\)</span>（<span class="math inline">\(60\)</span>分） ：没有特殊限制。</p>
<hr />
<h3 id="题解">题解</h3>
<p><span class="math inline">\(1 \le n,m \le 400\)</span>模拟可过，不过需要点技巧——前缀和。</p>
<p><img src="./images/【CSP-S膜你考】即时战略（模拟）0.png" /></p>
<p>一个能量为<span class="math inline">\(3\)</span>的炸弹产生的影响如上图。<br />
很明显是<span class="math inline">\(3\)</span>个菱形，我们计算每个菱形的边加到一起。<br />
但暴力加明显过不了，所以使用前缀和，维护一个从左上到右下的前缀和以及一个从右上到坐下的前缀和（是一条线上的）。<br />
具体看代码。</p>
<hr />
<h3 id="code"><span class="math inline">\(Code\)</span></h3>
<pre><code>#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#define max(a,b) a&gt;b?a:b
#define min(a,b) a&lt;b?a:b
#define MAXN 2020
#define int long long

int w,h,p,ans1=0,ans2=1e18,map[MAXN][MAXN];
int sum1[MAXN][MAXN],sum2[MAXN][MAXN];

inline void read(int &amp;T) {
    int x=0;bool f=0;char c=getchar();
    while(c&lt;&#39;0&#39;||c&gt;&#39;9&#39;){if(c==&#39;-&#39;)f=!f;c=getchar();}
    while(c&gt;=&#39;0&#39;&amp;&amp;c&lt;=&#39;9&#39;){x=x*10+c-&#39;0&#39;;c=getchar();}
    T=f?-x:x;
}

signed main() {
    read(w),read(h),read(p);
    w+=500,h+=500;//防止越界
    for(int i=501;i&lt;=w;++i) {
        for(int j=501;j&lt;=h;++j) {
            read(map[i][j]);
        }
    }
    for(int i=1;i&lt;=2010;++i) {
        for(int j=1;j&lt;=2010;++j) {
            sum1[i][j]=sum1[i-1][j-1]+map[i][j];
        }
    }//一个从左上到右下的前缀和
    for(int i=1;i&lt;=2010;++i) {
        for(int j=2010;j&gt;=1;--j) {
            sum2[i][j]=sum2[i-1][j+1]+map[i][j];
        }
    }//一个从右上到左下的前缀和
    for(int i=501;i&lt;=w;++i) {
        for(int j=501;j&lt;=h;++j) {//枚举将炸弹放到哪一个点
            int sum=p*map[i][j];
            int x=p;
            while(x&gt;1) {
                sum+=(p-x+1)*(sum1[i][j+x-1]-sum1[i-x][j-1]);
                sum+=(p-x+1)*(sum1[i+x-1][j]-sum1[i-1][j-x]);
                sum+=(p-x+1)*(sum2[i][j-x+1]-sum2[i-x][j+1]);
                sum+=(p-x+1)*(sum2[i+x-1][j]-sum2[i-1][j+x]);
                sum-=(p-x+1)*map[i-x+1][j];
                sum-=(p-x+1)*map[i+x-1][j];
                sum-=(p-x+1)*map[i][j-x+1];
                sum-=(p-x+1)*map[i][j+x-1];
                --x;
            }//计算放到该点的摧毁度
            ans1=max(ans1,sum);
            ans2=min(ans2,sum);
        }
    }
    std::cout&lt;&lt;ans2&lt;&lt;&quot; &quot;&lt;&lt;ans1&lt;&lt;&#39;\n&#39;;
    return 0;
}</code></pre>
<p>上接<a href="https://www.cnblogs.com/poi-bolg-poi/p/11661517.html">【CSP-S膜你考】最近公共祖先 （数学）</a></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>