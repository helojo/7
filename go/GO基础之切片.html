<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修GO基础之切片' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>GO基础之切片</center></div><div class='banquan'>原文出处:本文由博客园博主小禾点点提供。<br/>
原文连接:https://www.cnblogs.com/jalja/p/11782966.html</div><br>
    <h3>一、什么是切片</h3>
<p><strong>Go语言切片是对数组的抽象。</strong></p>
<ul>
<li>Go数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型切片("动态数组")；</li>
<li>与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。</li>
<li>切片本身没有任何数据，它们只是对现有数组的引用。</li>
<li>切片与数组相比，不需要设定长度，在[ ]中不用设定值，相对来说比较自由</li>
<li>从概念上面来说slice像一个结构体，这个结构体包含了三个元素：</li>
</ul>
<p><strong>切片的结构：</strong></p>
<ul>
<li>〇指针，指向数组中slice指定的开始位置</li>
<li>〇长度，SPslice的长度</li>
<li>〇最大长度，也就是slice开始位置到数组的最后位置的长度</li>
</ul>
<h3>二、切片的使用</h3>
<p><strong>切片的声明</strong></p>
<p><img src="./images/GO基础之切片0.png" alt="" width="642" height="290" /></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code>    s1 := make([]<span style="color: #0000ff;">int</span>, <span style="color: #800080;">5</span><span style="color: #000000;">)
    s2 :</span>= make([]<span style="color: #0000ff;">int</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">7</span>)</pre>
</div>
<p>&nbsp;</p>
<p><strong>切片的初始化：</strong></p>
<p><img src="./images/GO基础之切片1.png" alt="" width="604" height="441" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code>nums := []<span style="color: #0000ff;">int</span>{<span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span>}</pre>
</div>
<p><strong>len()和cap()函数</strong></p>
<p>1、 切片的长度是切片中元素的数量。</p>
<p>2、 切片的容量是从创建切片的索引开始的底层数组中元素的数量。</p>
<p>3、 切片是可索引的，并且可以由len()方法获取长度，切片提供了计算容量的方 法cap(),可以测量切片最长可以达到多少。[数组计算cap()结果与len()相同]</p>
<p>4、 切片实际的是获取数组的某一部分，len切片&lt;=cap切片&lt;=len数组&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ee449f21-8782-486f-82b2-e2120712d5ab')"><img id="code_img_closed_ee449f21-8782-486f-82b2-e2120712d5ab" class="code_img_closed" src="./images/GO基础之切片2.png" alt="" /><img id="code_img_opened_ee449f21-8782-486f-82b2-e2120712d5ab" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ee449f21-8782-486f-82b2-e2120712d5ab',event)" src="./images/GO基础之切片3.png" alt="" />
<div id="cnblogs_code_open_ee449f21-8782-486f-82b2-e2120712d5ab" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">

func main() {
    s1 :</span>= make([]<span style="color: #0000ff;">int</span>, <span style="color: #800080;">5</span><span style="color: #000000;">)
    s2 :</span>= make([]<span style="color: #0000ff;">int</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">7</span><span style="color: #000000;">)
    printSlice(s1) </span><span style="color: #008000;">//</span><span style="color: #008000;">length:5,cap=5,slice=[0 0 0 0 0]</span>
    printSlice(s2) <span style="color: #008000;">//</span><span style="color: #008000;">length:5,cap=7,slice=[0 0 0 0 0]
    </span><span style="color: #008000;">//</span><span style="color: #008000;">创建切片</span>
    nums := []<span style="color: #0000ff;">int</span>{<span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span><span style="color: #000000;">}
    printSlice(nums)
    </span><span style="color: #008000;">//</span><span style="color: #008000;">从切片中截取小切片</span>
    nums1 := nums[<span style="color: #800080;">1</span>:<span style="color: #800080;">4</span><span style="color: #000000;">]
    printSlice(nums1) </span><span style="color: #008000;">//</span><span style="color: #008000;">length:3,cap=4,slice=[2 3 4] </span>
    nums2 := nums[:<span style="color: #800080;">3</span><span style="color: #000000;">]
    printSlice(nums2) </span><span style="color: #008000;">//</span><span style="color: #008000;">length:3,cap=5,slice=[1 2 3]</span>
    nums3 := nums[<span style="color: #800080;">2</span><span style="color: #000000;">:]
    printSlice(nums3) </span><span style="color: #008000;">//</span><span style="color: #008000;">length:3,cap=3,slice=[3 4 5]</span>
<span style="color: #000000;">}
func printSlice(slc []</span><span style="color: #0000ff;">int</span><span style="color: #000000;">) {
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">length:%d,cap=%d,slice=%v \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, len(slc), cap(slc), slc)
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h3>&nbsp;三、切片的常用函数</h3>
<p>(五）、append( ) 和 copy( )函数 </p>
<p>1、函数append( ):</p>
<ul>
<li> &bull;往切片中追加新元素 </li>
<li>&bull;可以向 slice里面追加一个或者多个元素，也可以追加一个切片。</li>
<li> &bull; append函数会改变slice所引用的数组的内容，从而影响到引用同一数组的 其它slice。</li>
<li> &bull;当使用 append追加元素到切片时，如果容量不够（也就是(cap-len)== 0)，Go就会创建一个新的内存地址来储存元素（该方式效率较低）。 </li>
</ul>
<p>2、函数copy:*复制切片元素</p>
<ul>
<li> &bull;将源切片中的元素复制到目标切片中，返回复制的元素的个数</li>
<li> &bull; copy方法是不会建立源切片与目标切片之间的联系。也就是两个切片不存 在联系，一个修改不影响另一个。</li>
</ul>
<div class="cnblogs_code" onclick="cnblogs_code_show('34a77247-d696-4504-879b-4cdae6046aae')"><img id="code_img_closed_34a77247-d696-4504-879b-4cdae6046aae" class="code_img_closed" src="./images/GO基础之切片2.png" alt="" /><img id="code_img_opened_34a77247-d696-4504-879b-4cdae6046aae" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('34a77247-d696-4504-879b-4cdae6046aae',event)" src="./images/GO基础之切片3.png" alt="" />
<div id="cnblogs_code_open_34a77247-d696-4504-879b-4cdae6046aae" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">

func main() {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">创建切片</span>
    nums := []<span style="color: #0000ff;">int</span>{<span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span><span style="color: #000000;">}
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc00000c5d0,length:5,cap=5,slice=[1 2 3 4 5]
    </span><span style="color: #008000;">//</span><span style="color: #008000;">append 追加元素</span>
    nums = append(nums, <span style="color: #800080;">10</span><span style="color: #000000;">)
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014230,length:6,cap=10,slice=[1 2 3 4 5 10]</span>
    a := []<span style="color: #0000ff;">int</span>{<span style="color: #800080;">6</span>, <span style="color: #800080;">7</span>, <span style="color: #800080;">8</span>, <span style="color: #800080;">9</span><span style="color: #000000;">}
    </span><span style="color: #008000;">//</span><span style="color: #008000;">追加数组</span>
    nums =<span style="color: #000000;"> append(nums, a...)
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014230,length:10,cap=10,slice=[1 2 3 4 5 10 6 7 8 9]
    </span><span style="color: #008000;">//</span><span style="color: #008000;">删除第一个元素</span>
    nums = nums[<span style="color: #800080;">1</span><span style="color: #000000;">:]
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014238,length:9,cap=9,slice=[2 3 4 5 10 6 7 8 9]
    </span><span style="color: #008000;">//</span><span style="color: #008000;">删除最后一个元素</span>
    nums = nums[:len(nums)-<span style="color: #800080;">1</span><span style="color: #000000;">]
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014238,length:8,cap=9,slice=[2 3 4 5 10 6 7 8]
    </span><span style="color: #008000;">//</span><span style="color: #008000;">删除中间的元素</span>
    b := <span style="color: #0000ff;">int</span>(len(nums) / <span style="color: #800080;">2</span><span style="color: #000000;">)
    nums </span>= append(nums[:b], nums[b+<span style="color: #800080;">1</span><span style="color: #000000;">:]...)
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums</span><span style="color: #800000;">"</span>, nums) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014238,length:7,cap=9,slice=[2 3 4 5 6 7 8]

    </span><span style="color: #008000;">//</span><span style="color: #008000;">切片copy</span>
    nums2 := make([]<span style="color: #0000ff;">int</span>, len(nums), cap(nums)*<span style="color: #800080;">2</span><span style="color: #000000;">)
    </span><span style="color: #008000;">//</span><span style="color: #008000;">copy 的切片没有关联</span>
<span style="color: #000000;">    copy(nums2, nums)
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">nums2</span><span style="color: #800000;">"</span>, nums2) <span style="color: #008000;">//</span><span style="color: #008000;">slice=nums,p=0xc000014238,length:7,cap=9,slice=[2 3 4 5 6 7 8]</span>
<span style="color: #000000;">
}
func printSlice(name </span><span style="color: #0000ff;">string</span>, slc []<span style="color: #0000ff;">int</span><span style="color: #000000;">) {
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">slice=%v,p=%p,length:%d,cap=%d,slice=%v \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, name, slc, len(slc), cap(slc), slc)
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>3、使用make创建切片</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">
import </span><span style="color: #800000;">"</span><span style="color: #800000;">strconv</span><span style="color: #800000;">"</span><span style="color: #000000;">

func main() {
    str :</span>= make([]<span style="color: #0000ff;">string</span>, <span style="color: #800080;">0</span>, <span style="color: #800080;">16</span><span style="color: #000000;">)
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">str</span><span style="color: #800000;">"</span><span style="color: #000000;">, str)
    </span><span style="color: #0000ff;">for</span> i := <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">5</span>; i++<span style="color: #000000;"> {
        str </span>=<span style="color: #000000;"> append(str, strconv.Itoa(i))
    }
    printSlice(</span><span style="color: #800000;">"</span><span style="color: #800000;">str</span><span style="color: #800000;">"</span><span style="color: #000000;">, str)

}
func printSlice(name </span><span style="color: #0000ff;">string</span>, slc []<span style="color: #0000ff;">string</span><span style="color: #000000;">) {
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">slice=%v,p=%p,length:%d,cap=%d,slice=%v \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, name, slc, len(slc), cap(slc), slc)
}</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>