<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修GO基础之接口' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>GO基础之接口</center></div><div class='banquan'>原文出处:本文由博客园博主小禾点点提供。<br/>
原文连接:https://www.cnblogs.com/jalja/p/11815652.html</div><br>
    <p><strong>一、概念</strong><br />1、 面向对象语言中，接口用于定义对象的行为。接口只指定对象应该做什么，实现这种行为的方法(实现细节)是由对象来决定。<br />2、 在Go语言中，接口是一组方法签名。</p>
<ul>
<li>&bull;接口只指定了类型应该具有的方法，类型决定了如何实现这些方法。</li>
<li>&bull;当某个类型为接口中的所有方法提供了具体的实现细节时，这个类型就被称为实现了该接口。</li>
<li>&bull;接口定义了一组方法，如果某个对象实现了该接口的所有方法，则此对象就实现了该接口。</li>

</ul>
<p>3、 Go语言的类型都是隐式实现接口的。任何定义了接口中所有方法的类型都被称为隐式地实现了该接口。</p>
<p>&nbsp;</p>
<h3>二、接口的使用</h3>
<p>go没有 implements, extends 关键字，其实这种编程语言叫做duck typing编程语言。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d80d656e-9f35-4613-99cf-4b4bb9454753')"><img id="code_img_closed_d80d656e-9f35-4613-99cf-4b4bb9454753" class="code_img_closed" src="./images/GO基础之接口0.png" alt="" /><img id="code_img_opened_d80d656e-9f35-4613-99cf-4b4bb9454753" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d80d656e-9f35-4613-99cf-4b4bb9454753',event)" src="./images/GO基础之接口1.png" alt="" />
<div id="cnblogs_code_open_d80d656e-9f35-4613-99cf-4b4bb9454753" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">
import </span><span style="color: #800000;">"</span><span style="color: #800000;">base</span><span style="color: #800000;">"</span>

<span style="color: #008000;">//</span><span style="color: #008000;">定义接口</span>
type Phone <span style="color: #0000ff;">interface</span><span style="color: #000000;"> {
    call()
}

type AndroidPhone </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
}

type IPhone </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
}

func (a AndroidPhone) call() {
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">我是安卓手机，可以打电话了</span><span style="color: #800000;">"</span><span style="color: #000000;">)
}

func (i IPhone) call() {
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">我是苹果手机，可以打电话了</span><span style="color: #800000;">"</span><span style="color: #000000;">)
}

func main() {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">    定义接口类型的变量</span>
    <span style="color: #0000ff;">var</span><span style="color: #000000;"> phone Phone
    </span><span style="color: #008000;">//</span><span style="color: #008000;">phone = new(AndroidPhone)</span>
    phone =<span style="color: #000000;"> AndroidPhone{}
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%T , %v , %p \n</span><span style="color: #800000;">"</span> , phone , phone , &amp;<span style="color: #000000;">phone)
    phone.call()

    </span><span style="color: #008000;">//</span><span style="color: #008000;">phone = new(IPhone)</span>
    phone =<span style="color: #000000;"> IPhone{}
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%T , %v , %p \n</span><span style="color: #800000;">"</span> , phone , phone , &amp;<span style="color: #000000;">phone)
    phone.call()
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><br /><strong>&nbsp;动态类型与静态类型语言</strong></p>
<ul>
<li>&bull;动态类型的好处很多，Python代码写起来很快。但是缺陷也是显而易见的：错误往往要在运行时才能被发现。</li>
<li>&bull;相反，静态类型语言往往在编译时就是发现这类错误：如果某个变量的类型没有显式声明实现了某个接口，那么，这个变量就不能用在要求一个实现了这个接口的地方。</li>

</ul>
<p><strong>&nbsp;Go类型系统采取了折中的办法：</strong><br />&bull;之所以说这是一种折中的办法，原因如下：</p>
<ul>
<li>〇第一，结构体类型T不需要显式地声明它实现了接口 I。只要类型T实现了接口1规定的所有方法，它就自动地实现了接口 I。这样就像动态语言一样省了很多代码，少了许多限制。</li>
<li>〇第二，将结构体类型的变量显式或者隐式地转换为接口 I类型的变量i。这样就可以和其它静态类型语言一样，在编译时检查参数的合法性。</li>

</ul>
<h3>三、多态</h3>
<p>&bull;事物的多种形态</p>
<ul>
<li>&bull; Go中的多态性是在接口的帮助下实现的。定义接口类型，仓U建实现该接口的结构体对象。</li>
<li>&bull;定义接口类型的对象，可以保存实现该接口的任何类型的值。Go语言接口变量的这个特性实现了 Go语言中的多态性。</li>
<li>&bull;接口类型的对象，不能访问其实现类中的属性字段。</li>
</ul>
<p>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('fe8b0c1e-90b8-4c79-ad7c-38e4ff404d17')"><img id="code_img_closed_fe8b0c1e-90b8-4c79-ad7c-38e4ff404d17" class="code_img_closed" src="./images/GO基础之接口0.png" alt="" /><img id="code_img_opened_fe8b0c1e-90b8-4c79-ad7c-38e4ff404d17" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('fe8b0c1e-90b8-4c79-ad7c-38e4ff404d17',event)" src="./images/GO基础之接口1.png" alt="" />
<div id="cnblogs_code_open_fe8b0c1e-90b8-4c79-ad7c-38e4ff404d17" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">
import </span><span style="color: #800000;">"</span><span style="color: #800000;">base</span><span style="color: #800000;">"</span><span style="color: #000000;">


type Income </span><span style="color: #0000ff;">interface</span><span style="color: #000000;"> {
    calculate() float64 </span><span style="color: #008000;">//</span><span style="color: #008000;">计算收入总额</span>
    source() <span style="color: #0000ff;">string</span>     <span style="color: #008000;">//</span><span style="color: #008000;">用来说明收入来源</span>
<span style="color: #000000;">}

</span><span style="color: #008000;">//</span><span style="color: #008000;">固定账单项目</span>
type FixedBilling <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    projectName  </span><span style="color: #0000ff;">string</span>  <span style="color: #008000;">//</span><span style="color: #008000;">工程项目</span>
    biddedAmount float64 <span style="color: #008000;">//</span><span style="color: #008000;">项目招标总额</span>
<span style="color: #000000;">}

</span><span style="color: #008000;">//</span><span style="color: #008000;">定时生产项目(定时和材料项目)</span>
type TimeAndMaterial <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    projectName </span><span style="color: #0000ff;">string</span><span style="color: #000000;">
    workHours   float64 </span><span style="color: #008000;">//</span><span style="color: #008000;">工作时长</span>
    hourlyRate  float64 <span style="color: #008000;">//</span><span style="color: #008000;">每小时工资率</span>
<span style="color: #000000;">}

</span><span style="color: #008000;">//</span><span style="color: #008000;">固定收入项目</span>
<span style="color: #000000;">func (f FixedBilling) calculate() float64 {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> f.biddedAmount
}

func (f FixedBilling) source() </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> f.projectName
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">定时收入项目</span>
<span style="color: #000000;">func (t TimeAndMaterial) calculate() float64 {
    </span><span style="color: #0000ff;">return</span> t.workHours *<span style="color: #000000;"> t.hourlyRate
}

func (t TimeAndMaterial) source() </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> t.projectName
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">通过广告点击获得收入</span>
type Advertisement <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    adName         </span><span style="color: #0000ff;">string</span><span style="color: #000000;">
    clickCount     </span><span style="color: #0000ff;">int</span><span style="color: #000000;">
    incomePerclick float64
}

func (a Advertisement) calculate() float64 {
    </span><span style="color: #0000ff;">return</span> float64(a.clickCount) *<span style="color: #000000;"> a.incomePerclick
}

func (a Advertisement) source() </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> a.adName
}

func main() {
    p1 :</span>= FixedBilling{<span style="color: #800000;">"</span><span style="color: #800000;">项目1</span><span style="color: #800000;">"</span>, <span style="color: #800080;">5000</span><span style="color: #000000;">}
    p2 :</span>= FixedBilling{<span style="color: #800000;">"</span><span style="color: #800000;">项目2</span><span style="color: #800000;">"</span>, <span style="color: #800080;">10000</span><span style="color: #000000;">}
    p3 :</span>= TimeAndMaterial{<span style="color: #800000;">"</span><span style="color: #800000;">项目3</span><span style="color: #800000;">"</span>, <span style="color: #800080;">100</span>, <span style="color: #800080;">40</span><span style="color: #000000;">}
    p4 :</span>= TimeAndMaterial{<span style="color: #800000;">"</span><span style="color: #800000;">项目4</span><span style="color: #800000;">"</span>, <span style="color: #800080;">250</span>, <span style="color: #800080;">20</span><span style="color: #000000;">}
    p5 :</span>= Advertisement{<span style="color: #800000;">"</span><span style="color: #800000;">广告1</span><span style="color: #800000;">"</span>, <span style="color: #800080;">10000</span>, <span style="color: #800080;">0.1</span><span style="color: #000000;">}
    p6 :</span>= Advertisement{<span style="color: #800000;">"</span><span style="color: #800000;">广告2</span><span style="color: #800000;">"</span>, <span style="color: #800080;">20000</span>, <span style="color: #800080;">0.05</span><span style="color: #000000;">}

    ic :</span>=<span style="color: #000000;"> []Income{p1, p2, p3, p4, p5, p6}
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">total=</span><span style="color: #800000;">"</span><span style="color: #000000;">,calculateNetIncome(ic))
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">计算净收入</span>
<span style="color: #000000;">func calculateNetIncome(ic []Income) float64 {
    netincome :</span>= <span style="color: #800080;">0.0</span>
    <span style="color: #0000ff;">for</span> _, income :=<span style="color: #000000;"> range ic {
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">收入来源：%s ，收入金额：%.2f \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, income.source(), income.calculate())
        netincome </span>+=<span style="color: #000000;"> income.calculate()
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> netincome
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<h3>四、空接口</h3>
<p>&bull;空接口 ：该接口中没有任何的方法。任意类型都可以实现该接口。<br />&bull;空interface这样定义：interface{}，也就是包含0个method的interface。<br />&bull;用空接口表示任意数据类型。类似于java中的object。<br />&bull;空接口常用于以下情形：<br />〇 1、println的参数就是空接口<br />〇 2、定义一个map: key是string，value是任意数据类型<br />〇 3、定义一个切片，其中存储任意类型的数据</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('30771fff-4ae1-4801-b1b9-c2307998fd7e')"><img id="code_img_closed_30771fff-4ae1-4801-b1b9-c2307998fd7e" class="code_img_closed" src="./images/GO基础之接口0.png" alt="" /><img id="code_img_opened_30771fff-4ae1-4801-b1b9-c2307998fd7e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('30771fff-4ae1-4801-b1b9-c2307998fd7e',event)" src="./images/GO基础之接口1.png" alt="" />
<div id="cnblogs_code_open_30771fff-4ae1-4801-b1b9-c2307998fd7e" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import (
    </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">
)

type A </span><span style="color: #0000ff;">interface</span><span style="color: #000000;"> {
}

type Cat </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    name </span><span style="color: #0000ff;">string</span><span style="color: #000000;">
    age  </span><span style="color: #0000ff;">int</span><span style="color: #000000;">
}

type Person </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    name </span><span style="color: #0000ff;">string</span><span style="color: #000000;">
    sex  </span><span style="color: #0000ff;">string</span><span style="color: #000000;">
}

func main() {
    </span><span style="color: #0000ff;">var</span> a1 A = Cat{<span style="color: #800000;">"</span><span style="color: #800000;">Mimi</span><span style="color: #800000;">"</span>, <span style="color: #800080;">1</span><span style="color: #000000;">}
    </span><span style="color: #0000ff;">var</span> a2 A = Person{<span style="color: #800000;">"</span><span style="color: #800000;">Steven</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">男</span><span style="color: #800000;">"</span><span style="color: #000000;">}
    </span><span style="color: #0000ff;">var</span> a3 A = <span style="color: #800000;">"</span><span style="color: #800000;">Learn golang with me!</span><span style="color: #800000;">"</span>
    <span style="color: #0000ff;">var</span> a4 A = <span style="color: #800080;">100</span>
    <span style="color: #0000ff;">var</span> a5 A = <span style="color: #800080;">3.14</span><span style="color: #000000;">

    showInfo(a1)
    showInfo(a2)
    showInfo(a3)
    showInfo(a4)
    showInfo(a5)
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">------------------</span><span style="color: #800000;">"</span><span style="color: #000000;">)

    </span><span style="color: #008000;">//</span><span style="color: #008000;">1、fmt.println参数就是空接口</span>
    fmt.Println(<span style="color: #800000;">"</span><span style="color: #800000;">println的参数就是空接口，可以是任何数据类型</span><span style="color: #800000;">"</span>, <span style="color: #800080;">100</span>, <span style="color: #800080;">3.14</span>, Cat{<span style="color: #800000;">"</span><span style="color: #800000;">旺旺</span><span style="color: #800000;">"</span>, <span style="color: #800080;">2</span><span style="color: #000000;">})

    </span><span style="color: #008000;">//</span><span style="color: #008000;">2、定义map。value是任何数据类型</span>
    map1 := make(map[<span style="color: #0000ff;">string</span>]<span style="color: #0000ff;">interface</span><span style="color: #000000;">{})
    map1[</span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>] = <span style="color: #800000;">"</span><span style="color: #800000;">Daniel</span><span style="color: #800000;">"</span><span style="color: #000000;">
    map1[</span><span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>] = <span style="color: #800080;">13</span><span style="color: #000000;">
    map1[</span><span style="color: #800000;">"</span><span style="color: #800000;">height</span><span style="color: #800000;">"</span>] = <span style="color: #800080;">1.71</span><span style="color: #000000;">
    fmt.Println(map1)
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">------------------</span><span style="color: #800000;">"</span><span style="color: #000000;">)

    </span><span style="color: #008000;">//</span><span style="color: #008000;">    3、定义一个切片，其中存储任意数据类型</span>
    slice1 := make([]<span style="color: #0000ff;">interface</span>{}, <span style="color: #800080;">0</span>, <span style="color: #800080;">10</span><span style="color: #000000;">)
    slice1 </span>=<span style="color: #000000;"> append(slice1, a1, a2, a3, a4, a5)
    fmt.Println(slice1)

    transInterface(slice1)

    </span><span style="color: #008000;">//</span><span style="color: #008000;">var cat1 A = Cat{"MiaoMiao" , 3}
    </span><span style="color: #008000;">//</span><span style="color: #008000;">fmt.Println(cat1.name , cat1.age)</span>
<span style="color: #000000;">
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">接口对象转型
</span><span style="color: #008000;">//</span><span style="color: #008000;">接口对象.(type)，配合switch...case语句</span>
func transInterface(s []<span style="color: #0000ff;">interface</span><span style="color: #000000;">{}) {
    </span><span style="color: #0000ff;">for</span> i :=<span style="color: #000000;"> range s {
        fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">第</span><span style="color: #800000;">"</span>, i+<span style="color: #800080;">1</span> , <span style="color: #800000;">"</span><span style="color: #800000;">个数据：</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">switch</span> t :=<span style="color: #000000;"> s[i].(type) {
        </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> Cat:
            fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">\t Cat对象，name属性：%s,age属性：%d \n</span><span style="color: #800000;">"</span><span style="color: #000000;"> , t.name , t.age)
        </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> Person:
            fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">\t Person对象，name属性：%s,sex属性：%s \n</span><span style="color: #800000;">"</span><span style="color: #000000;"> , t.name , t.sex)
        </span><span style="color: #0000ff;">case</span> <span style="color: #0000ff;">string</span><span style="color: #000000;">:
            fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">\t string类型</span><span style="color: #800000;">"</span><span style="color: #000000;"> , t)
        </span><span style="color: #0000ff;">case</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">:
            fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">\t int类型</span><span style="color: #800000;">"</span><span style="color: #000000;"> , t)
        </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> float64:
            fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">\t float64类型</span><span style="color: #800000;">"</span><span style="color: #000000;"> , t)
        }
    }
}

func showInfo(a A) {
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%T , %v \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, a, a)
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><strong>五、接口对象转型</strong><br />1、 方式一：<br />&bull; instance, ok :=接口对象.(实际类型）<br />&bull;如果该接口对象是对应的实际类型，那么instance就是转型之后对象，ok的值为true<br />&bull;配合if... else if...语句使用<br />2、 方式二：<br />&bull;接口对象.(type)<br />&bull;配合switch...case语句使用</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('3e558f7a-fda7-42f8-96a9-a27be54ce45e')"><img id="code_img_closed_3e558f7a-fda7-42f8-96a9-a27be54ce45e" class="code_img_closed" src="./images/GO基础之接口0.png" alt="" /><img id="code_img_opened_3e558f7a-fda7-42f8-96a9-a27be54ce45e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3e558f7a-fda7-42f8-96a9-a27be54ce45e',event)" src="./images/GO基础之接口1.png" alt="" />
<div id="cnblogs_code_open_3e558f7a-fda7-42f8-96a9-a27be54ce45e" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">package main

import </span><span style="color: #800000;">"</span><span style="color: #800000;">fmt</span><span style="color: #800000;">"</span><span style="color: #000000;">
import (
    </span><span style="color: #800000;">"</span><span style="color: #800000;">base</span><span style="color: #800000;">"</span>
    <span style="color: #800000;">"</span><span style="color: #800000;">math</span><span style="color: #800000;">"</span><span style="color: #000000;">
)

</span><span style="color: #008000;">//</span><span style="color: #008000;">1、定义接口</span>
type Shape <span style="color: #0000ff;">interface</span><span style="color: #000000;"> {
    perimeter() float64
    area() float64
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">2.矩形</span>
type Rectangle <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    a, b float64
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">3.三角形</span>
type Triangle <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    a, b, c float64
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">4.圆形</span>
type Circle <span style="color: #0000ff;">struct</span><span style="color: #000000;"> {
    radius float64
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">定义实现接口的方法</span>
<span style="color: #000000;">func (r Rectangle) perimeter() float64 {
    </span><span style="color: #0000ff;">return</span> (r.a + r.b) * <span style="color: #800080;">2</span><span style="color: #000000;">
}

func (r Rectangle) area() float64 {
    </span><span style="color: #0000ff;">return</span> r.a *<span style="color: #000000;"> r.b
}

func (t Triangle) perimeter() float64 {
    </span><span style="color: #0000ff;">return</span> t.a + t.b +<span style="color: #000000;"> t.c
}

func (t Triangle) area() float64 {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">海伦公式</span>
    p := t.perimeter() / <span style="color: #800080;">2</span> <span style="color: #008000;">//</span><span style="color: #008000;">半周长</span>
    <span style="color: #0000ff;">return</span> math.Sqrt(p * (p - t.a) * (p - t.b) * (p -<span style="color: #000000;"> t.c))
}

func (c Circle) perimeter() float64 {
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">2</span> * math.Pi *<span style="color: #000000;"> c.radius
}

func (c Circle) area() float64 {
    </span><span style="color: #0000ff;">return</span> math.Pow(c.radius, <span style="color: #800080;">2</span>) *<span style="color: #000000;"> math.Pi
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">接口对象转型方式1
</span><span style="color: #008000;">//</span><span style="color: #008000;">instance,ok := 接口对象.(实际类型)</span>
<span style="color: #000000;">func getType(s Shape) {
    </span><span style="color: #0000ff;">if</span> instance, ok :=<span style="color: #000000;"> s.(Rectangle); ok {
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">矩形：长度%.2f , 宽度%.2f , </span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.a, instance.b)
    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> instance, ok :=<span style="color: #000000;"> s.(Triangle); ok {
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形：三边分别：%.2f , %.2f , %.2f , </span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.a, instance.b, instance.c)
    } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> instance, ok :=<span style="color: #000000;"> s.(Circle); ok {
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">圆形：半径%.2f , </span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.radius)
    }
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">接口对象转型&mdash;&mdash;方式2
</span><span style="color: #008000;">//</span><span style="color: #008000;">接口对象.(type),  配合switch和case语句使用</span>
<span style="color: #000000;">func getType2(s Shape) {
    </span><span style="color: #0000ff;">switch</span> instance :=<span style="color: #000000;"> s.(type) {
    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> Rectangle:
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">矩形：长度为%.2f ， 宽为%.2f ，\t</span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.a, instance.b)
    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> Triangle:
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形：三边分别为%.2f ，%.2f ， %.2f ，\t</span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.a, instance.b, instance.c)
    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> Circle:
        fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">圆形：半径为%.2f ，\t</span><span style="color: #800000;">"</span><span style="color: #000000;">, instance.radius)
    }
}

func getResult(s Shape) {
    getType2(s)
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">周长：%.2f ，面积:%.2f \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, s.perimeter(), s.area())
}

func main() {
    </span><span style="color: #0000ff;">var</span><span style="color: #000000;"> s Shape
    s </span>= Rectangle{<span style="color: #800080;">3</span>, <span style="color: #800080;">4</span><span style="color: #000000;">}
    getResult(s)
    showInfo(s)

    s </span>= Triangle{<span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span><span style="color: #000000;">}
    getResult(s)
    showInfo(s)

    s </span>= Circle{<span style="color: #800080;">1</span><span style="color: #000000;">}
    getResult(s)
    showInfo(s)

    x :</span>= Triangle{<span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span><span style="color: #000000;">}
    fmt.Println(x)

}

func (t Triangle) String() </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> {
    </span><span style="color: #0000ff;">return</span> fmt.Sprintf(<span style="color: #800000;">"</span><span style="color: #800000;">Triangle对象，属性分别为：%.2f, %.2f, %.2f</span><span style="color: #800000;">"</span><span style="color: #000000;">, t.a, t.b, t.c)
}

func showInfo(s Shape) {
    fmt.Printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%T ,%v \n</span><span style="color: #800000;">"</span><span style="color: #000000;">, s, s)
    fmt.Println(</span><span style="color: #800000;">"</span><span style="color: #800000;">-------------------</span><span style="color: #800000;">"</span><span style="color: #000000;">)
}</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>